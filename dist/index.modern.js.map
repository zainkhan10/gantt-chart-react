{"version":3,"file":"index.modern.js","sources":["../src/types/public-types.ts","../src/helpers/date-helper.ts","../src/components/task-list/task-list-header.tsx","../src/components/task-list/task-list-table.tsx","../src/components/other/tooltip.tsx","../src/components/other/vertical-scroll.tsx","../src/components/task-list/task-list.tsx","../src/components/grid/grid-body.tsx","../src/components/grid/grid.tsx","../src/components/calendar/top-part-of-calendar.tsx","../src/components/calendar/calendar.tsx","../src/components/other/arrow.tsx","../src/helpers/bar-helper.ts","../src/helpers/other-helper.ts","../src/components/task-item/bar/bar-display.tsx","../src/components/task-item/bar/bar-date-handle.tsx","../src/components/task-item/bar/bar-progress-handle.tsx","../src/components/task-item/bar/bar.tsx","../src/components/task-item/bar/bar-small.tsx","../src/components/task-item/milestone/milestone.tsx","../src/components/task-item/project/project.tsx","../src/components/task-item/task-item.tsx","../src/components/gantt/task-gantt-content.tsx","../src/components/gantt/task-gantt.tsx","../src/components/other/horizontal-scroll.tsx","../src/components/gantt/gantt.tsx"],"sourcesContent":["export enum ViewMode {\n  QuarterDay = \"Quarter Day\",\n  HalfDay = \"Half Day\",\n  Day = \"Day\",\n  /** ISO-8601 week */\n  Week = \"Week\",\n  Month = \"Month\",\n}\nexport type TaskType = \"task\" | \"milestone\" | \"project\";\nexport interface Task {\n  id: string;\n  type: TaskType;\n  name: string;\n  start: Date;\n  end: Date;\n  /**\n   * From 0 to 100\n   */\n  progress: number;\n  styles?: {\n    backgroundColor?: string;\n    backgroundSelectedColor?: string;\n    progressColor?: string;\n    progressSelectedColor?: string;\n  };\n  isDisabled?: boolean;\n  project?: string;\n  dependencies?: string[];\n  hideChildren?: boolean;\n}\n\nexport interface EventOption {\n  /**\n   * Time step value for date changes.\n   */\n  timeStep?: number;\n  /**\n   * Hide from and to on toggle\n   */\n  hideDates?: boolean;\n  /**\n   * Invokes on bar select on unselect.\n   */\n  onSelect?: (task: Task, isSelected: boolean) => void;\n  /**\n   * Invokes on bar double click.\n   */\n  onDoubleClick?: (task: Task) => void;\n  /**\n   * Invokes on end and start time change. Chart undoes operation if method return false or error.\n   */\n  onDateChange?: (\n    task: Task,\n    children: Task[]\n  ) => void | boolean | Promise<void> | Promise<boolean>;\n  /**\n   * Invokes on progress change. Chart undoes operation if method return false or error.\n   */\n  onProgressChange?: (\n    task: Task,\n    children: Task[]\n  ) => void | boolean | Promise<void> | Promise<boolean>;\n  /**\n   * Invokes on delete selected task. Chart undoes operation if method return false or error.\n   */\n  onDelete?: (task: Task) => void | boolean | Promise<void> | Promise<boolean>;\n  /**\n   * Invokes on expander on task list\n   */\n  onExpanderClick?: (task: Task) => void;\n}\n\nexport interface DisplayOption {\n  viewMode?: ViewMode;\n  /**\n   * Specifies the month name language. Able formats: ISO 639-2, Java Locale\n   */\n  locale?: string;\n  rtl?: boolean;\n}\n\nexport interface StylingOption {\n  headerHeight?: number;\n  columnWidth?: number;\n  listCellWidth?: string;\n  rowHeight?: number;\n  ganttHeight?: number;\n  barCornerRadius?: number;\n  handleWidth?: number;\n  fontFamily?: string;\n  fontSize?: string;\n  /**\n   * How many of row width can be taken by task.\n   * From 0 to 100\n   */\n  barFill?: number;\n  barProgressColor?: string;\n  barProgressSelectedColor?: string;\n  barBackgroundColor?: string;\n  barBackgroundSelectedColor?: string;\n  projectProgressColor?: string;\n  projectProgressSelectedColor?: string;\n  projectBackgroundColor?: string;\n  projectBackgroundSelectedColor?: string;\n  milestoneBackgroundColor?: string;\n  milestoneBackgroundSelectedColor?: string;\n  arrowColor?: string;\n  arrowIndent?: number;\n  todayColor?: string;\n  TooltipContent?: React.FC<{\n    task: Task;\n    fontSize: string;\n    fontFamily: string;\n  }>;\n  TaskListHeader?: React.FC<{\n    headerHeight: number;\n    rowWidth: string;\n    hideDates: boolean;\n    fontFamily: string;\n    fontSize: string;\n  }>;\n  TaskListTable?: React.FC<{\n    rowHeight: number;\n    rowWidth: string;\n    hideDates: boolean;\n    fontFamily: string;\n    fontSize: string;\n    locale: string;\n    tasks: Task[];\n    selectedTaskId: string;\n    /**\n     * Sets selected task by id\n     */\n    setSelectedTask: (taskId: string) => void;\n    onExpanderClick: (task: Task) => void;\n  }>;\n}\n\nexport interface GanttProps extends EventOption, DisplayOption, StylingOption {\n  tasks: Task[];\n}\n","import { Task, ViewMode } from \"../types/public-types\";\nimport DateTimeFormatOptions = Intl.DateTimeFormatOptions;\nimport DateTimeFormat = Intl.DateTimeFormat;\n\ntype DateHelperScales =\n  | \"year\"\n  | \"month\"\n  | \"day\"\n  | \"hour\"\n  | \"minute\"\n  | \"second\"\n  | \"millisecond\";\n\nconst intlDTCache = {};\nexport const getCachedDateTimeFormat = (\n  locString: string | string[],\n  opts: DateTimeFormatOptions = {}\n): DateTimeFormat => {\n  const key = JSON.stringify([locString, opts]);\n  let dtf = intlDTCache[key];\n  if (!dtf) {\n    dtf = new Intl.DateTimeFormat(locString, opts);\n    intlDTCache[key] = dtf;\n  }\n  return dtf;\n};\n\n\nexport const addToDate = (\n  date: Date,\n  quantity: number,\n  scale: DateHelperScales\n) => {\n  const newDate = new Date(\n    date.getFullYear() + (scale === \"year\" ? quantity : 0),\n    date.getMonth() + (scale === \"month\" ? quantity : 0),\n    date.getDate() + (scale === \"day\" ? quantity : 0),\n    date.getHours() + (scale === \"hour\" ? quantity : 0),\n    date.getMinutes() + (scale === \"minute\" ? quantity : 0),\n    date.getSeconds() + (scale === \"second\" ? quantity : 0),\n    date.getMilliseconds() + (scale === \"millisecond\" ? quantity : 0)\n  );\n  return newDate;\n};\n\nexport const startOfDate = (date: Date, scale: DateHelperScales) => {\n  const scores = [\n    \"millisecond\",\n    \"second\",\n    \"minute\",\n    \"hour\",\n    \"day\",\n    \"month\",\n    \"year\",\n  ];\n\n  const shouldReset = (_scale: DateHelperScales) => {\n    const maxScore = scores.indexOf(scale);\n    return scores.indexOf(_scale) <= maxScore;\n  };\n  const newDate = new Date(\n    date.getFullYear(),\n    shouldReset(\"year\") ? 0 : date.getMonth(),\n    shouldReset(\"month\") ? 1 : date.getDate(),\n    shouldReset(\"day\") ? 0 : date.getHours(),\n    shouldReset(\"hour\") ? 0 : date.getMinutes(),\n    shouldReset(\"minute\") ? 0 : date.getSeconds(),\n    shouldReset(\"second\") ? 0 : date.getMilliseconds()\n  );\n  return newDate;\n};\n\nexport const ganttDateRange = (tasks: Task[], viewMode: ViewMode) => {\n  let newStartDate: Date = tasks[0].start;\n  let newEndDate: Date = tasks[0].start;\n  for (const task of tasks) {\n    if (task.start < newStartDate) {\n      newStartDate = task.start;\n    }\n    if (task.end > newEndDate) {\n      newEndDate = task.end;\n    }\n  }\n  switch (viewMode) {\n    case ViewMode.Month:\n      newStartDate = addToDate(newStartDate, -1, \"month\");\n      newStartDate = startOfDate(newStartDate, \"month\");\n      newEndDate = addToDate(newEndDate, 1, \"year\");\n      newEndDate = startOfDate(newEndDate, \"year\");\n      break;\n    case ViewMode.Week:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newStartDate = addToDate(getMonday(newStartDate), -7, \"day\");\n      newEndDate = addToDate(newEndDate, 1.5, \"month\");\n      break;\n    case ViewMode.Day:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1, \"day\");\n      newEndDate = addToDate(newEndDate, 19, \"day\");\n      break;\n    case ViewMode.QuarterDay:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1, \"day\");\n      newEndDate = addToDate(newEndDate, 66, \"hour\"); // 24(1 day)*3 - 6\n      break;\n    case ViewMode.HalfDay:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1, \"day\");\n      newEndDate = addToDate(newEndDate, 108, \"hour\"); // 24(1 day)*5 - 12\n      break;\n  }\n  return [newStartDate, newEndDate];\n};\n\nexport const seedDates = (\n  startDate: Date,\n  endDate: Date,\n  viewMode: ViewMode\n) => {\n  let currentDate: Date = new Date(startDate);\n  const dates: Date[] = [currentDate];\n  while (currentDate < endDate) {\n    switch (viewMode) {\n      case ViewMode.Month:\n        currentDate = addToDate(currentDate, 1, \"month\");\n        break;\n      case ViewMode.Week:\n        currentDate = addToDate(currentDate, 7, \"day\");\n        break;\n      case ViewMode.Day:\n        currentDate = addToDate(currentDate, 1, \"day\");\n        break;\n      case ViewMode.HalfDay:\n        currentDate = addToDate(currentDate, 12, \"hour\");\n        break;\n      case ViewMode.QuarterDay:\n        currentDate = addToDate(currentDate, 6, \"hour\");\n        break;\n    }\n    dates.push(currentDate);\n  }\n  return dates;\n};\n\nexport const getLocaleMonth = (date: Date, locale: string) => {\n  let bottomValue = getCachedDateTimeFormat(locale, {\n    month: \"long\",\n  }).format(date);\n  bottomValue = bottomValue.replace(\n    bottomValue[0],\n    bottomValue[0].toLocaleUpperCase()\n  );\n  return bottomValue;\n};\n\n/**\n * Returns monday of current week\n * @param date date for modify\n */\nconst getMonday = (date: Date) => {\n  const day = date.getDay();\n  const diff = date.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday\n  return new Date(date.setDate(diff));\n};\n\nexport const getWeekNumberISO8601 = (date: Date) => {\n  const tmpDate = new Date(date.valueOf());\n  const dayNumber = (tmpDate.getDay() + 6) % 7;\n  tmpDate.setDate(tmpDate.getDate() - dayNumber + 3);\n  const firstThursday = tmpDate.valueOf();\n  tmpDate.setMonth(0, 1);\n  if (tmpDate.getDay() !== 4) {\n    tmpDate.setMonth(0, 1 + ((4 - tmpDate.getDay() + 7) % 7));\n  }\n  const weekNumber = (\n    1 + Math.ceil((firstThursday - tmpDate.valueOf()) / 604800000)\n  ).toString();\n\n  if (weekNumber.length === 1) {\n    return `0${weekNumber}`;\n  } else {\n    return weekNumber;\n  }\n};\n\nexport const getDaysInMonth = (month: number, year: number) => {\n  return new Date(year, month + 1, 0).getDate();\n};\n\n","import React from \"react\";\nimport styles from \"./task-list-header.module.css\";\n\nexport const TaskListHeaderDefault: React.FC<{\n  headerHeight: number;\n  rowWidth: string;\n  hideDates: boolean;\n  fontFamily: string;\n  fontSize: string;\n}> = ({ headerHeight, hideDates, fontFamily, fontSize, rowWidth }) => {\n  return (\n    <div\n      className={styles.ganttTable}\n      style={{\n        fontFamily: fontFamily,\n        fontSize: fontSize,\n      }}\n    >\n      <div\n        className={styles.ganttTable_Header}\n        style={{\n          height: headerHeight - 2,\n        }}\n      >\n        <div\n          className={styles.ganttTable_HeaderItem}\n          style={{\n            minWidth: rowWidth,\n          }}\n        >\n          &nbsp;Name\n        </div>\n        {!hideDates && (\n          <div\n            className={styles.ganttTable_HeaderSeparator}\n            style={{\n              height: headerHeight * 0.5,\n              marginTop: headerHeight * 0.2,\n            }}\n          />\n        )}\n        {!hideDates && (\n          <React.Fragment>\n            <div\n              className={styles.ganttTable_HeaderItem}\n              style={{\n                minWidth: rowWidth,\n              }}\n            >\n              &nbsp;From\n            </div>\n            <div\n              className={styles.ganttTable_HeaderSeparator}\n              style={{\n                height: headerHeight * 0.5,\n                marginTop: headerHeight * 0.25,\n              }}\n            />\n            <div\n              className={styles.ganttTable_HeaderItem}\n              style={{\n                minWidth: rowWidth,\n              }}\n            >\n              &nbsp;To\n            </div>\n          </React.Fragment>\n        )}\n      </div>\n    </div>\n  );\n};\n","import React, { useMemo } from \"react\";\nimport styles from \"./task-list-table.module.css\";\nimport { Task } from \"../../types/public-types\";\n\nconst localeDateStringCache = {};\nconst toLocaleDateStringFactory = (locale: string) => (\n  date: Date,\n  dateTimeOptions: Intl.DateTimeFormatOptions\n) => {\n  const key = date.toString();\n  let lds = localeDateStringCache[key];\n  if (!lds) {\n    lds = date.toLocaleDateString(locale, dateTimeOptions);\n    localeDateStringCache[key] = lds;\n  }\n  return lds;\n};\nconst dateTimeOptions: Intl.DateTimeFormatOptions = {\n  weekday: \"short\",\n  year: \"numeric\",\n  month: \"long\",\n  day: \"numeric\",\n};\n\nexport const TaskListTableDefault: React.FC<{\n  rowHeight: number;\n  rowWidth: string;\n  hideDates: boolean;\n  fontFamily: string;\n  fontSize: string;\n  locale: string;\n  tasks: Task[];\n  selectedTaskId: string;\n  setSelectedTask: (taskId: string) => void;\n  onExpanderClick: (task: Task) => void;\n}> = ({\n  rowHeight,\n  rowWidth,\n  hideDates,\n  tasks,\n  fontFamily,\n  fontSize,\n  locale,\n  onExpanderClick,\n}) => {\n  const toLocaleDateString = useMemo(() => toLocaleDateStringFactory(locale), [\n    locale,\n  ]);\n\n  return (\n    <div\n      className={styles.taskListWrapper}\n      style={{\n        fontFamily: fontFamily,\n        fontSize: fontSize,\n      }}\n    >\n      {tasks.map(t => {\n        let expanderSymbol = \"\";\n        if (t.hideChildren === false) {\n          expanderSymbol = \"▼\";\n        } else if (t.hideChildren === true) {\n          expanderSymbol = \"▶\";\n        }\n\n        return (\n          <div\n            className={styles.taskListTableRow}\n            style={{ height: rowHeight }}\n            key={`${t.id}row`}\n          >\n            <div\n              className={styles.taskListCell}\n              style={{\n                minWidth: rowWidth,\n                maxWidth: rowWidth,\n              }}\n              title={t.name}\n            >\n              <div className={styles.taskListNameWrapper}>\n                <div\n                  className={\n                    expanderSymbol\n                      ? styles.taskListExpander\n                      : styles.taskListEmptyExpander\n                  }\n                  onClick={() => onExpanderClick(t)}\n                >\n                  {expanderSymbol}\n                </div>\n                <div>{t.name}</div>\n              </div>\n            </div>\n            {!hideDates && (\n              <React.Fragment>\n                <div\n                  className={styles.taskListCell}\n                  style={{\n                    minWidth: rowWidth,\n                    maxWidth: rowWidth,\n                  }}\n                >\n                  &nbsp;{toLocaleDateString(t.start, dateTimeOptions)}\n                </div>\n                <div\n                  className={styles.taskListCell}\n                  style={{\n                    minWidth: rowWidth,\n                    maxWidth: rowWidth,\n                  }}\n                >\n                  &nbsp;{toLocaleDateString(t.end, dateTimeOptions)} asdasd\n                </div>\n              </React.Fragment>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n","import React, { useRef, useEffect, useState } from \"react\";\nimport { Task } from \"../../types/public-types\";\nimport { BarTask } from \"../../types/bar-task\";\nimport styles from \"./tooltip.module.css\";\n\nexport type TooltipProps = {\n  task: BarTask;\n  arrowIndent: number;\n  rtl: boolean;\n  svgContainerHeight: number;\n  svgContainerWidth: number;\n  svgWidth: number;\n  headerHeight: number;\n  taskListWidth: number;\n  scrollX: number;\n  scrollY: number;\n  rowHeight: number;\n  fontSize: string;\n  fontFamily: string;\n  TooltipContent: React.FC<{\n    task: Task;\n    fontSize: string;\n    fontFamily: string;\n  }>;\n};\nexport const Tooltip: React.FC<TooltipProps> = ({\n  task,\n  rowHeight,\n  rtl,\n  svgContainerHeight,\n  svgContainerWidth,\n  scrollX,\n  scrollY,\n  arrowIndent,\n  fontSize,\n  fontFamily,\n  headerHeight,\n  taskListWidth,\n  TooltipContent,\n}) => {\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n  const [relatedY, setRelatedY] = useState(0);\n  const [relatedX, setRelatedX] = useState(0);\n  useEffect(() => {\n    if (tooltipRef.current) {\n      const tooltipHeight = tooltipRef.current.offsetHeight * 1.1;\n      const tooltipWidth = tooltipRef.current.offsetWidth * 1.1;\n\n      let newRelatedY = task.index * rowHeight - scrollY + headerHeight;\n      let newRelatedX: number;\n      if (rtl) {\n        newRelatedX = task.x1 - arrowIndent * 1.5 - tooltipWidth - scrollX;\n        if (newRelatedX < 0) {\n          newRelatedX = task.x2 + arrowIndent * 1.5 - scrollX;\n        }\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\n        if (tooltipLeftmostPoint > svgContainerWidth) {\n          newRelatedX = svgContainerWidth - tooltipWidth;\n          newRelatedY += rowHeight;\n        }\n      } else {\n        newRelatedX = task.x2 + arrowIndent * 1.5 + taskListWidth - scrollX;\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\n        const fullChartWidth = taskListWidth + svgContainerWidth;\n        if (tooltipLeftmostPoint > fullChartWidth) {\n          newRelatedX =\n            task.x1 +\n            taskListWidth -\n            arrowIndent * 1.5 -\n            scrollX -\n            tooltipWidth;\n        }\n        if (newRelatedX < taskListWidth) {\n          newRelatedX = svgContainerWidth + taskListWidth - tooltipWidth;\n          newRelatedY += rowHeight;\n        }\n      }\n\n      const tooltipLowerPoint = tooltipHeight + newRelatedY - scrollY;\n      if (tooltipLowerPoint > svgContainerHeight - scrollY) {\n        newRelatedY = svgContainerHeight - tooltipHeight;\n      }\n      setRelatedY(newRelatedY);\n      setRelatedX(newRelatedX);\n    }\n  }, [\n    tooltipRef.current,\n    task,\n    arrowIndent,\n    scrollX,\n    scrollY,\n    headerHeight,\n    taskListWidth,\n    rowHeight,\n    svgContainerHeight,\n    svgContainerWidth,\n  ]);\n\n  return (\n    <div\n      ref={tooltipRef}\n      className={\n        relatedX\n          ? styles.tooltipDetailsContainer\n          : styles.tooltipDetailsContainerHidden\n      }\n      style={{ left: relatedX, top: relatedY }}\n    >\n      <TooltipContent task={task} fontSize={fontSize} fontFamily={fontFamily} />\n    </div>\n  );\n};\n\nexport const StandardTooltipContent: React.FC<{\n  task: Task;\n  fontSize: string;\n  fontFamily: string;\n}> = ({ task, fontSize, fontFamily }) => {\n  const style = {\n    fontSize,\n    fontFamily,\n  };\n  return (\n    <div className={styles.tooltipDefaultContainer} style={style}>\n      <b style={{ fontSize: fontSize + 6 }}>{`${\n        task.name\n      }: ${task.start.getDate()}-${\n        task.start.getMonth() + 1\n      }-${task.start.getFullYear()} - ${task.end.getDate()}-${\n        task.end.getMonth() + 1\n      }-${task.end.getFullYear()}`}</b>\n      {task.end.getTime() - task.start.getTime() !== 0 && (\n        <p className={styles.tooltipDefaultContainerParagraph}>{`Duration: ${~~(\n          (task.end.getTime() - task.start.getTime()) /\n          (1000 * 60 * 60 * 24)\n        )} day(s)`}</p>\n      )}\n\n      <p className={styles.tooltipDefaultContainerParagraph}>\n        {!!task.progress && `Progress: ${task.progress} %`}\n      </p>\n    </div>\n  );\n};\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\nimport styles from \"./vertical-scroll.module.css\";\n\nexport const VerticalScroll: React.FC<{\n  scroll: number;\n  ganttHeight: number;\n  ganttFullHeight: number;\n  headerHeight: number;\n  rtl: boolean;\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\n}> = ({\n  scroll,\n  ganttHeight,\n  ganttFullHeight,\n  headerHeight,\n  rtl,\n  onScroll,\n}) => {\n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scroll;\n    }\n  }, [scroll]);\n\n  return (\n    <div\n      style={{\n        height: ganttHeight,\n        marginTop: headerHeight,\n        marginLeft: rtl ? \"\" : \"-17px\",\n      }}\n      className={styles.scroll}\n      onScroll={onScroll}\n      ref={scrollRef}\n    >\n      <div style={{ height: ganttFullHeight, width: 1 }} />\n    </div>\n  );\n};\n","import React, { useEffect, useRef } from \"react\";\nimport { BarTask } from \"../../types/bar-task\";\nimport { Task } from \"../../types/public-types\";\n\nexport type TaskListProps = {\n  headerHeight: number;\n  rowWidth: string;\n  fontFamily: string;\n  fontSize: string;\n  rowHeight: number;\n  ganttHeight: number;\n  hideDates: boolean;\n  scrollY: number;\n  locale: string;\n  tasks: Task[];\n  taskListRef: React.RefObject<HTMLDivElement>;\n  horizontalContainerClass?: string;\n  selectedTask: BarTask | undefined;\n  setSelectedTask: (task: string) => void;\n  onExpanderClick: (task: Task) => void;\n  TaskListHeader: React.FC<{\n    headerHeight: number;\n    rowWidth: string;\n    hideDates: boolean;\n    fontFamily: string;\n    fontSize: string;\n  }>;\n  TaskListTable: React.FC<{\n    rowHeight: number;\n    rowWidth: string;\n    hideDates: boolean;\n    fontFamily: string;\n    fontSize: string;\n    locale: string;\n    tasks: Task[];\n    selectedTaskId: string;\n    setSelectedTask: (taskId: string) => void;\n    onExpanderClick: (task: Task) => void;\n  }>;\n};\n\nexport const TaskList: React.FC<TaskListProps> = ({\n  headerHeight,\n  fontFamily,\n  fontSize,\n  hideDates,\n  rowWidth,\n  rowHeight,\n  scrollY,\n  tasks,\n  selectedTask,\n  setSelectedTask,\n  onExpanderClick,\n  locale,\n  ganttHeight,\n  taskListRef,\n  horizontalContainerClass,\n  TaskListHeader,\n  TaskListTable,\n}) => {\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    if (horizontalContainerRef.current) {\n      horizontalContainerRef.current.scrollTop = scrollY;\n    }\n  }, [scrollY]);\n\n  const headerProps = {\n    headerHeight,\n    fontFamily,\n    fontSize,\n    rowWidth,\n    hideDates\n  };\n  const selectedTaskId = selectedTask ? selectedTask.id : \"\";\n  const tableProps = {\n    rowHeight,\n    rowWidth,\n    fontFamily,\n    fontSize,\n    tasks,\n    locale,\n    selectedTaskId: selectedTaskId,\n    setSelectedTask,\n    onExpanderClick,\n    hideDates\n  };\n\n  return (\n    <div ref={taskListRef}>\n      <TaskListHeader {...headerProps} />\n      <div\n        ref={horizontalContainerRef}\n        className={horizontalContainerClass}\n        style={ganttHeight ? { height: ganttHeight } : {}}\n      >\n        <TaskListTable {...tableProps} />\n      </div>\n    </div>\n  );\n};\n","import React, { ReactChild } from \"react\";\nimport { Task } from \"../../types/public-types\";\nimport { addToDate } from \"../../helpers/date-helper\";\nimport styles from \"./grid.module.css\";\n\nexport type GridBodyProps = {\n  tasks: Task[];\n  dates: Date[];\n  svgWidth: number;\n  rowHeight: number;\n  columnWidth: number;\n  todayColor: string;\n  rtl: boolean;\n};\nexport const GridBody: React.FC<GridBodyProps> = ({\n  tasks,\n  dates,\n  rowHeight,\n  svgWidth,\n  columnWidth,\n  todayColor,\n  rtl,\n}) => {\n  let y = 0;\n  const gridRows: ReactChild[] = [];\n  const rowLines: ReactChild[] = [\n    <line\n      key=\"RowLineFirst\"\n      x=\"0\"\n      y1={0}\n      x2={svgWidth}\n      y2={0}\n      className={styles.gridRowLine}\n    />,\n  ];\n  for (const task of tasks) {\n    gridRows.push(\n      <rect\n        key={\"Row\" + task.id}\n        x=\"0\"\n        y={y}\n        width={svgWidth}\n        height={rowHeight}\n        className={styles.gridRow}\n      />\n    );\n    rowLines.push(\n      <line\n        key={\"RowLine\" + task.id}\n        x=\"0\"\n        y1={y + rowHeight}\n        x2={svgWidth}\n        y2={y + rowHeight}\n        className={styles.gridRowLine}\n      />\n    );\n    y += rowHeight;\n  }\n\n  const now = new Date();\n  let tickX = 0;\n  const ticks: ReactChild[] = [];\n  let today: ReactChild = <rect />;\n  for (let i = 0; i < dates.length; i++) {\n    const date = dates[i];\n    ticks.push(\n      <line\n        key={date.getTime()}\n        x1={tickX}\n        y1={0}\n        x2={tickX}\n        y2={y}\n        className={styles.gridTick}\n      />\n    );\n    if (\n      (i + 1 !== dates.length &&\n        date.getTime() < now.getTime() &&\n        dates[i + 1].getTime() >= now.getTime()) ||\n      // if current date is last\n      (i !== 0 &&\n        i + 1 === dates.length &&\n        date.getTime() < now.getTime() &&\n        addToDate(\n          date,\n          date.getTime() - dates[i - 1].getTime(),\n          \"millisecond\"\n        ).getTime() >= now.getTime())\n    ) {\n      today = (\n        <rect\n          x={tickX}\n          y={0}\n          width={columnWidth}\n          height={y}\n          fill={todayColor}\n        />\n      );\n    }\n    // rtl for today\n    if (\n      rtl &&\n      i + 1 !== dates.length &&\n      date.getTime() >= now.getTime() &&\n      dates[i + 1].getTime() < now.getTime()\n    ) {\n      today = (\n        <rect\n          x={tickX + columnWidth}\n          y={0}\n          width={columnWidth}\n          height={y}\n          fill={todayColor}\n        />\n      );\n    }\n    tickX += columnWidth;\n  }\n  return (\n    <g className=\"gridBody\">\n      <g className=\"rows\">{gridRows}</g>\n      <g className=\"rowLines\">{rowLines}</g>\n      <g className=\"ticks\">{ticks}</g>\n      <g className=\"today\">{today}</g>\n    </g>\n  );\n};\n","import React from \"react\";\nimport { GridBody, GridBodyProps } from \"./grid-body\";\n\nexport type GridProps = GridBodyProps;\nexport const Grid: React.FC<GridProps> = props => {\n  return (\n    <g className=\"grid\">\n      <GridBody {...props} />\n    </g>\n  );\n};\n","import React from \"react\";\nimport styles from \"./calendar.module.css\";\n\ntype TopPartOfCalendarProps = {\n  value: string;\n  x1Line: number;\n  y1Line: number;\n  y2Line: number;\n  xText: number;\n  yText: number;\n};\n\nexport const TopPartOfCalendar: React.FC<TopPartOfCalendarProps> = ({\n  value,\n  x1Line,\n  y1Line,\n  y2Line,\n  xText,\n  yText,\n}) => {\n  return (\n    <g className=\"calendarTop\">\n      <line\n        x1={x1Line}\n        y1={y1Line}\n        x2={x1Line}\n        y2={y2Line}\n        className={styles.calendarTopTick}\n        key={value + \"line\"}\n      />\n      <text\n        key={value + \"text\"}\n        y={yText}\n        x={xText}\n        className={styles.calendarTopText}\n      >\n        {value}\n      </text>\n    </g>\n  );\n};\n","import React, { ReactChild } from \"react\";\nimport { ViewMode } from \"../../types/public-types\";\nimport { TopPartOfCalendar } from \"./top-part-of-calendar\";\nimport {\n  getCachedDateTimeFormat,\n  getDaysInMonth,\n  getLocaleMonth,\n  getWeekNumberISO8601,\n} from \"../../helpers/date-helper\";\nimport { DateSetup } from \"../../types/date-setup\";\nimport styles from \"./calendar.module.css\";\n\nexport type CalendarProps = {\n  dateSetup: DateSetup;\n  locale: string;\n  viewMode: ViewMode;\n  rtl: boolean;\n  headerHeight: number;\n  columnWidth: number;\n  fontFamily: string;\n  fontSize: string;\n};\n\nexport const Calendar: React.FC<CalendarProps> = ({\n  dateSetup,\n  locale,\n  viewMode,\n  rtl,\n  headerHeight,\n  columnWidth,\n  fontFamily,\n  fontSize,\n}) => {\n  const getCalendarValuesForMonth = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const topDefaultHeight = headerHeight * 0.5;\n    for (let i = 0; i < dateSetup.dates.length; i++) {\n      const date = dateSetup.dates[i];\n      const bottomValue = getLocaleMonth(date, locale);\n      bottomValues.push(\n        <text\n          key={bottomValue + date.getFullYear()}\n          y={headerHeight * 0.8}\n          x={columnWidth * i + columnWidth * 0.5}\n          className={styles.calendarBottomText}\n        >\n          {bottomValue}\n        </text>\n      );\n      if (\n        i === 0 ||\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\n      ) {\n        const topValue = date.getFullYear().toString();\n        let xText: number;\n        if (rtl) {\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\n        } else {\n          xText = (6 + i - date.getMonth()) * columnWidth;\n        }\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue}\n            value={topValue}\n            x1Line={columnWidth * i}\n            y1Line={0}\n            y2Line={topDefaultHeight}\n            xText={xText}\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForWeek = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    let weeksCount: number = 1;\n    const topDefaultHeight = headerHeight * 0.5;\n    const dates = dateSetup.dates;\n    for (let i = dates.length - 1; i >= 0; i--) {\n      const date = dates[i];\n      let topValue = \"\";\n      if (i === 0 || date.getMonth() !== dates[i - 1].getMonth()) {\n        // top\n        topValue = `${getLocaleMonth(date, locale)}, ${date.getFullYear()}`;\n      }\n      // bottom\n      const bottomValue = `W${getWeekNumberISO8601(date)}`;\n\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * (i + +rtl)}\n          className={styles.calendarBottomText}\n        >\n          {bottomValue}\n        </text>\n      );\n\n      if (topValue) {\n        // if last day is new month\n        if (i !== dates.length - 1) {\n          topValues.push(\n            <TopPartOfCalendar\n              key={topValue}\n              value={topValue}\n              x1Line={columnWidth * i + weeksCount * columnWidth}\n              y1Line={0}\n              y2Line={topDefaultHeight}\n              xText={columnWidth * i + columnWidth * weeksCount * 0.5}\n              yText={topDefaultHeight * 0.9}\n            />\n          );\n        }\n        weeksCount = 0;\n      }\n      weeksCount++;\n    }\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForDay = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const topDefaultHeight = headerHeight * 0.5;\n    const dates = dateSetup.dates;\n    for (let i = 0; i < dates.length; i++) {\n      const date = dates[i];\n      const bottomValue = date.getDate().toString();\n\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * i + columnWidth * 0.5}\n          className={styles.calendarBottomText}\n        >\n          {bottomValue}\n        </text>\n      );\n      if (\n        i + 1 !== dates.length &&\n        date.getMonth() !== dates[i + 1].getMonth()\n      ) {\n        const topValue = getLocaleMonth(date, locale);\n\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue + date.getFullYear()}\n            value={topValue}\n            x1Line={columnWidth * (i + 1)}\n            y1Line={0}\n            y2Line={topDefaultHeight}\n            xText={\n              columnWidth * (i + 1) -\n              getDaysInMonth(date.getMonth(), date.getFullYear()) *\n                columnWidth *\n                0.5\n            }\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForOther = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const ticks = viewMode === ViewMode.HalfDay ? 2 : 4;\n    const topDefaultHeight = headerHeight * 0.5;\n    const dates = dateSetup.dates;\n    for (let i = 0; i < dates.length; i++) {\n      const date = dates[i];\n      const bottomValue = getCachedDateTimeFormat(locale, {\n        hour: \"numeric\",\n      }).format(date);\n\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * (i + +rtl)}\n          className={styles.calendarBottomText}\n          fontFamily={fontFamily}\n        >\n          {bottomValue}\n        </text>\n      );\n      if (i === 0 || date.getDate() !== dates[i - 1].getDate()) {\n        const topValue = `${date.getDate()} ${getLocaleMonth(date, locale)}`;\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue + date.getFullYear()}\n            value={topValue}\n            x1Line={columnWidth * i + ticks * columnWidth}\n            y1Line={0}\n            y2Line={topDefaultHeight}\n            xText={columnWidth * i + ticks * columnWidth * 0.5}\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  let topValues: ReactChild[] = [];\n  let bottomValues: ReactChild[] = [];\n  switch (dateSetup.viewMode) {\n    case ViewMode.Month:\n      [topValues, bottomValues] = getCalendarValuesForMonth();\n      break;\n    case ViewMode.Week:\n      [topValues, bottomValues] = getCalendarValuesForWeek();\n      break;\n    case ViewMode.Day:\n      [topValues, bottomValues] = getCalendarValuesForDay();\n      break;\n    default:\n      [topValues, bottomValues] = getCalendarValuesForOther();\n      break;\n  }\n  return (\n    <g className=\"calendar\" fontSize={fontSize} fontFamily={fontFamily}>\n      <rect\n        x={0}\n        y={0}\n        width={columnWidth * dateSetup.dates.length}\n        height={headerHeight}\n        className={styles.calendarHeader}\n      />\n      {bottomValues} {topValues}\n    </g>\n  );\n};\n","import React from \"react\";\nimport { BarTask } from \"../../types/bar-task\";\n\ntype ArrowProps = {\n  taskFrom: BarTask;\n  taskTo: BarTask;\n  rowHeight: number;\n  taskHeight: number;\n  arrowIndent: number;\n  rtl: boolean;\n};\nexport const Arrow: React.FC<ArrowProps> = ({\n  taskFrom,\n  taskTo,\n  rowHeight,\n  taskHeight,\n  arrowIndent,\n  rtl,\n}) => {\n  let path: string;\n  let trianglePoints: string;\n  if (rtl) {\n    [path, trianglePoints] = drownPathAndTriangleRTL(\n      taskFrom,\n      taskTo,\n      rowHeight,\n      taskHeight,\n      arrowIndent\n    );\n  } else {\n    [path, trianglePoints] = drownPathAndTriangle(\n      taskFrom,\n      taskTo,\n      rowHeight,\n      taskHeight,\n      arrowIndent\n    );\n  }\n\n  return (\n    <g className=\"arrow\">\n      <path strokeWidth=\"1.5\" d={path} fill=\"none\" />\n      <polygon points={trianglePoints} />\n    </g>\n  );\n};\n\nconst drownPathAndTriangle = (\n  taskFrom: BarTask,\n  taskTo: BarTask,\n  rowHeight: number,\n  taskHeight: number,\n  arrowIndent: number\n) => {\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\n  const taskFromEndPosition = taskFrom.x2 + arrowIndent * 2;\n  const taskFromHorizontalOffsetValue =\n    taskFromEndPosition < taskTo.x1 ? \"\" : `H ${taskTo.x1 - arrowIndent}`;\n  const taskToHorizontalOffsetValue =\n    taskFromEndPosition > taskTo.x1\n      ? arrowIndent\n      : taskTo.x1 - taskFrom.x2 - arrowIndent;\n\n  const path = `M ${taskFrom.x2} ${taskFrom.y + taskHeight / 2} \n  h ${arrowIndent} \n  v ${(indexCompare * rowHeight) / 2} \n  ${taskFromHorizontalOffsetValue}\n  V ${taskToEndPosition} \n  h ${taskToHorizontalOffsetValue}`;\n\n  const trianglePoints = `${taskTo.x1},${taskToEndPosition} \n  ${taskTo.x1 - 5},${taskToEndPosition - 5} \n  ${taskTo.x1 - 5},${taskToEndPosition + 5}`;\n  return [path, trianglePoints];\n};\n\nconst drownPathAndTriangleRTL = (\n  taskFrom: BarTask,\n  taskTo: BarTask,\n  rowHeight: number,\n  taskHeight: number,\n  arrowIndent: number\n) => {\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\n  const taskFromEndPosition = taskFrom.x1 - arrowIndent * 2;\n  const taskFromHorizontalOffsetValue =\n    taskFromEndPosition > taskTo.x2 ? \"\" : `H ${taskTo.x2 + arrowIndent}`;\n  const taskToHorizontalOffsetValue =\n    taskFromEndPosition < taskTo.x2\n      ? -arrowIndent\n      : taskTo.x2 - taskFrom.x1 + arrowIndent;\n\n  const path = `M ${taskFrom.x1} ${taskFrom.y + taskHeight / 2} \n  h ${-arrowIndent} \n  v ${(indexCompare * rowHeight) / 2} \n  ${taskFromHorizontalOffsetValue}\n  V ${taskToEndPosition} \n  h ${taskToHorizontalOffsetValue}`;\n\n  const trianglePoints = `${taskTo.x2},${taskToEndPosition} \n  ${taskTo.x2 + 5},${taskToEndPosition + 5} \n  ${taskTo.x2 + 5},${taskToEndPosition - 5}`;\n  return [path, trianglePoints];\n};\n","import { Task } from \"../types/public-types\";\nimport { BarTask, TaskTypeInternal } from \"../types/bar-task\";\nimport { BarMoveAction } from \"../types/gantt-task-actions\";\n\nexport const convertToBarTasks = (\n  tasks: Task[],\n  dates: Date[],\n  columnWidth: number,\n  rowHeight: number,\n  taskHeight: number,\n  barCornerRadius: number,\n  handleWidth: number,\n  rtl: boolean,\n  barProgressColor: string,\n  barProgressSelectedColor: string,\n  barBackgroundColor: string,\n  barBackgroundSelectedColor: string,\n  projectProgressColor: string,\n  projectProgressSelectedColor: string,\n  projectBackgroundColor: string,\n  projectBackgroundSelectedColor: string,\n  milestoneBackgroundColor: string,\n  milestoneBackgroundSelectedColor: string\n) => {\n  const dateDelta =\n    dates[1].getTime() -\n    dates[0].getTime() -\n    dates[1].getTimezoneOffset() * 60 * 1000 +\n    dates[0].getTimezoneOffset() * 60 * 1000;\n  let barTasks = tasks.map((t, i) => {\n    return convertToBarTask(\n      t,\n      i,\n      dates,\n      dateDelta,\n      columnWidth,\n      rowHeight,\n      taskHeight,\n      barCornerRadius,\n      handleWidth,\n      rtl,\n      barProgressColor,\n      barProgressSelectedColor,\n      barBackgroundColor,\n      barBackgroundSelectedColor,\n      projectProgressColor,\n      projectProgressSelectedColor,\n      projectBackgroundColor,\n      projectBackgroundSelectedColor,\n      milestoneBackgroundColor,\n      milestoneBackgroundSelectedColor\n    );\n  });\n\n  // set dependencies\n  barTasks = barTasks.map(task => {\n    const dependencies = task.dependencies || [];\n    for (let j = 0; j < dependencies.length; j++) {\n      const dependence = barTasks.findIndex(\n        value => value.id === dependencies[j]\n      );\n      if (dependence !== -1) barTasks[dependence].barChildren.push(task);\n    }\n    return task;\n  });\n\n  return barTasks;\n};\n\nconst convertToBarTask = (\n  task: Task,\n  index: number,\n  dates: Date[],\n  dateDelta: number,\n  columnWidth: number,\n  rowHeight: number,\n  taskHeight: number,\n  barCornerRadius: number,\n  handleWidth: number,\n  rtl: boolean,\n  barProgressColor: string,\n  barProgressSelectedColor: string,\n  barBackgroundColor: string,\n  barBackgroundSelectedColor: string,\n  projectProgressColor: string,\n  projectProgressSelectedColor: string,\n  projectBackgroundColor: string,\n  projectBackgroundSelectedColor: string,\n  milestoneBackgroundColor: string,\n  milestoneBackgroundSelectedColor: string\n): BarTask => {\n  let barTask: BarTask;\n  switch (task.type) {\n    case \"milestone\":\n      barTask = convertToMilestone(\n        task,\n        index,\n        dates,\n        dateDelta,\n        columnWidth,\n        rowHeight,\n        taskHeight,\n        barCornerRadius,\n        handleWidth,\n        milestoneBackgroundColor,\n        milestoneBackgroundSelectedColor\n      );\n      break;\n    case \"project\":\n      barTask = convertToBar(\n        task,\n        index,\n        dates,\n        dateDelta,\n        columnWidth,\n        rowHeight,\n        taskHeight,\n        barCornerRadius,\n        handleWidth,\n        rtl,\n        projectProgressColor,\n        projectProgressSelectedColor,\n        projectBackgroundColor,\n        projectBackgroundSelectedColor\n      );\n      break;\n    default:\n      barTask = convertToBar(\n        task,\n        index,\n        dates,\n        dateDelta,\n        columnWidth,\n        rowHeight,\n        taskHeight,\n        barCornerRadius,\n        handleWidth,\n        rtl,\n        barProgressColor,\n        barProgressSelectedColor,\n        barBackgroundColor,\n        barBackgroundSelectedColor\n      );\n      break;\n  }\n  return barTask;\n};\n\nconst convertToBar = (\n  task: Task,\n  index: number,\n  dates: Date[],\n  dateDelta: number,\n  columnWidth: number,\n  rowHeight: number,\n  taskHeight: number,\n  barCornerRadius: number,\n  handleWidth: number,\n  rtl: boolean,\n  barProgressColor: string,\n  barProgressSelectedColor: string,\n  barBackgroundColor: string,\n  barBackgroundSelectedColor: string\n): BarTask => {\n  let x1: number;\n  let x2: number;\n  if (rtl) {\n    x2 = taskXCoordinateRTL(task.start, dates, dateDelta, columnWidth);\n    x1 = taskXCoordinateRTL(task.end, dates, dateDelta, columnWidth);\n  } else {\n    x1 = taskXCoordinate(task.start, dates, dateDelta, columnWidth);\n    x2 = taskXCoordinate(task.end, dates, dateDelta, columnWidth);\n  }\n  let typeInternal: TaskTypeInternal = task.type;\n  if (typeInternal === \"task\" && x2 - x1 < handleWidth * 2) {\n    typeInternal = \"smalltask\";\n    x2 = x1 + handleWidth * 2;\n  }\n\n  const [progressWidth, progressX] = progressWithByParams(\n    x1,\n    x2,\n    task.progress,\n    rtl\n  );\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\n  const hideChildren = task.type === \"project\" ? task.hideChildren : undefined;\n\n  const styles = {\n    backgroundColor: barBackgroundColor,\n    backgroundSelectedColor: barBackgroundSelectedColor,\n    progressColor: barProgressColor,\n    progressSelectedColor: barProgressSelectedColor,\n    ...task.styles,\n  };\n  return {\n    ...task,\n    typeInternal,\n    x1,\n    x2,\n    y,\n    index,\n    progressX,\n    progressWidth,\n    barCornerRadius,\n    handleWidth,\n    hideChildren,\n    height: taskHeight,\n    barChildren: [],\n    styles,\n  };\n};\n\nconst convertToMilestone = (\n  task: Task,\n  index: number,\n  dates: Date[],\n  dateDelta: number,\n  columnWidth: number,\n  rowHeight: number,\n  taskHeight: number,\n  barCornerRadius: number,\n  handleWidth: number,\n  milestoneBackgroundColor: string,\n  milestoneBackgroundSelectedColor: string\n): BarTask => {\n  const x = taskXCoordinate(task.start, dates, dateDelta, columnWidth);\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\n\n  const x1 = x - taskHeight * 0.5;\n  const x2 = x + taskHeight * 0.5;\n\n  const rotatedHeight = taskHeight / 1.414;\n  const styles = {\n    backgroundColor: milestoneBackgroundColor,\n    backgroundSelectedColor: milestoneBackgroundSelectedColor,\n    progressColor: \"\",\n    progressSelectedColor: \"\",\n    ...task.styles,\n  };\n  return {\n    ...task,\n    end: task.start,\n    x1,\n    x2,\n    y,\n    index,\n    progressX: 0,\n    progressWidth: 0,\n    barCornerRadius,\n    handleWidth,\n    typeInternal: task.type,\n    progress: 0,\n    height: rotatedHeight,\n    hideChildren: undefined,\n    barChildren: [],\n    styles,\n  };\n};\n\nconst taskXCoordinate = (\n  xDate: Date,\n  dates: Date[],\n  dateDelta: number,\n  columnWidth: number\n) => {\n  const index = ~~(\n    (xDate.getTime() -\n      dates[0].getTime() +\n      xDate.getTimezoneOffset() -\n      dates[0].getTimezoneOffset()) /\n    dateDelta\n  );\n  const x = Math.round(\n    (index +\n      (xDate.getTime() -\n        dates[index].getTime() -\n        xDate.getTimezoneOffset() * 60 * 1000 +\n        dates[index].getTimezoneOffset() * 60 * 1000) /\n        dateDelta) *\n      columnWidth\n  );\n  return x;\n};\nconst taskXCoordinateRTL = (\n  xDate: Date,\n  dates: Date[],\n  dateDelta: number,\n  columnWidth: number\n) => {\n  let x = taskXCoordinate(xDate, dates, dateDelta, columnWidth);\n  x += columnWidth;\n  return x;\n};\nconst taskYCoordinate = (\n  index: number,\n  rowHeight: number,\n  taskHeight: number\n) => {\n  const y = index * rowHeight + (rowHeight - taskHeight) / 2;\n  return y;\n};\n\nexport const progressWithByParams = (\n  taskX1: number,\n  taskX2: number,\n  progress: number,\n  rtl: boolean\n) => {\n  const progressWidth = (taskX2 - taskX1) * progress * 0.01;\n  let progressX: number;\n  if (rtl) {\n    progressX = taskX2 - progressWidth;\n  } else {\n    progressX = taskX1;\n  }\n  return [progressWidth, progressX];\n};\n\nexport const progressByProgressWidth = (\n  progressWidth: number,\n  barTask: BarTask\n) => {\n  const barWidth = barTask.x2 - barTask.x1;\n  const progressPercent = Math.round((progressWidth * 100) / barWidth);\n  if (progressPercent >= 100) return 100;\n  else if (progressPercent <= 0) return 0;\n  else return progressPercent;\n};\n\nconst progressByX = (x: number, task: BarTask) => {\n  if (x >= task.x2) return 100;\n  else if (x <= task.x1) return 0;\n  else {\n    const barWidth = task.x2 - task.x1;\n    const progressPercent = Math.round(((x - task.x1) * 100) / barWidth);\n    return progressPercent;\n  }\n};\nconst progressByXRTL = (x: number, task: BarTask) => {\n  if (x >= task.x2) return 0;\n  else if (x <= task.x1) return 100;\n  else {\n    const barWidth = task.x2 - task.x1;\n    const progressPercent = Math.round(((task.x2 - x) * 100) / barWidth);\n    return progressPercent;\n  }\n};\n\nexport const getProgressPoint = (\n  progressX: number,\n  taskY: number,\n  taskHeight: number\n) => {\n  const point = [\n    progressX - 5,\n    taskY + taskHeight,\n    progressX + 5,\n    taskY + taskHeight,\n    progressX,\n    taskY + taskHeight - 8.66,\n  ];\n  return point.join(\",\");\n};\n\nconst startByX = (x: number, xStep: number, task: BarTask) => {\n  if (x >= task.x2 - task.handleWidth * 2) {\n    x = task.x2 - task.handleWidth * 2;\n  }\n  const steps = Math.round((x - task.x1) / xStep);\n  const additionalXValue = steps * xStep;\n  const newX = task.x1 + additionalXValue;\n  return newX;\n};\n\nconst endByX = (x: number, xStep: number, task: BarTask) => {\n  if (x <= task.x1 + task.handleWidth * 2) {\n    x = task.x1 + task.handleWidth * 2;\n  }\n  const steps = Math.round((x - task.x2) / xStep);\n  const additionalXValue = steps * xStep;\n  const newX = task.x2 + additionalXValue;\n  return newX;\n};\n\nconst moveByX = (x: number, xStep: number, task: BarTask) => {\n  const steps = Math.round((x - task.x1) / xStep);\n  const additionalXValue = steps * xStep;\n  const newX1 = task.x1 + additionalXValue;\n  const newX2 = newX1 + task.x2 - task.x1;\n  return [newX1, newX2];\n};\n\nconst dateByX = (\n  x: number,\n  taskX: number,\n  taskDate: Date,\n  xStep: number,\n  timeStep: number\n) => {\n  let newDate = new Date(((x - taskX) / xStep) * timeStep + taskDate.getTime());\n  newDate = new Date(\n    newDate.getTime() +\n      (newDate.getTimezoneOffset() - taskDate.getTimezoneOffset()) * 60000\n  );\n  return newDate;\n};\n\n/**\n * Method handles event in real time(mousemove) and on finish(mouseup)\n */\nexport const handleTaskBySVGMouseEvent = (\n  svgX: number,\n  action: BarMoveAction,\n  selectedTask: BarTask,\n  xStep: number,\n  timeStep: number,\n  initEventX1Delta: number,\n  rtl: boolean\n): { isChanged: boolean; changedTask: BarTask } => {\n  let result: { isChanged: boolean; changedTask: BarTask };\n  switch (selectedTask.type) {\n    case \"milestone\":\n      result = handleTaskBySVGMouseEventForMilestone(\n        svgX,\n        action,\n        selectedTask,\n        xStep,\n        timeStep,\n        initEventX1Delta\n      );\n      break;\n    default:\n      result = handleTaskBySVGMouseEventForBar(\n        svgX,\n        action,\n        selectedTask,\n        xStep,\n        timeStep,\n        initEventX1Delta,\n        rtl\n      );\n      break;\n  }\n  return result;\n};\n\nconst handleTaskBySVGMouseEventForBar = (\n  svgX: number,\n  action: BarMoveAction,\n  selectedTask: BarTask,\n  xStep: number,\n  timeStep: number,\n  initEventX1Delta: number,\n  rtl: boolean\n): { isChanged: boolean; changedTask: BarTask } => {\n  const changedTask: BarTask = { ...selectedTask };\n  let isChanged = false;\n  switch (action) {\n    case \"progress\":\n      if (rtl) {\n        changedTask.progress = progressByXRTL(svgX, selectedTask);\n      } else {\n        changedTask.progress = progressByX(svgX, selectedTask);\n      }\n      isChanged = changedTask.progress !== selectedTask.progress;\n      if (isChanged) {\n        const [progressWidth, progressX] = progressWithByParams(\n          changedTask.x1,\n          changedTask.x2,\n          changedTask.progress,\n          rtl\n        );\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n      break;\n    case \"start\": {\n      const newX1 = startByX(svgX, xStep, selectedTask);\n      changedTask.x1 = newX1;\n      isChanged = changedTask.x1 !== selectedTask.x1;\n      if (isChanged) {\n        if (rtl) {\n          changedTask.end = dateByX(\n            newX1,\n            selectedTask.x1,\n            selectedTask.end,\n            xStep,\n            timeStep\n          );\n        } else {\n          changedTask.start = dateByX(\n            newX1,\n            selectedTask.x1,\n            selectedTask.start,\n            xStep,\n            timeStep\n          );\n        }\n        const [progressWidth, progressX] = progressWithByParams(\n          changedTask.x1,\n          changedTask.x2,\n          changedTask.progress,\n          rtl\n        );\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n      break;\n    }\n    case \"end\": {\n      const newX2 = endByX(svgX, xStep, selectedTask);\n      changedTask.x2 = newX2;\n      isChanged = changedTask.x2 !== selectedTask.x2;\n      if (isChanged) {\n        if (rtl) {\n          changedTask.start = dateByX(\n            newX2,\n            selectedTask.x2,\n            selectedTask.start,\n            xStep,\n            timeStep\n          );\n        } else {\n          changedTask.end = dateByX(\n            newX2,\n            selectedTask.x2,\n            selectedTask.end,\n            xStep,\n            timeStep\n          );\n        }\n        const [progressWidth, progressX] = progressWithByParams(\n          changedTask.x1,\n          changedTask.x2,\n          changedTask.progress,\n          rtl\n        );\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n      break;\n    }\n    case \"move\": {\n      const [newMoveX1, newMoveX2] = moveByX(\n        svgX - initEventX1Delta,\n        xStep,\n        selectedTask\n      );\n      isChanged = newMoveX1 !== selectedTask.x1;\n      if (isChanged) {\n        changedTask.start = dateByX(\n          newMoveX1,\n          selectedTask.x1,\n          selectedTask.start,\n          xStep,\n          timeStep\n        );\n        changedTask.end = dateByX(\n          newMoveX2,\n          selectedTask.x2,\n          selectedTask.end,\n          xStep,\n          timeStep\n        );\n        changedTask.x1 = newMoveX1;\n        changedTask.x2 = newMoveX2;\n        const [progressWidth, progressX] = progressWithByParams(\n          changedTask.x1,\n          changedTask.x2,\n          changedTask.progress,\n          rtl\n        );\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n      break;\n    }\n  }\n  return { isChanged, changedTask };\n};\n\nconst handleTaskBySVGMouseEventForMilestone = (\n  svgX: number,\n  action: BarMoveAction,\n  selectedTask: BarTask,\n  xStep: number,\n  timeStep: number,\n  initEventX1Delta: number\n): { isChanged: boolean; changedTask: BarTask } => {\n  const changedTask: BarTask = { ...selectedTask };\n  let isChanged = false;\n  switch (action) {\n    case \"move\": {\n      const [newMoveX1, newMoveX2] = moveByX(\n        svgX - initEventX1Delta,\n        xStep,\n        selectedTask\n      );\n      isChanged = newMoveX1 !== selectedTask.x1;\n      if (isChanged) {\n        changedTask.start = dateByX(\n          newMoveX1,\n          selectedTask.x1,\n          selectedTask.start,\n          xStep,\n          timeStep\n        );\n        changedTask.end = changedTask.start;\n        changedTask.x1 = newMoveX1;\n        changedTask.x2 = newMoveX2;\n      }\n      break;\n    }\n  }\n  return { isChanged, changedTask };\n};\n","import { BarTask } from \"../types/bar-task\";\nimport { Task } from \"../types/public-types\";\n\nexport function isKeyboardEvent(\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\n): event is React.KeyboardEvent {\n  return (event as React.KeyboardEvent).key !== undefined;\n}\n\nexport function isMouseEvent(\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\n): event is React.MouseEvent {\n  return (event as React.MouseEvent).clientX !== undefined;\n}\n\nexport function isBarTask(task: Task | BarTask): task is BarTask {\n  return (task as BarTask).x1 !== undefined;\n}\n\nexport function removeHiddenTasks(tasks: Task[]) {\n  const groupedTasks = tasks.filter(\n    t => t.hideChildren && t.type === \"project\"\n  );\n  if (groupedTasks.length > 0) {\n    for (let i = 0; groupedTasks.length > i; i++) {\n      const groupedTask = groupedTasks[i];\n      const children = getChildren(tasks, groupedTask);\n      tasks = tasks.filter(t => children.indexOf(t) === -1);\n    }\n  }\n  return tasks;\n}\n\nfunction getChildren(taskList: Task[], task: Task) {\n  let tasks: Task[] = [];\n  if (task.type !== \"project\") {\n    tasks = taskList.filter(\n      t => t.dependencies && t.dependencies.indexOf(task.id) !== -1\n    );\n  } else {\n    tasks = taskList.filter(t => t.project && t.project === task.id);\n  }\n  const taskChildren = tasks.reduce(\n    (children: Task[], t) =>\n      children.concat(children, getChildren(taskList, t)),\n    []\n  );\n  tasks = tasks.concat(tasks, taskChildren);\n  return tasks;\n}\n","import React from \"react\";\nimport style from \"./bar.module.css\";\n\ntype BarDisplayProps = {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  isSelected: boolean;\n  /* progress start point */\n  progressX: number;\n  progressWidth: number;\n  barCornerRadius: number;\n  styles: {\n    backgroundColor: string;\n    backgroundSelectedColor: string;\n    progressColor: string;\n    progressSelectedColor: string;\n  };\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\n};\nexport const BarDisplay: React.FC<BarDisplayProps> = ({\n  x,\n  y,\n  width,\n  height,\n  isSelected,\n  progressX,\n  progressWidth,\n  barCornerRadius,\n  styles,\n  onMouseDown,\n}) => {\n  const getProcessColor = () => {\n    return isSelected ? styles.progressSelectedColor : styles.progressColor;\n  };\n\n  const getBarColor = () => {\n    return isSelected ? styles.backgroundSelectedColor : styles.backgroundColor;\n  };\n\n  return (\n    <g onMouseDown={onMouseDown}>\n      <rect\n        x={x}\n        width={width}\n        y={y}\n        height={height}\n        ry={barCornerRadius}\n        rx={barCornerRadius}\n        fill={getBarColor()}\n        className={style.barBackground}\n      />\n      <rect\n        x={progressX}\n        width={progressWidth}\n        y={y}\n        height={height}\n        ry={barCornerRadius}\n        rx={barCornerRadius}\n        fill={getProcessColor()}\n      />\n    </g>\n  );\n};\n","import React from \"react\";\nimport styles from \"./bar.module.css\";\n\ntype BarDateHandleProps = {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  barCornerRadius: number;\n  onMouseDown: (event: React.MouseEvent<SVGRectElement, MouseEvent>) => void;\n};\nexport const BarDateHandle: React.FC<BarDateHandleProps> = ({\n  x,\n  y,\n  width,\n  height,\n  barCornerRadius,\n  onMouseDown,\n}) => {\n  return (\n    <rect\n      x={x}\n      y={y}\n      width={width}\n      height={height}\n      className={styles.barHandle}\n      ry={barCornerRadius}\n      rx={barCornerRadius}\n      onMouseDown={onMouseDown}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./bar.module.css\";\n\ntype BarProgressHandleProps = {\n  progressPoint: string;\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\n};\nexport const BarProgressHandle: React.FC<BarProgressHandleProps> = ({\n  progressPoint,\n  onMouseDown,\n}) => {\n  return (\n    <polygon\n      className={styles.barHandle}\n      points={progressPoint}\n      onMouseDown={onMouseDown}\n    />\n  );\n};\n","import React from \"react\";\nimport { getProgressPoint } from \"../../../helpers/bar-helper\";\nimport { BarDisplay } from \"./bar-display\";\nimport { BarDateHandle } from \"./bar-date-handle\";\nimport { BarProgressHandle } from \"./bar-progress-handle\";\nimport { TaskItemProps } from \"../task-item\";\nimport styles from \"./bar.module.css\";\n\nexport const Bar: React.FC<TaskItemProps> = ({\n  task,\n  isProgressChangeable,\n  isDateChangeable,\n  rtl,\n  onEventStart,\n  isSelected,\n}) => {\n  const progressPoint = getProgressPoint(\n    +!rtl * task.progressWidth + task.progressX,\n    task.y,\n    task.height\n  );\n  const handleHeight = task.height - 2;\n  return (\n    <g className={styles.barWrapper} tabIndex={0}>\n      <BarDisplay\n        x={task.x1}\n        y={task.y}\n        width={task.x2 - task.x1}\n        height={task.height}\n        progressX={task.progressX}\n        progressWidth={task.progressWidth}\n        barCornerRadius={task.barCornerRadius}\n        styles={task.styles}\n        isSelected={isSelected}\n        onMouseDown={e => {\n          isDateChangeable && onEventStart(\"move\", task, e);\n        }}\n      />\n      <g className=\"handleGroup\">\n        {isDateChangeable && (\n          <g>\n            {/* left */}\n            <BarDateHandle\n              x={task.x1 + 1}\n              y={task.y + 1}\n              width={task.handleWidth}\n              height={handleHeight}\n              barCornerRadius={task.barCornerRadius}\n              onMouseDown={e => {\n                onEventStart(\"start\", task, e);\n              }}\n            />\n            {/* right */}\n            <BarDateHandle\n              x={task.x2 - task.handleWidth - 1}\n              y={task.y + 1}\n              width={task.handleWidth}\n              height={handleHeight}\n              barCornerRadius={task.barCornerRadius}\n              onMouseDown={e => {\n                onEventStart(\"end\", task, e);\n              }}\n            />\n          </g>\n        )}\n        {isProgressChangeable && (\n          <BarProgressHandle\n            progressPoint={progressPoint}\n            onMouseDown={e => {\n              onEventStart(\"progress\", task, e);\n            }}\n          />\n        )}\n      </g>\n    </g>\n  );\n};\n","import React from \"react\";\nimport { getProgressPoint } from \"../../../helpers/bar-helper\";\nimport { BarDisplay } from \"./bar-display\";\nimport { BarProgressHandle } from \"./bar-progress-handle\";\nimport { TaskItemProps } from \"../task-item\";\nimport styles from \"./bar.module.css\";\n\nexport const BarSmall: React.FC<TaskItemProps> = ({\n  task,\n  isProgressChangeable,\n  isDateChangeable,\n  onEventStart,\n  isSelected,\n}) => {\n  const progressPoint = getProgressPoint(\n    task.progressWidth + task.x1,\n    task.y,\n    task.height\n  );\n  return (\n    <g className={styles.barWrapper} tabIndex={0}>\n      <BarDisplay\n        x={task.x1}\n        y={task.y}\n        width={task.x2 - task.x1}\n        height={task.height}\n        progressX={task.progressX}\n        progressWidth={task.progressWidth}\n        barCornerRadius={task.barCornerRadius}\n        styles={task.styles}\n        isSelected={isSelected}\n        onMouseDown={e => {\n          isDateChangeable && onEventStart(\"move\", task, e);\n        }}\n      />\n      <g className=\"handleGroup\">\n        {isProgressChangeable && (\n          <BarProgressHandle\n            progressPoint={progressPoint}\n            onMouseDown={e => {\n              onEventStart(\"progress\", task, e);\n            }}\n          />\n        )}\n      </g>\n    </g>\n  );\n};\n","import React from \"react\";\nimport { TaskItemProps } from \"../task-item\";\nimport styles from \"./milestone.module.css\";\n\nexport const Milestone: React.FC<TaskItemProps> = ({\n  task,\n  isDateChangeable,\n  onEventStart,\n  isSelected,\n}) => {\n  const transform = `rotate(45 ${task.x1 + task.height * 0.356} \n    ${task.y + task.height * 0.85})`;\n  const getBarColor = () => {\n    return isSelected\n      ? task.styles.backgroundSelectedColor\n      : task.styles.backgroundColor;\n  };\n\n  return (\n    <g tabIndex={0} className={styles.milestoneWrapper}>\n      <rect\n        fill={getBarColor()}\n        x={task.x1}\n        width={task.height}\n        y={task.y}\n        height={task.height}\n        rx={task.barCornerRadius}\n        ry={task.barCornerRadius}\n        transform={transform}\n        className={styles.milestoneBackground}\n        onMouseDown={e => {\n          isDateChangeable && onEventStart(\"move\", task, e);\n        }}\n      />\n    </g>\n  );\n};\n","import React from \"react\";\nimport { TaskItemProps } from \"../task-item\";\nimport styles from \"./project.module.css\";\n\nexport const Project: React.FC<TaskItemProps> = ({ task, isSelected }) => {\n  const barColor = isSelected\n    ? task.styles.backgroundSelectedColor\n    : task.styles.backgroundColor;\n  const processColor = isSelected\n    ? task.styles.progressSelectedColor\n    : task.styles.progressColor;\n  const projectWith = task.x2 - task.x1;\n\n  // const projectLeftTriangle = [\n  //   task.x1,\n  //   task.y + task.height / 2 - 1,\n  //   task.x1,\n  //   task.y + task.height,\n  //   task.x1 + 15,\n  //   task.y + task.height / 2 - 1,\n  // ].join(\",\");\n  // const projectRightTriangle = [\n  //   task.x2,\n  //   task.y + task.height / 2 - 1,\n  //   task.x2,\n  //   task.y + task.height,\n  //   task.x2 - 15,\n  //   task.y + task.height / 2 - 1,\n  // ].join(\",\");\n\n  return (\n    <g tabIndex={0} className={styles.projectWrapper}>\n      <rect\n        fill={barColor}\n        x={task.x1}\n        width={projectWith}\n        y={task.y}\n        height={task.height}\n        rx={task.barCornerRadius}\n        ry={task.barCornerRadius}\n        className={styles.projectBackground}\n      />\n      <rect\n        x={task.progressX}\n        width={task.progressWidth}\n        y={task.y}\n        height={task.height}\n        ry={task.barCornerRadius}\n        rx={task.barCornerRadius}\n        fill={processColor}\n      />\n      {/* <rect\n        fill={barColor}\n        x={task.x1}\n        width={projectWith}\n        y={task.y}\n        height={task.height / 2}\n        rx={task.barCornerRadius}\n        ry={task.barCornerRadius}\n        className={styles.projectTop}\n      /> */}\n      {/* <polygon\n        className={styles.projectTop}\n        points={projectLeftTriangle}\n        fill={barColor}\n      />\n      <polygon\n        className={styles.projectTop}\n        points={projectRightTriangle}\n        fill={barColor}\n      /> */}\n    </g>\n  );\n};\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { BarTask } from \"../../types/bar-task\";\nimport { GanttContentMoveAction } from \"../../types/gantt-task-actions\";\nimport { Bar } from \"./bar/bar\";\nimport { BarSmall } from \"./bar/bar-small\";\nimport { Milestone } from \"./milestone/milestone\";\nimport { Project } from \"./project/project\";\nimport style from \"./task-list.module.css\";\n\nexport type TaskItemProps = {\n  task: BarTask;\n  arrowIndent: number;\n  taskHeight: number;\n  isProgressChangeable: boolean;\n  isDateChangeable: boolean;\n  isDelete: boolean;\n  isSelected: boolean;\n  rtl: boolean;\n  onEventStart: (\n    action: GanttContentMoveAction,\n    selectedTask: BarTask,\n    event?: React.MouseEvent | React.KeyboardEvent\n  ) => any;\n};\n\nexport const TaskItem: React.FC<TaskItemProps> = props => {\n  const {\n    task,\n    arrowIndent,\n    isDelete,\n    taskHeight,\n    isSelected,\n    rtl,\n    onEventStart,\n  } = {\n    ...props,\n  };\n  const textRef = useRef<SVGTextElement>(null);\n  const [taskItem, setTaskItem] = useState<JSX.Element>(<div />);\n  const [isTextInside, setIsTextInside] = useState(true);\n\n  useEffect(() => {\n    switch (task.typeInternal) {\n      case \"milestone\":\n        setTaskItem(<Milestone {...props} />);\n        break;\n      case \"project\":\n        setTaskItem(<Project {...props} />);\n        break;\n      case \"smalltask\":\n        setTaskItem(<BarSmall {...props} />);\n        break;\n      default:\n        setTaskItem(<Bar {...props} />);\n        break;\n    }\n  }, [task, isSelected]);\n\n  useEffect(() => {\n    if (textRef.current) {\n      setIsTextInside(textRef.current.getBBox().width < task.x2 - task.x1);\n    }\n  }, [textRef, task]);\n\n  const getX = () => {\n    const width = task.x2 - task.x1;\n    const hasChild = task.barChildren.length > 0;\n    if (isTextInside) {\n      return task.x1 + width * 0.5;\n    }\n    if (rtl && textRef.current) {\n      return (\n        task.x1 -\n        textRef.current.getBBox().width -\n        arrowIndent * +hasChild -\n        arrowIndent * 0.2\n      );\n    } else {\n      return task.x1 + width + arrowIndent * +hasChild + arrowIndent * 0.2;\n    }\n  };\n\n  return (\n    <g\n      onKeyDown={e => {\n        switch (e.key) {\n          case \"Delete\": {\n            if (isDelete) onEventStart(\"delete\", task, e);\n            break;\n          }\n        }\n        e.stopPropagation();\n      }}\n      onMouseEnter={e => {\n        onEventStart(\"mouseenter\", task, e);\n      }}\n      onMouseLeave={e => {\n        onEventStart(\"mouseleave\", task, e);\n      }}\n      onDoubleClick={e => {\n        onEventStart(\"dblclick\", task, e);\n      }}\n      onFocus={() => {\n        onEventStart(\"select\", task);\n      }}\n    >\n      {taskItem}\n      <text\n        x={getX()}\n        y={task.y + taskHeight * 0.5}\n        className={\n          isTextInside\n            ? style.barLabel\n            : style.barLabel && style.barLabelOutside\n        }\n        ref={textRef}\n      >\n        {task.name}\n      </text>\n    </g>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { EventOption } from \"../../types/public-types\";\nimport { BarTask } from \"../../types/bar-task\";\nimport { Arrow } from \"../other/arrow\";\nimport { handleTaskBySVGMouseEvent } from \"../../helpers/bar-helper\";\nimport { isKeyboardEvent } from \"../../helpers/other-helper\";\nimport { TaskItem } from \"../task-item/task-item\";\nimport {\n  BarMoveAction,\n  GanttContentMoveAction,\n  GanttEvent,\n} from \"../../types/gantt-task-actions\";\n\nexport type TaskGanttContentProps = {\n  tasks: BarTask[];\n  dates: Date[];\n  ganttEvent: GanttEvent;\n  selectedTask: BarTask | undefined;\n  rowHeight: number;\n  columnWidth: number;\n  timeStep: number;\n  svg?: React.RefObject<SVGSVGElement>;\n  svgWidth: number;\n  taskHeight: number;\n  arrowColor: string;\n  arrowIndent: number;\n  fontSize: string;\n  fontFamily: string;\n  rtl: boolean;\n  setGanttEvent: (value: GanttEvent) => void;\n  setFailedTask: (value: BarTask | null) => void;\n  setSelectedTask: (taskId: string) => void;\n} & EventOption;\n\nexport const TaskGanttContent: React.FC<TaskGanttContentProps> = ({\n  tasks,\n  dates,\n  ganttEvent,\n  selectedTask,\n  rowHeight,\n  columnWidth,\n  timeStep,\n  svg,\n  taskHeight,\n  arrowColor,\n  arrowIndent,\n  fontFamily,\n  fontSize,\n  rtl,\n  setGanttEvent,\n  setFailedTask,\n  setSelectedTask,\n  onDateChange,\n  onProgressChange,\n  onDoubleClick,\n  onDelete,\n}) => {\n  const point = svg?.current?.createSVGPoint();\n  const [xStep, setXStep] = useState(0);\n  const [initEventX1Delta, setInitEventX1Delta] = useState(0);\n  const [isMoving, setIsMoving] = useState(false);\n\n  // create xStep\n  useEffect(() => {\n    const dateDelta =\n      dates[1].getTime() -\n      dates[0].getTime() -\n      dates[1].getTimezoneOffset() * 60 * 1000 +\n      dates[0].getTimezoneOffset() * 60 * 1000;\n    const newXStep = (timeStep * columnWidth) / dateDelta;\n    setXStep(newXStep);\n  }, [columnWidth, dates, timeStep]);\n\n  useEffect(() => {\n    const handleMouseMove = async (event: MouseEvent) => {\n      if (!ganttEvent.changedTask || !point || !svg?.current) return;\n      event.preventDefault();\n\n      point.x = event.clientX;\n      const cursor = point.matrixTransform(\n        svg?.current.getScreenCTM()?.inverse()\n      );\n\n      const { isChanged, changedTask } = handleTaskBySVGMouseEvent(\n        cursor.x,\n        ganttEvent.action as BarMoveAction,\n        ganttEvent.changedTask,\n        xStep,\n        timeStep,\n        initEventX1Delta,\n        rtl\n      );\n      if (isChanged) {\n        setGanttEvent({ action: ganttEvent.action, changedTask });\n      }\n    };\n\n    const handleMouseUp = async (event: MouseEvent) => {\n      const { action, originalSelectedTask, changedTask } = ganttEvent;\n      if (!changedTask || !point || !svg?.current || !originalSelectedTask)\n        return;\n      event.preventDefault();\n\n      point.x = event.clientX;\n      const cursor = point.matrixTransform(\n        svg?.current.getScreenCTM()?.inverse()\n      );\n      const { changedTask: newChangedTask } = handleTaskBySVGMouseEvent(\n        cursor.x,\n        action as BarMoveAction,\n        changedTask,\n        xStep,\n        timeStep,\n        initEventX1Delta,\n        rtl\n      );\n\n      const isNotLikeOriginal =\n        originalSelectedTask.start !== newChangedTask.start ||\n        originalSelectedTask.end !== newChangedTask.end ||\n        originalSelectedTask.progress !== newChangedTask.progress;\n\n      // remove listeners\n      svg.current.removeEventListener(\"mousemove\", handleMouseMove);\n      svg.current.removeEventListener(\"mouseup\", handleMouseUp);\n      setGanttEvent({ action: \"\" });\n      setIsMoving(false);\n\n      // custom operation start\n      let operationSuccess = true;\n      if (\n        (action === \"move\" || action === \"end\" || action === \"start\") &&\n        onDateChange &&\n        isNotLikeOriginal\n      ) {\n        try {\n          const result = await onDateChange(\n            newChangedTask,\n            newChangedTask.barChildren\n          );\n          if (result !== undefined) {\n            operationSuccess = result;\n          }\n        } catch (error) {\n          operationSuccess = false;\n        }\n      } else if (onProgressChange && isNotLikeOriginal) {\n        try {\n          const result = await onProgressChange(\n            newChangedTask,\n            newChangedTask.barChildren\n          );\n          if (result !== undefined) {\n            operationSuccess = result;\n          }\n        } catch (error) {\n          operationSuccess = false;\n        }\n      }\n\n      // If operation is failed - return old state\n      if (!operationSuccess) {\n        setFailedTask(originalSelectedTask);\n      }\n    };\n\n    if (\n      !isMoving &&\n      (ganttEvent.action === \"move\" ||\n        ganttEvent.action === \"end\" ||\n        ganttEvent.action === \"start\" ||\n        ganttEvent.action === \"progress\") &&\n      svg?.current\n    ) {\n      svg.current.addEventListener(\"mousemove\", handleMouseMove);\n      svg.current.addEventListener(\"mouseup\", handleMouseUp);\n      setIsMoving(true);\n    }\n  }, [\n    ganttEvent,\n    xStep,\n    initEventX1Delta,\n    onProgressChange,\n    timeStep,\n    onDateChange,\n    svg,\n    isMoving,\n  ]);\n\n  /**\n   * Method is Start point of task change\n   */\n  const handleBarEventStart = async (\n    action: GanttContentMoveAction,\n    task: BarTask,\n    event?: React.MouseEvent | React.KeyboardEvent\n  ) => {\n    if (!event) {\n      if (action === \"select\") {\n        setSelectedTask(task.id);\n      }\n    }\n    // Keyboard events\n    else if (isKeyboardEvent(event)) {\n      if (action === \"delete\") {\n        if (onDelete) {\n          try {\n            const result = await onDelete(task);\n            if (result !== undefined && result) {\n              setGanttEvent({ action, changedTask: task });\n            }\n          } catch (error) {\n            console.error(\"Error on Delete. \" + error);\n          }\n        }\n      }\n    }\n    // Mouse Events\n    else if (action === \"mouseenter\") {\n      if (!ganttEvent.action) {\n        setGanttEvent({\n          action,\n          changedTask: task,\n          originalSelectedTask: task,\n        });\n      }\n    } else if (action === \"mouseleave\") {\n      if (ganttEvent.action === \"mouseenter\") {\n        setGanttEvent({ action: \"\" });\n      }\n    } else if (action === \"dblclick\") {\n      !!onDoubleClick && onDoubleClick(task);\n    }\n    // Change task event start\n    else if (action === \"move\") {\n      if (!svg?.current || !point) return;\n      point.x = event.clientX;\n      const cursor = point.matrixTransform(\n        svg.current.getScreenCTM()?.inverse()\n      );\n      setInitEventX1Delta(cursor.x - task.x1);\n      setGanttEvent({\n        action,\n        changedTask: task,\n        originalSelectedTask: task,\n      });\n    } else {\n      setGanttEvent({\n        action,\n        changedTask: task,\n        originalSelectedTask: task,\n      });\n    }\n  };\n\n  return (\n    <g className=\"content\">\n      <g className=\"arrows\" fill={arrowColor} stroke={arrowColor}>\n        {tasks.map(task => {\n          return task.barChildren.map(child => {\n            return (\n              <Arrow\n                key={`Arrow from ${task.id} to ${tasks[child.index].id}`}\n                taskFrom={task}\n                taskTo={tasks[child.index]}\n                rowHeight={rowHeight}\n                taskHeight={taskHeight}\n                arrowIndent={arrowIndent}\n                rtl={rtl}\n              />\n            );\n          });\n        })}\n      </g>\n      <g className=\"bar\" fontFamily={fontFamily} fontSize={fontSize}>\n        {tasks.map(task => {\n          return (\n            <TaskItem\n              task={task}\n              arrowIndent={arrowIndent}\n              taskHeight={taskHeight}\n              isProgressChangeable={!!onProgressChange && !task.isDisabled}\n              isDateChangeable={!!onDateChange && !task.isDisabled}\n              isDelete={!task.isDisabled}\n              onEventStart={handleBarEventStart}\n              key={task.id}\n              isSelected={!!selectedTask && task.id === selectedTask.id}\n              rtl={rtl}\n            />\n          );\n        })}\n      </g>\n    </g>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { GridProps, Grid } from \"../grid/grid\";\nimport { CalendarProps, Calendar } from \"../calendar/calendar\";\nimport { TaskGanttContentProps, TaskGanttContent } from \"./task-gantt-content\";\nimport styles from \"./gantt.module.css\";\n\nexport type TaskGanttProps = {\n  gridProps: GridProps;\n  calendarProps: CalendarProps;\n  barProps: TaskGanttContentProps;\n  ganttHeight: number;\n  scrollY: number;\n  scrollX: number;\n};\nexport const TaskGantt: React.FC<TaskGanttProps> = ({\n  gridProps,\n  calendarProps,\n  barProps,\n  ganttHeight,\n  scrollY,\n  scrollX,\n}) => {\n  const ganttSVGRef = useRef<SVGSVGElement>(null);\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\n  const verticalGanttContainerRef = useRef<HTMLDivElement>(null);\n  const newBarProps = { ...barProps, svg: ganttSVGRef };\n\n  useEffect(() => {\n    if (horizontalContainerRef.current) {\n      horizontalContainerRef.current.scrollTop = scrollY;\n    }\n  }, [scrollY]);\n\n  useEffect(() => {\n    if (verticalGanttContainerRef.current) {\n      verticalGanttContainerRef.current.scrollLeft = scrollX;\n    }\n  }, [scrollX]);\n\n  return (\n    <div\n      className={styles.ganttVerticalContainer}\n      ref={verticalGanttContainerRef}\n      dir=\"ltr\"\n    >\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width={gridProps.svgWidth}\n        height={calendarProps.headerHeight}\n        fontFamily={barProps.fontFamily}\n      >\n        <Calendar {...calendarProps} />\n      </svg>\n      <div\n        ref={horizontalContainerRef}\n        className={styles.horizontalContainer}\n        style={\n          ganttHeight\n            ? { height: ganttHeight, width: gridProps.svgWidth }\n            : { width: gridProps.svgWidth }\n        }\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width={gridProps.svgWidth}\n          height={barProps.rowHeight * barProps.tasks.length}\n          fontFamily={barProps.fontFamily}\n          ref={ganttSVGRef}\n        >\n          <Grid {...gridProps} />\n          <TaskGanttContent {...newBarProps} />\n        </svg>\n      </div>\n    </div>\n  );\n};\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\nimport styles from \"./horizontal-scroll.module.css\";\n\nexport const HorizontalScroll: React.FC<{\n  scroll: number;\n  svgWidth: number;\n  taskListWidth: number;\n  rtl: boolean;\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\n}> = ({ scroll, svgWidth, taskListWidth, rtl, onScroll }) => {\n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollLeft = scroll;\n    }\n  }, [scroll]);\n\n  return (\n    <div\n      dir=\"ltr\"\n      style={{\n        margin: rtl\n          ? `0px ${taskListWidth}px 0px 0px`\n          : `0px 0px 0px ${taskListWidth}px`,\n      }}\n      className={styles.scroll}\n      onScroll={onScroll}\n      ref={scrollRef}\n    >\n      <div style={{ width: svgWidth, height: 1 }} />\n    </div>\n  );\n};\n","import React, { useState, SyntheticEvent, useRef, useEffect } from \"react\";\nimport { ViewMode, GanttProps, Task } from \"../../types/public-types\";\nimport { GridProps } from \"../grid/grid\";\nimport { ganttDateRange, seedDates } from \"../../helpers/date-helper\";\nimport { CalendarProps } from \"../calendar/calendar\";\nimport { TaskGanttContentProps } from \"./task-gantt-content\";\nimport { TaskListHeaderDefault } from \"../task-list/task-list-header\";\nimport { TaskListTableDefault } from \"../task-list/task-list-table\";\nimport { StandardTooltipContent, Tooltip } from \"../other/tooltip\";\nimport { VerticalScroll } from \"../other/vertical-scroll\";\nimport { TaskListProps, TaskList } from \"../task-list/task-list\";\nimport { TaskGantt } from \"./task-gantt\";\nimport { BarTask } from \"../../types/bar-task\";\nimport { convertToBarTasks } from \"../../helpers/bar-helper\";\nimport { GanttEvent } from \"../../types/gantt-task-actions\";\nimport { DateSetup } from \"../../types/date-setup\";\nimport styles from \"./gantt.module.css\";\nimport { HorizontalScroll } from \"../other/horizontal-scroll\";\nimport { removeHiddenTasks } from \"../../helpers/other-helper\";\n\nexport const Gantt: React.FunctionComponent<GanttProps> = ({\n  tasks,\n  headerHeight = 50,\n  columnWidth = 60,\n  listCellWidth = \"150px\",\n  rowHeight = 35,\n  ganttHeight = 0,\n  hideDates = false,\n  viewMode = ViewMode.Month,\n  locale = \"en-GB\",\n  barFill = 70,\n  barCornerRadius = 12,\n  barProgressColor = \"#fafbfc\", // Value of interest, \"#a3a3ff\"\n  barProgressSelectedColor = \"#8282f5\", // purple\n  barBackgroundColor = \"#fafbfc\", \n  barBackgroundSelectedColor = \"fafbfc\", //#233044\",\n  projectProgressColor = \"#04db8c\", // Value of Interest; Project progress, \"#004dc9\"\n  projectProgressSelectedColor = \"#04db8c\",  //green // Change both \"projectProgressColor\" and \"projectProgressSelectedColor\" to reflect change properly.\n\n  projectBackgroundColor = \"#d5d7db\",  // Value of interest; Controls remaining, and top of project bar\n  projectBackgroundSelectedColor = \"#d5d7db\",\n  milestoneBackgroundColor = \"#f1c453\",\n  milestoneBackgroundSelectedColor = \"#f29e4c\",\n  rtl = false,\n  handleWidth = 10,\n  timeStep = 3000, //300000\n  arrowColor = \"#233044\",\n  fontFamily = \"Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue\",\n  fontSize = \"14px\",\n  arrowIndent = 10,\n  todayColor = \"rgba(252, 248, 227, 0.5)\",\n  TooltipContent = StandardTooltipContent,\n  TaskListHeader = TaskListHeaderDefault,\n  TaskListTable = TaskListTableDefault,\n  onDateChange,\n  onProgressChange,\n  onDoubleClick,\n  onDelete,\n  onSelect,\n  onExpanderClick,\n}) => {\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const taskListRef = useRef<HTMLDivElement>(null);\n  const [dateSetup, setDateSetup] = useState<DateSetup>(() => {\n    const [startDate, endDate] = ganttDateRange(tasks, viewMode);\n    return { viewMode, dates: seedDates(startDate, endDate, viewMode) };\n  });\n\n  const [taskHeight, setTaskHeight] = useState((rowHeight * barFill) / 100);\n  const [taskListWidth, setTaskListWidth] = useState(0);\n  const [svgContainerWidth, setSvgContainerWidth] = useState(0);\n  const [svgContainerHeight, setSvgContainerHeight] = useState(ganttHeight);\n  const [barTasks, setBarTasks] = useState<BarTask[]>([]);\n  const [ganttEvent, setGanttEvent] = useState<GanttEvent>({\n    action: \"\",\n  });\n\n  const [selectedTask, setSelectedTask] = useState<BarTask>();\n  const [failedTask, setFailedTask] = useState<BarTask | null>(null);\n\n  const svgWidth = dateSetup.dates.length * columnWidth;\n  const ganttFullHeight = barTasks.length * rowHeight;\n\n  const [scrollY, setScrollY] = useState(0);\n  const [scrollX, setScrollX] = useState(-1);\n  const [ignoreScrollEvent, setIgnoreScrollEvent] = useState(false);\n\n  // task change events\n  useEffect(() => {\n    let filteredTasks: Task[];\n    if (onExpanderClick) {\n      filteredTasks = removeHiddenTasks(tasks);\n    } else {\n      filteredTasks = tasks;\n    }\n    const [startDate, endDate] = ganttDateRange(filteredTasks, viewMode);\n    let newDates = seedDates(startDate, endDate, viewMode);\n    if (rtl) {\n      newDates = newDates.reverse();\n      if (scrollX === -1) {\n        setScrollX(newDates.length * columnWidth);\n      }\n    }\n    setDateSetup({ dates: newDates, viewMode });\n    setBarTasks(\n      convertToBarTasks(\n        filteredTasks,\n        newDates,\n        columnWidth,\n        rowHeight,\n        taskHeight,\n        barCornerRadius,\n        handleWidth,\n        rtl,\n        barProgressColor,\n        barProgressSelectedColor,\n        barBackgroundColor,\n        barBackgroundSelectedColor,\n        projectProgressColor,\n        projectProgressSelectedColor,\n        projectBackgroundColor,\n        projectBackgroundSelectedColor,\n        milestoneBackgroundColor,\n        milestoneBackgroundSelectedColor\n      )\n    );\n  }, [\n    tasks,\n    viewMode,\n    rowHeight,\n    barCornerRadius,\n    columnWidth,\n    taskHeight,\n    handleWidth,\n    barProgressColor,\n    barProgressSelectedColor,\n    barBackgroundColor,\n    barBackgroundSelectedColor,\n    projectProgressColor,\n    projectProgressSelectedColor,\n    projectBackgroundColor,\n    projectBackgroundSelectedColor,\n    milestoneBackgroundColor,\n    milestoneBackgroundSelectedColor,\n    rtl,\n    scrollX,\n    onExpanderClick,\n  ]);\n\n  useEffect(() => {\n    const { changedTask, action } = ganttEvent;\n    if (changedTask) {\n      if (action === \"delete\") {\n        setGanttEvent({ action: \"\" });\n        setBarTasks(barTasks.filter(t => t.id !== changedTask.id));\n      } else if (\n        action === \"move\" ||\n        action === \"end\" ||\n        action === \"start\" ||\n        action === \"progress\"\n      ) {\n        const prevStateTask = barTasks.find(t => t.id === changedTask.id);\n        if (\n          prevStateTask &&\n          (prevStateTask.start.getTime() !== changedTask.start.getTime() ||\n            prevStateTask.end.getTime() !== changedTask.end.getTime() ||\n            prevStateTask.progress !== changedTask.progress)\n        ) {\n          // actions for change\n          const newTaskList = barTasks.map(t =>\n            t.id === changedTask.id ? changedTask : t\n          );\n          setBarTasks(newTaskList);\n        }\n      }\n    }\n  }, [ganttEvent, barTasks]);\n\n  useEffect(() => {\n    if (failedTask) {\n      setBarTasks(barTasks.map(t => (t.id !== failedTask.id ? t : failedTask)));\n      setFailedTask(null);\n    }\n  }, [failedTask, barTasks]);\n\n  useEffect(() => {\n    const newTaskHeight = (rowHeight * barFill) / 100;\n    if (newTaskHeight !== taskHeight) {\n      setTaskHeight(newTaskHeight);\n    }\n  }, [rowHeight, barFill, taskHeight]);\n\n  useEffect(() => {\n    if (!listCellWidth) {\n      setTaskListWidth(0);\n    }\n    if (taskListRef.current) {\n      setTaskListWidth(taskListRef.current.offsetWidth);\n    }\n  }, [taskListRef, listCellWidth]);\n\n  useEffect(() => {\n    if (wrapperRef.current) {\n      setSvgContainerWidth(wrapperRef.current.offsetWidth - taskListWidth);\n    }\n  }, [wrapperRef, taskListWidth]);\n\n  useEffect(() => {\n    if (ganttHeight) {\n      setSvgContainerHeight(ganttHeight + headerHeight);\n    } else {\n      setSvgContainerHeight(tasks.length * rowHeight + headerHeight);\n    }\n  }, [ganttHeight, tasks]);\n\n  // scroll events\n  useEffect(() => {\n    const handleWheel = (event: WheelEvent) => {\n      if (event.shiftKey || event.deltaX) {\n        const scrollMove = event.deltaX ? event.deltaX : event.deltaY;\n        let newScrollX = scrollX + scrollMove;\n        if (newScrollX < 0) {\n          newScrollX = 0;\n        } else if (newScrollX > svgWidth) {\n          newScrollX = svgWidth;\n        }\n        setScrollX(newScrollX);\n        event.preventDefault();\n      } else if (ganttHeight) {\n        let newScrollY = scrollY + event.deltaY;\n        if (newScrollY < 0) {\n          newScrollY = 0;\n        } else if (newScrollY > ganttFullHeight - ganttHeight) {\n          newScrollY = ganttFullHeight - ganttHeight;\n        }\n        if (newScrollY !== scrollY) {\n          setScrollY(newScrollY);\n          event.preventDefault();\n        }\n      }\n\n      setIgnoreScrollEvent(true);\n    };\n\n    // subscribe if scroll is necessary\n    if (wrapperRef.current) {\n      wrapperRef.current.addEventListener(\"wheel\", handleWheel, {\n        passive: false,\n      });\n    }\n    return () => {\n      if (wrapperRef.current) {\n        wrapperRef.current.removeEventListener(\"wheel\", handleWheel);\n      }\n    };\n  }, [wrapperRef.current, scrollY, scrollX, ganttHeight, svgWidth, rtl]);\n\n  const handleScrollY = (event: SyntheticEvent<HTMLDivElement>) => {\n    if (scrollY !== event.currentTarget.scrollTop && !ignoreScrollEvent) {\n      setScrollY(event.currentTarget.scrollTop);\n    }\n    setIgnoreScrollEvent(false);\n  };\n\n  const handleScrollX = (event: SyntheticEvent<HTMLDivElement>) => {\n    if (scrollX !== event.currentTarget.scrollLeft && !ignoreScrollEvent) {\n      setScrollX(event.currentTarget.scrollLeft);\n    }\n    setIgnoreScrollEvent(false);\n  };\n\n  /**\n   * Handles arrow keys events and transform it to new scroll\n   */\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n    event.preventDefault();\n    let newScrollY = scrollY;\n    let newScrollX = scrollX;\n    let isX = true;\n    switch (event.key) {\n      case \"Down\": // IE/Edge specific value\n      case \"ArrowDown\":\n        newScrollY += rowHeight;\n        isX = false;\n        break;\n      case \"Up\": // IE/Edge specific value\n      case \"ArrowUp\":\n        newScrollY -= rowHeight;\n        isX = false;\n        break;\n      case \"Left\":\n      case \"ArrowLeft\":\n        newScrollX -= columnWidth;\n        break;\n      case \"Right\": // IE/Edge specific value\n      case \"ArrowRight\":\n        newScrollX += columnWidth;\n        break;\n    }\n    if (isX) {\n      if (newScrollX < 0) {\n        newScrollX = 0;\n      } else if (newScrollX > svgWidth) {\n        newScrollX = svgWidth;\n      }\n      setScrollX(newScrollX);\n    } else {\n      if (newScrollY < 0) {\n        newScrollY = 0;\n      } else if (newScrollY > ganttFullHeight - ganttHeight) {\n        newScrollY = ganttFullHeight - ganttHeight;\n      }\n      setScrollY(newScrollY);\n    }\n    setIgnoreScrollEvent(true);\n  };\n\n  /**\n   * Task select event\n   */\n  const handleSelectedTask = (taskId: string) => {\n    const newSelectedTask = barTasks.find(t => t.id === taskId);\n    const oldSelectedTask = barTasks.find(\n      t => !!selectedTask && t.id === selectedTask.id\n    );\n    if (onSelect) {\n      if (oldSelectedTask) {\n        onSelect(oldSelectedTask, false);\n      }\n      if (newSelectedTask) {\n        onSelect(newSelectedTask, true);\n      }\n    }\n    setSelectedTask(newSelectedTask);\n  };\n  const handleExpanderClick = (task: Task) => {\n    if (onExpanderClick && task.hideChildren !== undefined) {\n      onExpanderClick({ ...task, hideChildren: !task.hideChildren });\n    }\n  };\n  const gridProps: GridProps = {\n    columnWidth,\n    svgWidth,\n    tasks: tasks,\n    rowHeight,\n    dates: dateSetup.dates,\n    todayColor,\n    rtl,\n  };\n  \n  const calendarProps: CalendarProps = {\n    dateSetup,\n    locale,\n    viewMode,\n    headerHeight,\n    columnWidth,\n    fontFamily,\n    fontSize,\n    rtl,\n  };\n  const barProps: TaskGanttContentProps = {\n    tasks: barTasks,\n    dates: dateSetup.dates,\n    ganttEvent,\n    selectedTask,\n    rowHeight,\n    taskHeight,\n    columnWidth,\n    arrowColor,\n    timeStep,\n    fontFamily,\n    fontSize,\n    arrowIndent,\n    svgWidth,\n    rtl,\n    setGanttEvent,\n    setFailedTask,\n    setSelectedTask: handleSelectedTask,\n    onDateChange,\n    onProgressChange,\n    onDoubleClick,\n    onDelete,\n  };\n\n  const tableProps: TaskListProps = {\n    rowHeight,\n    rowWidth: listCellWidth,\n    fontFamily,\n    fontSize,\n    hideDates,\n    tasks: barTasks,\n    locale,\n    headerHeight,\n    scrollY,\n    ganttHeight,\n    horizontalContainerClass: styles.horizontalContainer,\n    selectedTask,\n    taskListRef,\n    setSelectedTask: handleSelectedTask,\n    onExpanderClick: handleExpanderClick,\n    TaskListHeader,\n    TaskListTable\n  };\n  return (\n    <div>\n      <div\n        className={styles.wrapper}\n        onKeyDown={handleKeyDown}\n        tabIndex={0}\n        ref={wrapperRef}\n      >\n        <TaskList {...tableProps} />\n        <TaskGantt\n          gridProps={gridProps}\n          calendarProps={calendarProps}\n          barProps={barProps}\n          ganttHeight={ganttHeight}\n          scrollY={scrollY}\n          scrollX={scrollX}\n        />\n        {ganttEvent.changedTask && (\n          <Tooltip\n            arrowIndent={arrowIndent}\n            rowHeight={rowHeight}\n            svgContainerHeight={svgContainerHeight}\n            svgContainerWidth={svgContainerWidth}\n            fontFamily={fontFamily}\n            fontSize={fontSize}\n            scrollX={scrollX}\n            scrollY={scrollY}\n            task={ganttEvent.changedTask}\n            headerHeight={headerHeight}\n            taskListWidth={taskListWidth}\n            TooltipContent={TooltipContent}\n            rtl={rtl}\n            svgWidth={svgWidth}\n          />\n        )}\n        <VerticalScroll\n          ganttFullHeight={ganttFullHeight}\n          ganttHeight={ganttHeight}\n          headerHeight={headerHeight}\n          scroll={scrollY}\n          onScroll={handleScrollY}\n          rtl={rtl}\n        />\n      </div>\n      <HorizontalScroll\n        svgWidth={svgWidth}\n        taskListWidth={taskListWidth}\n        scroll={scrollX}\n        rtl={rtl}\n        onScroll={handleScrollX}\n      />\n    </div>\n  );\n};\n"],"names":["ViewMode","intlDTCache","getCachedDateTimeFormat","locString","opts","key","JSON","stringify","dtf","Intl","DateTimeFormat","addToDate","date","quantity","scale","newDate","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","startOfDate","scores","shouldReset","_scale","maxScore","indexOf","ganttDateRange","tasks","viewMode","newStartDate","start","newEndDate","task","end","Month","Week","getMonday","Day","QuarterDay","HalfDay","seedDates","startDate","endDate","currentDate","dates","push","getLocaleMonth","locale","bottomValue","month","format","replace","toLocaleUpperCase","day","getDay","diff","setDate","getWeekNumberISO8601","tmpDate","valueOf","dayNumber","firstThursday","setMonth","weekNumber","Math","ceil","toString","length","getDaysInMonth","year","TaskListHeaderDefault","headerHeight","hideDates","fontFamily","fontSize","rowWidth","React","className","styles","ganttTable","style","ganttTable_Header","height","ganttTable_HeaderItem","minWidth","ganttTable_HeaderSeparator","marginTop","Fragment","localeDateStringCache","toLocaleDateStringFactory","dateTimeOptions","lds","toLocaleDateString","weekday","TaskListTableDefault","rowHeight","onExpanderClick","useMemo","taskListWrapper","map","t","expanderSymbol","hideChildren","taskListTableRow","id","taskListCell","maxWidth","title","name","taskListNameWrapper","taskListExpander","taskListEmptyExpander","onClick","Tooltip","rtl","svgContainerHeight","svgContainerWidth","scrollX","scrollY","arrowIndent","taskListWidth","TooltipContent","tooltipRef","useRef","relatedY","setRelatedY","useState","relatedX","setRelatedX","useEffect","current","tooltipHeight","offsetHeight","tooltipWidth","offsetWidth","newRelatedY","index","newRelatedX","x1","x2","tooltipLeftmostPoint","fullChartWidth","tooltipLowerPoint","ref","tooltipDetailsContainer","tooltipDetailsContainerHidden","left","top","StandardTooltipContent","tooltipDefaultContainer","getTime","tooltipDefaultContainerParagraph","progress","VerticalScroll","scroll","ganttHeight","ganttFullHeight","onScroll","scrollRef","scrollTop","marginLeft","width","TaskList","selectedTask","setSelectedTask","taskListRef","horizontalContainerClass","TaskListHeader","TaskListTable","horizontalContainerRef","headerProps","selectedTaskId","tableProps","GridBody","svgWidth","columnWidth","todayColor","y","gridRows","rowLines","x","y1","y2","gridRowLine","gridRow","now","tickX","ticks","today","i","gridTick","fill","Grid","props","TopPartOfCalendar","value","x1Line","y1Line","y2Line","xText","yText","calendarTopTick","calendarTopText","Calendar","dateSetup","getCalendarValuesForMonth","topValues","bottomValues","topDefaultHeight","calendarBottomText","topValue","getCalendarValuesForWeek","weeksCount","getCalendarValuesForDay","getCalendarValuesForOther","hour","calendarHeader","Arrow","taskFrom","taskTo","taskHeight","path","trianglePoints","drownPathAndTriangleRTL","drownPathAndTriangle","strokeWidth","d","points","indexCompare","taskToEndPosition","taskFromEndPosition","taskFromHorizontalOffsetValue","taskToHorizontalOffsetValue","convertToBarTasks","barCornerRadius","handleWidth","barProgressColor","barProgressSelectedColor","barBackgroundColor","barBackgroundSelectedColor","projectProgressColor","projectProgressSelectedColor","projectBackgroundColor","projectBackgroundSelectedColor","milestoneBackgroundColor","milestoneBackgroundSelectedColor","dateDelta","getTimezoneOffset","barTasks","convertToBarTask","dependencies","j","dependence","findIndex","barChildren","barTask","type","convertToMilestone","convertToBar","taskXCoordinateRTL","taskXCoordinate","typeInternal","progressWidth","progressX","progressWithByParams","taskYCoordinate","undefined","backgroundColor","backgroundSelectedColor","progressColor","progressSelectedColor","rotatedHeight","xDate","round","taskX1","taskX2","progressByX","barWidth","progressPercent","progressByXRTL","getProgressPoint","taskY","point","join","startByX","xStep","steps","additionalXValue","newX","endByX","moveByX","newX1","newX2","dateByX","taskX","taskDate","timeStep","handleTaskBySVGMouseEvent","svgX","action","initEventX1Delta","result","handleTaskBySVGMouseEventForMilestone","handleTaskBySVGMouseEventForBar","changedTask","isChanged","newMoveX1","newMoveX2","isKeyboardEvent","event","removeHiddenTasks","groupedTasks","filter","groupedTask","children","getChildren","taskList","project","taskChildren","reduce","concat","BarDisplay","isSelected","onMouseDown","getProcessColor","getBarColor","ry","rx","barBackground","BarDateHandle","barHandle","BarProgressHandle","progressPoint","Bar","isProgressChangeable","isDateChangeable","onEventStart","handleHeight","barWrapper","tabIndex","e","BarSmall","Milestone","transform","milestoneWrapper","milestoneBackground","Project","barColor","processColor","projectWith","projectWrapper","projectBackground","TaskItem","isDelete","textRef","taskItem","setTaskItem","isTextInside","setIsTextInside","getBBox","getX","hasChild","onKeyDown","stopPropagation","onMouseEnter","onMouseLeave","onDoubleClick","onFocus","barLabel","barLabelOutside","TaskGanttContent","ganttEvent","svg","arrowColor","setGanttEvent","setFailedTask","onDateChange","onProgressChange","onDelete","createSVGPoint","setXStep","setInitEventX1Delta","isMoving","setIsMoving","newXStep","handleMouseMove","preventDefault","clientX","cursor","matrixTransform","getScreenCTM","inverse","handleMouseUp","originalSelectedTask","newChangedTask","isNotLikeOriginal","removeEventListener","operationSuccess","error","addEventListener","handleBarEventStart","console","stroke","child","isDisabled","TaskGantt","gridProps","calendarProps","barProps","ganttSVGRef","verticalGanttContainerRef","newBarProps","scrollLeft","ganttVerticalContainer","dir","xmlns","horizontalContainer","HorizontalScroll","margin","Gantt","listCellWidth","barFill","onSelect","wrapperRef","setDateSetup","setTaskHeight","setTaskListWidth","setSvgContainerWidth","setSvgContainerHeight","setBarTasks","failedTask","setScrollY","setScrollX","ignoreScrollEvent","setIgnoreScrollEvent","filteredTasks","newDates","reverse","prevStateTask","find","newTaskList","newTaskHeight","handleWheel","shiftKey","deltaX","scrollMove","deltaY","newScrollX","newScrollY","passive","handleScrollY","currentTarget","handleScrollX","handleKeyDown","isX","handleSelectedTask","taskId","newSelectedTask","oldSelectedTask","handleExpanderClick","wrapper"],"mappings":";;IAAYA;;AAAZ,WAAYA;AACVA,EAAAA,sBAAA,gBAAA;AACAA,EAAAA,mBAAA,aAAA;AACAA,EAAAA,eAAA,QAAA;AAEAA,EAAAA,gBAAA,SAAA;AACAA,EAAAA,iBAAA,UAAA;AACD,CAPD,EAAYA,QAAQ,KAARA,QAAQ,KAAA,CAApB;;ACaA,MAAMC,WAAW,GAAG,EAApB;AACA,AAAO,MAAMC,uBAAuB,GAAG,CACrCC,SADqC,EAErCC,OAA8B,EAFO;AAIrC,QAAMC,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAe,CAACJ,SAAD,EAAYC,IAAZ,CAAf,CAAZ;AACA,MAAII,GAAG,GAAGP,WAAW,CAACI,GAAD,CAArB;;AACA,MAAI,CAACG,GAAL,EAAU;AACRA,IAAAA,GAAG,GAAG,IAAIC,IAAI,CAACC,cAAT,CAAwBP,SAAxB,EAAmCC,IAAnC,CAAN;AACAH,IAAAA,WAAW,CAACI,GAAD,CAAX,GAAmBG,GAAnB;AACD;;AACD,SAAOA,GAAP;AACD,CAXM;AAcP,AAAO,MAAMG,SAAS,GAAG,CACvBC,IADuB,EAEvBC,QAFuB,EAGvBC,KAHuB;AAKvB,QAAMC,OAAO,GAAG,IAAIC,IAAJ,CACdJ,IAAI,CAACK,WAAL,MAAsBH,KAAK,KAAK,MAAV,GAAmBD,QAAnB,GAA8B,CAApD,CADc,EAEdD,IAAI,CAACM,QAAL,MAAmBJ,KAAK,KAAK,OAAV,GAAoBD,QAApB,GAA+B,CAAlD,CAFc,EAGdD,IAAI,CAACO,OAAL,MAAkBL,KAAK,KAAK,KAAV,GAAkBD,QAAlB,GAA6B,CAA/C,CAHc,EAIdD,IAAI,CAACQ,QAAL,MAAmBN,KAAK,KAAK,MAAV,GAAmBD,QAAnB,GAA8B,CAAjD,CAJc,EAKdD,IAAI,CAACS,UAAL,MAAqBP,KAAK,KAAK,QAAV,GAAqBD,QAArB,GAAgC,CAArD,CALc,EAMdD,IAAI,CAACU,UAAL,MAAqBR,KAAK,KAAK,QAAV,GAAqBD,QAArB,GAAgC,CAArD,CANc,EAOdD,IAAI,CAACW,eAAL,MAA0BT,KAAK,KAAK,aAAV,GAA0BD,QAA1B,GAAqC,CAA/D,CAPc,CAAhB;AASA,SAAOE,OAAP;AACD,CAfM;AAiBP,AAAO,MAAMS,WAAW,GAAG,CAACZ,IAAD,EAAaE,KAAb;AACzB,QAAMW,MAAM,GAAG,CACb,aADa,EAEb,QAFa,EAGb,QAHa,EAIb,MAJa,EAKb,KALa,EAMb,OANa,EAOb,MAPa,CAAf;;AAUA,QAAMC,WAAW,GAAIC,MAAD;AAClB,UAAMC,QAAQ,GAAGH,MAAM,CAACI,OAAP,CAAef,KAAf,CAAjB;AACA,WAAOW,MAAM,CAACI,OAAP,CAAeF,MAAf,KAA0BC,QAAjC;AACD,GAHD;;AAIA,QAAMb,OAAO,GAAG,IAAIC,IAAJ,CACdJ,IAAI,CAACK,WAAL,EADc,EAEdS,WAAW,CAAC,MAAD,CAAX,GAAsB,CAAtB,GAA0Bd,IAAI,CAACM,QAAL,EAFZ,EAGdQ,WAAW,CAAC,OAAD,CAAX,GAAuB,CAAvB,GAA2Bd,IAAI,CAACO,OAAL,EAHb,EAIdO,WAAW,CAAC,KAAD,CAAX,GAAqB,CAArB,GAAyBd,IAAI,CAACQ,QAAL,EAJX,EAKdM,WAAW,CAAC,MAAD,CAAX,GAAsB,CAAtB,GAA0Bd,IAAI,CAACS,UAAL,EALZ,EAMdK,WAAW,CAAC,QAAD,CAAX,GAAwB,CAAxB,GAA4Bd,IAAI,CAACU,UAAL,EANd,EAOdI,WAAW,CAAC,QAAD,CAAX,GAAwB,CAAxB,GAA4Bd,IAAI,CAACW,eAAL,EAPd,CAAhB;AASA,SAAOR,OAAP;AACD,CAzBM;AA2BP,AAAO,MAAMe,cAAc,GAAG,CAACC,KAAD,EAAgBC,QAAhB;AAC5B,MAAIC,YAAY,GAASF,KAAK,CAAC,CAAD,CAAL,CAASG,KAAlC;AACA,MAAIC,UAAU,GAASJ,KAAK,CAAC,CAAD,CAAL,CAASG,KAAhC;;AACA,OAAK,MAAME,IAAX,IAAmBL,KAAnB,EAA0B;AACxB,QAAIK,IAAI,CAACF,KAAL,GAAaD,YAAjB,EAA+B;AAC7BA,MAAAA,YAAY,GAAGG,IAAI,CAACF,KAApB;AACD;;AACD,QAAIE,IAAI,CAACC,GAAL,GAAWF,UAAf,EAA2B;AACzBA,MAAAA,UAAU,GAAGC,IAAI,CAACC,GAAlB;AACD;AACF;;AACD,UAAQL,QAAR;AACE,SAAKhC,QAAQ,CAACsC,KAAd;AACEL,MAAAA,YAAY,GAAGtB,SAAS,CAACsB,YAAD,EAAe,CAAC,CAAhB,EAAmB,OAAnB,CAAxB;AACAA,MAAAA,YAAY,GAAGT,WAAW,CAACS,YAAD,EAAe,OAAf,CAA1B;AACAE,MAAAA,UAAU,GAAGxB,SAAS,CAACwB,UAAD,EAAa,CAAb,EAAgB,MAAhB,CAAtB;AACAA,MAAAA,UAAU,GAAGX,WAAW,CAACW,UAAD,EAAa,MAAb,CAAxB;AACA;;AACF,SAAKnC,QAAQ,CAACuC,IAAd;AACEN,MAAAA,YAAY,GAAGT,WAAW,CAACS,YAAD,EAAe,KAAf,CAA1B;AACAE,MAAAA,UAAU,GAAGX,WAAW,CAACW,UAAD,EAAa,KAAb,CAAxB;AACAF,MAAAA,YAAY,GAAGtB,SAAS,CAAC6B,SAAS,CAACP,YAAD,CAAV,EAA0B,CAAC,CAA3B,EAA8B,KAA9B,CAAxB;AACAE,MAAAA,UAAU,GAAGxB,SAAS,CAACwB,UAAD,EAAa,GAAb,EAAkB,OAAlB,CAAtB;AACA;;AACF,SAAKnC,QAAQ,CAACyC,GAAd;AACER,MAAAA,YAAY,GAAGT,WAAW,CAACS,YAAD,EAAe,KAAf,CAA1B;AACAE,MAAAA,UAAU,GAAGX,WAAW,CAACW,UAAD,EAAa,KAAb,CAAxB;AACAF,MAAAA,YAAY,GAAGtB,SAAS,CAACsB,YAAD,EAAe,CAAC,CAAhB,EAAmB,KAAnB,CAAxB;AACAE,MAAAA,UAAU,GAAGxB,SAAS,CAACwB,UAAD,EAAa,EAAb,EAAiB,KAAjB,CAAtB;AACA;;AACF,SAAKnC,QAAQ,CAAC0C,UAAd;AACET,MAAAA,YAAY,GAAGT,WAAW,CAACS,YAAD,EAAe,KAAf,CAA1B;AACAE,MAAAA,UAAU,GAAGX,WAAW,CAACW,UAAD,EAAa,KAAb,CAAxB;AACAF,MAAAA,YAAY,GAAGtB,SAAS,CAACsB,YAAD,EAAe,CAAC,CAAhB,EAAmB,KAAnB,CAAxB;AACAE,MAAAA,UAAU,GAAGxB,SAAS,CAACwB,UAAD,EAAa,EAAb,EAAiB,MAAjB,CAAtB;AACA;;AACF,SAAKnC,QAAQ,CAAC2C,OAAd;AACEV,MAAAA,YAAY,GAAGT,WAAW,CAACS,YAAD,EAAe,KAAf,CAA1B;AACAE,MAAAA,UAAU,GAAGX,WAAW,CAACW,UAAD,EAAa,KAAb,CAAxB;AACAF,MAAAA,YAAY,GAAGtB,SAAS,CAACsB,YAAD,EAAe,CAAC,CAAhB,EAAmB,KAAnB,CAAxB;AACAE,MAAAA,UAAU,GAAGxB,SAAS,CAACwB,UAAD,EAAa,GAAb,EAAkB,MAAlB,CAAtB;AACA;AA9BJ;;AAgCA,SAAO,CAACF,YAAD,EAAeE,UAAf,CAAP;AACD,CA5CM;AA8CP,AAAO,MAAMS,SAAS,GAAG,CACvBC,SADuB,EAEvBC,OAFuB,EAGvBd,QAHuB;AAKvB,MAAIe,WAAW,GAAS,IAAI/B,IAAJ,CAAS6B,SAAT,CAAxB;AACA,QAAMG,KAAK,GAAW,CAACD,WAAD,CAAtB;;AACA,SAAOA,WAAW,GAAGD,OAArB,EAA8B;AAC5B,YAAQd,QAAR;AACE,WAAKhC,QAAQ,CAACsC,KAAd;AACES,QAAAA,WAAW,GAAGpC,SAAS,CAACoC,WAAD,EAAc,CAAd,EAAiB,OAAjB,CAAvB;AACA;;AACF,WAAK/C,QAAQ,CAACuC,IAAd;AACEQ,QAAAA,WAAW,GAAGpC,SAAS,CAACoC,WAAD,EAAc,CAAd,EAAiB,KAAjB,CAAvB;AACA;;AACF,WAAK/C,QAAQ,CAACyC,GAAd;AACEM,QAAAA,WAAW,GAAGpC,SAAS,CAACoC,WAAD,EAAc,CAAd,EAAiB,KAAjB,CAAvB;AACA;;AACF,WAAK/C,QAAQ,CAAC2C,OAAd;AACEI,QAAAA,WAAW,GAAGpC,SAAS,CAACoC,WAAD,EAAc,EAAd,EAAkB,MAAlB,CAAvB;AACA;;AACF,WAAK/C,QAAQ,CAAC0C,UAAd;AACEK,QAAAA,WAAW,GAAGpC,SAAS,CAACoC,WAAD,EAAc,CAAd,EAAiB,MAAjB,CAAvB;AACA;AAfJ;;AAiBAC,IAAAA,KAAK,CAACC,IAAN,CAAWF,WAAX;AACD;;AACD,SAAOC,KAAP;AACD,CA5BM;AA8BP,AAAO,MAAME,cAAc,GAAG,CAACtC,IAAD,EAAauC,MAAb;AAC5B,MAAIC,WAAW,GAAGlD,uBAAuB,CAACiD,MAAD,EAAS;AAChDE,IAAAA,KAAK,EAAE;AADyC,GAAT,CAAvB,CAEfC,MAFe,CAER1C,IAFQ,CAAlB;AAGAwC,EAAAA,WAAW,GAAGA,WAAW,CAACG,OAAZ,CACZH,WAAW,CAAC,CAAD,CADC,EAEZA,WAAW,CAAC,CAAD,CAAX,CAAeI,iBAAf,EAFY,CAAd;AAIA,SAAOJ,WAAP;AACD,CATM;;AAeP,MAAMZ,SAAS,GAAI5B,IAAD;AAChB,QAAM6C,GAAG,GAAG7C,IAAI,CAAC8C,MAAL,EAAZ;AACA,QAAMC,IAAI,GAAG/C,IAAI,CAACO,OAAL,KAAiBsC,GAAjB,IAAwBA,GAAG,KAAK,CAAR,GAAY,CAAC,CAAb,GAAiB,CAAzC,CAAb;AACA,SAAO,IAAIzC,IAAJ,CAASJ,IAAI,CAACgD,OAAL,CAAaD,IAAb,CAAT,CAAP;AACD,CAJD;;AAMA,AAAO,MAAME,oBAAoB,GAAIjD,IAAD;AAClC,QAAMkD,OAAO,GAAG,IAAI9C,IAAJ,CAASJ,IAAI,CAACmD,OAAL,EAAT,CAAhB;AACA,QAAMC,SAAS,GAAG,CAACF,OAAO,CAACJ,MAAR,KAAmB,CAApB,IAAyB,CAA3C;AACAI,EAAAA,OAAO,CAACF,OAAR,CAAgBE,OAAO,CAAC3C,OAAR,KAAoB6C,SAApB,GAAgC,CAAhD;AACA,QAAMC,aAAa,GAAGH,OAAO,CAACC,OAAR,EAAtB;AACAD,EAAAA,OAAO,CAACI,QAAR,CAAiB,CAAjB,EAAoB,CAApB;;AACA,MAAIJ,OAAO,CAACJ,MAAR,OAAqB,CAAzB,EAA4B;AAC1BI,IAAAA,OAAO,CAACI,QAAR,CAAiB,CAAjB,EAAoB,IAAK,CAAC,IAAIJ,OAAO,CAACJ,MAAR,EAAJ,GAAuB,CAAxB,IAA6B,CAAtD;AACD;;AACD,QAAMS,UAAU,GAAG,CACjB,IAAIC,IAAI,CAACC,IAAL,CAAU,CAACJ,aAAa,GAAGH,OAAO,CAACC,OAAR,EAAjB,IAAsC,SAAhD,CADa,EAEjBO,QAFiB,EAAnB;;AAIA,MAAIH,UAAU,CAACI,MAAX,KAAsB,CAA1B,EAA6B;AAC3B,eAAWJ,YAAX;AACD,GAFD,MAEO;AACL,WAAOA,UAAP;AACD;AACF,CAlBM;AAoBP,AAAO,MAAMK,cAAc,GAAG,CAACnB,KAAD,EAAgBoB,IAAhB;AAC5B,SAAO,IAAIzD,IAAJ,CAASyD,IAAT,EAAepB,KAAK,GAAG,CAAvB,EAA0B,CAA1B,EAA6BlC,OAA7B,EAAP;AACD,CAFM;;;;AC1LA,MAAMuD,qBAAqB,GAM7B,CAAC;AAAEC,EAAAA,YAAF;AAAgBC,EAAAA,SAAhB;AAA2BC,EAAAA,UAA3B;AAAuCC,EAAAA,QAAvC;AAAiDC,EAAAA;AAAjD,CAAD;AACH,SACEC,mBAAA,MAAA;AACEC,IAAAA,SAAS,EAAEC,MAAM,CAACC;AAClBC,IAAAA,KAAK,EAAE;AACLP,MAAAA,UAAU,EAAEA,UADP;AAELC,MAAAA,QAAQ,EAAEA;AAFL;GAFT,EAOEE,mBAAA,MAAA;AACEC,IAAAA,SAAS,EAAEC,MAAM,CAACG;AAClBD,IAAAA,KAAK,EAAE;AACLE,MAAAA,MAAM,EAAEX,YAAY,GAAG;AADlB;GAFT,EAMEK,mBAAA,MAAA;AACEC,IAAAA,SAAS,EAAEC,MAAM,CAACK;AAClBH,IAAAA,KAAK,EAAE;AACLI,MAAAA,QAAQ,EAAET;AADL;GAFT,cAAA,CANF,EAcG,CAACH,SAAD,IACCI,mBAAA,MAAA;AACEC,IAAAA,SAAS,EAAEC,MAAM,CAACO;AAClBL,IAAAA,KAAK,EAAE;AACLE,MAAAA,MAAM,EAAEX,YAAY,GAAG,GADlB;AAELe,MAAAA,SAAS,EAAEf,YAAY,GAAG;AAFrB;GAFT,CAfJ,EAuBG,CAACC,SAAD,IACCI,mBAAA,CAACA,KAAK,CAACW,QAAP,MAAA,EACEX,mBAAA,MAAA;AACEC,IAAAA,SAAS,EAAEC,MAAM,CAACK;AAClBH,IAAAA,KAAK,EAAE;AACLI,MAAAA,QAAQ,EAAET;AADL;GAFT,cAAA,CADF,EASEC,mBAAA,MAAA;AACEC,IAAAA,SAAS,EAAEC,MAAM,CAACO;AAClBL,IAAAA,KAAK,EAAE;AACLE,MAAAA,MAAM,EAAEX,YAAY,GAAG,GADlB;AAELe,MAAAA,SAAS,EAAEf,YAAY,GAAG;AAFrB;GAFT,CATF,EAgBEK,mBAAA,MAAA;AACEC,IAAAA,SAAS,EAAEC,MAAM,CAACK;AAClBH,IAAAA,KAAK,EAAE;AACLI,MAAAA,QAAQ,EAAET;AADL;GAFT,YAAA,CAhBF,CAxBJ,CAPF,CADF;AA6DD,CApEM;;;;ACCP,MAAMa,qBAAqB,GAAG,EAA9B;;AACA,MAAMC,yBAAyB,GAAI1C,MAAD,IAAoB,CACpDvC,IADoD,EAEpDkF,eAFoD;AAIpD,QAAMzF,GAAG,GAAGO,IAAI,CAAC0D,QAAL,EAAZ;AACA,MAAIyB,GAAG,GAAGH,qBAAqB,CAACvF,GAAD,CAA/B;;AACA,MAAI,CAAC0F,GAAL,EAAU;AACRA,IAAAA,GAAG,GAAGnF,IAAI,CAACoF,kBAAL,CAAwB7C,MAAxB,EAAgC2C,eAAhC,CAAN;AACAF,IAAAA,qBAAqB,CAACvF,GAAD,CAArB,GAA6B0F,GAA7B;AACD;;AACD,SAAOA,GAAP;AACD,CAXD;;AAYA,MAAMD,eAAe,GAA+B;AAClDG,EAAAA,OAAO,EAAE,OADyC;AAElDxB,EAAAA,IAAI,EAAE,SAF4C;AAGlDpB,EAAAA,KAAK,EAAE,MAH2C;AAIlDI,EAAAA,GAAG,EAAE;AAJ6C,CAApD;AAOA,AAAO,MAAMyC,oBAAoB,GAW5B,CAAC;AACJC,EAAAA,SADI;AAEJpB,EAAAA,QAFI;AAGJH,EAAAA,SAHI;AAIJ7C,EAAAA,KAJI;AAKJ8C,EAAAA,UALI;AAMJC,EAAAA,QANI;AAOJ3B,EAAAA,MAPI;AAQJiD,EAAAA;AARI,CAAD;AAUH,QAAMJ,kBAAkB,GAAGK,OAAO,CAAC,MAAMR,yBAAyB,CAAC1C,MAAD,CAAhC,EAA0C,CAC1EA,MAD0E,CAA1C,CAAlC;AAIA,SACE6B,mBAAA,MAAA;AACEC,IAAAA,SAAS,EAAEC,QAAM,CAACoB;AAClBlB,IAAAA,KAAK,EAAE;AACLP,MAAAA,UAAU,EAAEA,UADP;AAELC,MAAAA,QAAQ,EAAEA;AAFL;GAFT,EAOG/C,KAAK,CAACwE,GAAN,CAAUC,CAAC;AACV,QAAIC,cAAc,GAAG,EAArB;;AACA,QAAID,CAAC,CAACE,YAAF,KAAmB,KAAvB,EAA8B;AAC5BD,MAAAA,cAAc,GAAG,GAAjB;AACD,KAFD,MAEO,IAAID,CAAC,CAACE,YAAF,KAAmB,IAAvB,EAA6B;AAClCD,MAAAA,cAAc,GAAG,GAAjB;AACD;;AAED,WACEzB,mBAAA,MAAA;AACEC,MAAAA,SAAS,EAAEC,QAAM,CAACyB;AAClBvB,MAAAA,KAAK,EAAE;AAAEE,QAAAA,MAAM,EAAEa;AAAV;AACP9F,MAAAA,GAAG,KAAKmG,CAAC,CAACI;KAHZ,EAKE5B,mBAAA,MAAA;AACEC,MAAAA,SAAS,EAAEC,QAAM,CAAC2B;AAClBzB,MAAAA,KAAK,EAAE;AACLI,QAAAA,QAAQ,EAAET,QADL;AAEL+B,QAAAA,QAAQ,EAAE/B;AAFL;AAIPgC,MAAAA,KAAK,EAAEP,CAAC,CAACQ;KANX,EAQEhC,mBAAA,MAAA;AAAKC,MAAAA,SAAS,EAAEC,QAAM,CAAC+B;KAAvB,EACEjC,mBAAA,MAAA;AACEC,MAAAA,SAAS,EACPwB,cAAc,GACVvB,QAAM,CAACgC,gBADG,GAEVhC,QAAM,CAACiC;AAEbC,MAAAA,OAAO,EAAE,MAAMhB,eAAe,CAACI,CAAD;KANhC,EAQGC,cARH,CADF,EAWEzB,mBAAA,MAAA,MAAA,EAAMwB,CAAC,CAACQ,IAAR,CAXF,CARF,CALF,EA2BG,CAACpC,SAAD,IACCI,mBAAA,CAACA,KAAK,CAACW,QAAP,MAAA,EACEX,mBAAA,MAAA;AACEC,MAAAA,SAAS,EAAEC,QAAM,CAAC2B;AAClBzB,MAAAA,KAAK,EAAE;AACLI,QAAAA,QAAQ,EAAET,QADL;AAEL+B,QAAAA,QAAQ,EAAE/B;AAFL;KAFT,UAAA,EAOSiB,kBAAkB,CAACQ,CAAC,CAACtE,KAAH,EAAU4D,eAAV,CAP3B,CADF,EAUEd,mBAAA,MAAA;AACEC,MAAAA,SAAS,EAAEC,QAAM,CAAC2B;AAClBzB,MAAAA,KAAK,EAAE;AACLI,QAAAA,QAAQ,EAAET,QADL;AAEL+B,QAAAA,QAAQ,EAAE/B;AAFL;KAFT,UAAA,EAOSiB,kBAAkB,CAACQ,CAAC,CAACnE,GAAH,EAAQyD,eAAR,CAP3B,WAAA,CAVF,CA5BJ,CADF;AAoDD,GA5DA,CAPH,CADF;AAuED,CAhGM;;;;ACCA,MAAMuB,OAAO,GAA2B,CAAC;AAC9CjF,EAAAA,IAD8C;AAE9C+D,EAAAA,SAF8C;AAG9CmB,EAAAA,GAH8C;AAI9CC,EAAAA,kBAJ8C;AAK9CC,EAAAA,iBAL8C;AAM9CC,EAAAA,OAN8C;AAO9CC,EAAAA,OAP8C;AAQ9CC,EAAAA,WAR8C;AAS9C7C,EAAAA,QAT8C;AAU9CD,EAAAA,UAV8C;AAW9CF,EAAAA,YAX8C;AAY9CiD,EAAAA,aAZ8C;AAa9CC,EAAAA;AAb8C,CAAD;AAe7C,QAAMC,UAAU,GAAGC,MAAM,CAAwB,IAAxB,CAAzB;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BC,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BF,QAAQ,CAAC,CAAD,CAAxC;AACAG,EAAAA,SAAS,CAAC;AACR,QAAIP,UAAU,CAACQ,OAAf,EAAwB;AACtB,YAAMC,aAAa,GAAGT,UAAU,CAACQ,OAAX,CAAmBE,YAAnB,GAAkC,GAAxD;AACA,YAAMC,YAAY,GAAGX,UAAU,CAACQ,OAAX,CAAmBI,WAAnB,GAAiC,GAAtD;AAEA,UAAIC,WAAW,GAAGvG,IAAI,CAACwG,KAAL,GAAazC,SAAb,GAAyBuB,OAAzB,GAAmC/C,YAArD;AACA,UAAIkE,WAAJ;;AACA,UAAIvB,GAAJ,EAAS;AACPuB,QAAAA,WAAW,GAAGzG,IAAI,CAAC0G,EAAL,GAAUnB,WAAW,GAAG,GAAxB,GAA8Bc,YAA9B,GAA6ChB,OAA3D;;AACA,YAAIoB,WAAW,GAAG,CAAlB,EAAqB;AACnBA,UAAAA,WAAW,GAAGzG,IAAI,CAAC2G,EAAL,GAAUpB,WAAW,GAAG,GAAxB,GAA8BF,OAA5C;AACD;;AACD,cAAMuB,oBAAoB,GAAGP,YAAY,GAAGI,WAA5C;;AACA,YAAIG,oBAAoB,GAAGxB,iBAA3B,EAA8C;AAC5CqB,UAAAA,WAAW,GAAGrB,iBAAiB,GAAGiB,YAAlC;AACAE,UAAAA,WAAW,IAAIxC,SAAf;AACD;AACF,OAVD,MAUO;AACL0C,QAAAA,WAAW,GAAGzG,IAAI,CAAC2G,EAAL,GAAUpB,WAAW,GAAG,GAAxB,GAA8BC,aAA9B,GAA8CH,OAA5D;AACA,cAAMuB,oBAAoB,GAAGP,YAAY,GAAGI,WAA5C;AACA,cAAMI,cAAc,GAAGrB,aAAa,GAAGJ,iBAAvC;;AACA,YAAIwB,oBAAoB,GAAGC,cAA3B,EAA2C;AACzCJ,UAAAA,WAAW,GACTzG,IAAI,CAAC0G,EAAL,GACAlB,aADA,GAEAD,WAAW,GAAG,GAFd,GAGAF,OAHA,GAIAgB,YALF;AAMD;;AACD,YAAII,WAAW,GAAGjB,aAAlB,EAAiC;AAC/BiB,UAAAA,WAAW,GAAGrB,iBAAiB,GAAGI,aAApB,GAAoCa,YAAlD;AACAE,UAAAA,WAAW,IAAIxC,SAAf;AACD;AACF;;AAED,YAAM+C,iBAAiB,GAAGX,aAAa,GAAGI,WAAhB,GAA8BjB,OAAxD;;AACA,UAAIwB,iBAAiB,GAAG3B,kBAAkB,GAAGG,OAA7C,EAAsD;AACpDiB,QAAAA,WAAW,GAAGpB,kBAAkB,GAAGgB,aAAnC;AACD;;AACDN,MAAAA,WAAW,CAACU,WAAD,CAAX;AACAP,MAAAA,WAAW,CAACS,WAAD,CAAX;AACD;AACF,GA1CQ,EA0CN,CACDf,UAAU,CAACQ,OADV,EAEDlG,IAFC,EAGDuF,WAHC,EAIDF,OAJC,EAKDC,OALC,EAMD/C,YANC,EAODiD,aAPC,EAQDzB,SARC,EASDoB,kBATC,EAUDC,iBAVC,CA1CM,CAAT;AAuDA,SACExC,mBAAA,MAAA;AACEmE,IAAAA,GAAG,EAAErB;AACL7C,IAAAA,SAAS,EACPkD,QAAQ,GACJjD,QAAM,CAACkE,uBADH,GAEJlE,QAAM,CAACmE;AAEbjE,IAAAA,KAAK,EAAE;AAAEkE,MAAAA,IAAI,EAAEnB,QAAR;AAAkBoB,MAAAA,GAAG,EAAEvB;AAAvB;GAPT,EASEhD,mBAAA,CAAC6C,cAAD;AAAgBzF,IAAAA,IAAI,EAAEA;AAAM0C,IAAAA,QAAQ,EAAEA;AAAUD,IAAAA,UAAU,EAAEA;GAA5D,CATF,CADF;AAaD,CAtFM;AAwFP,AAAO,MAAM2E,sBAAsB,GAI9B,CAAC;AAAEpH,EAAAA,IAAF;AAAQ0C,EAAAA,QAAR;AAAkBD,EAAAA;AAAlB,CAAD;AACH,QAAMO,KAAK,GAAG;AACZN,IAAAA,QADY;AAEZD,IAAAA;AAFY,GAAd;AAIA,SACEG,mBAAA,MAAA;AAAKC,IAAAA,SAAS,EAAEC,QAAM,CAACuE;AAAyBrE,IAAAA,KAAK,EAAEA;GAAvD,EACEJ,mBAAA,IAAA;AAAGI,IAAAA,KAAK,EAAE;AAAEN,MAAAA,QAAQ,EAAEA,QAAQ,GAAG;AAAvB;GAAV,KACE1C,IAAI,CAAC4E,SACF5E,IAAI,CAACF,KAAL,CAAWf,OAAX,MACHiB,IAAI,CAACF,KAAL,CAAWhB,QAAX,KAAwB,KACtBkB,IAAI,CAACF,KAAL,CAAWjB,WAAX,QAA8BmB,IAAI,CAACC,GAAL,CAASlB,OAAT,MAChCiB,IAAI,CAACC,GAAL,CAASnB,QAAT,KAAsB,KACpBkB,IAAI,CAACC,GAAL,CAASpB,WAAT,IANJ,CADF,EAQGmB,IAAI,CAACC,GAAL,CAASqH,OAAT,KAAqBtH,IAAI,CAACF,KAAL,CAAWwH,OAAX,EAArB,KAA8C,CAA9C,IACC1E,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAEC,QAAM,CAACyE;GAArB,eAAqE,CAAC,EACpE,CAACvH,IAAI,CAACC,GAAL,CAASqH,OAAT,KAAqBtH,IAAI,CAACF,KAAL,CAAWwH,OAAX,EAAtB,KACC,OAAO,EAAP,GAAY,EAAZ,GAAiB,EADlB,CADoE,UAAtE,CATJ,EAeE1E,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAEC,QAAM,CAACyE;GAArB,EACG,CAAC,CAACvH,IAAI,CAACwH,QAAP,iBAAgCxH,IAAI,CAACwH,YADxC,CAfF,CADF;AAqBD,CA9BM;;;;AC9GA,MAAMC,cAAc,GAOtB,CAAC;AACJC,EAAAA,MADI;AAEJC,EAAAA,WAFI;AAGJC,EAAAA,eAHI;AAIJrF,EAAAA,YAJI;AAKJ2C,EAAAA,GALI;AAMJ2C,EAAAA;AANI,CAAD;AAQH,QAAMC,SAAS,GAAGnC,MAAM,CAAiB,IAAjB,CAAxB;AAEAM,EAAAA,SAAS,CAAC;AACR,QAAI6B,SAAS,CAAC5B,OAAd,EAAuB;AACrB4B,MAAAA,SAAS,CAAC5B,OAAV,CAAkB6B,SAAlB,GAA8BL,MAA9B;AACD;AACF,GAJQ,EAIN,CAACA,MAAD,CAJM,CAAT;AAMA,SACE9E,mBAAA,MAAA;AACEI,IAAAA,KAAK,EAAE;AACLE,MAAAA,MAAM,EAAEyE,WADH;AAELrE,MAAAA,SAAS,EAAEf,YAFN;AAGLyF,MAAAA,UAAU,EAAE9C,GAAG,GAAG,EAAH,GAAQ;AAHlB;AAKPrC,IAAAA,SAAS,EAAEC,QAAM,CAAC4E;AAClBG,IAAAA,QAAQ,EAAEA;AACVd,IAAAA,GAAG,EAAEe;GARP,EAUElF,mBAAA,MAAA;AAAKI,IAAAA,KAAK,EAAE;AAAEE,MAAAA,MAAM,EAAE0E,eAAV;AAA2BK,MAAAA,KAAK,EAAE;AAAlC;GAAZ,CAVF,CADF;AAcD,CArCM;;ACsCA,MAAMC,QAAQ,GAA4B,CAAC;AAChD3F,EAAAA,YADgD;AAEhDE,EAAAA,UAFgD;AAGhDC,EAAAA,QAHgD;AAIhDF,EAAAA,SAJgD;AAKhDG,EAAAA,QALgD;AAMhDoB,EAAAA,SANgD;AAOhDuB,EAAAA,OAPgD;AAQhD3F,EAAAA,KARgD;AAShDwI,EAAAA,YATgD;AAUhDC,EAAAA,eAVgD;AAWhDpE,EAAAA,eAXgD;AAYhDjD,EAAAA,MAZgD;AAahD4G,EAAAA,WAbgD;AAchDU,EAAAA,WAdgD;AAehDC,EAAAA,wBAfgD;AAgBhDC,EAAAA,cAhBgD;AAiBhDC,EAAAA;AAjBgD,CAAD;AAmB/C,QAAMC,sBAAsB,GAAG9C,MAAM,CAAiB,IAAjB,CAArC;AACAM,EAAAA,SAAS,CAAC;AACR,QAAIwC,sBAAsB,CAACvC,OAA3B,EAAoC;AAClCuC,MAAAA,sBAAsB,CAACvC,OAAvB,CAA+B6B,SAA/B,GAA2CzC,OAA3C;AACD;AACF,GAJQ,EAIN,CAACA,OAAD,CAJM,CAAT;AAMA,QAAMoD,WAAW,GAAG;AAClBnG,IAAAA,YADkB;AAElBE,IAAAA,UAFkB;AAGlBC,IAAAA,QAHkB;AAIlBC,IAAAA,QAJkB;AAKlBH,IAAAA;AALkB,GAApB;AAOA,QAAMmG,cAAc,GAAGR,YAAY,GAAGA,YAAY,CAAC3D,EAAhB,GAAqB,EAAxD;AACA,QAAMoE,UAAU,GAAG;AACjB7E,IAAAA,SADiB;AAEjBpB,IAAAA,QAFiB;AAGjBF,IAAAA,UAHiB;AAIjBC,IAAAA,QAJiB;AAKjB/C,IAAAA,KALiB;AAMjBoB,IAAAA,MANiB;AAOjB4H,IAAAA,cAAc,EAAEA,cAPC;AAQjBP,IAAAA,eARiB;AASjBpE,IAAAA,eATiB;AAUjBxB,IAAAA;AAViB,GAAnB;AAaA,SACEI,mBAAA,MAAA;AAAKmE,IAAAA,GAAG,EAAEsB;GAAV,EACEzF,mBAAA,CAAC2F,cAAD,oBAAoBG,YAApB,CADF,EAEE9F,mBAAA,MAAA;AACEmE,IAAAA,GAAG,EAAE0B;AACL5F,IAAAA,SAAS,EAAEyF;AACXtF,IAAAA,KAAK,EAAE2E,WAAW,GAAG;AAAEzE,MAAAA,MAAM,EAAEyE;AAAV,KAAH,GAA6B;GAHjD,EAKE/E,mBAAA,CAAC4F,aAAD,oBAAmBI,WAAnB,CALF,CAFF,CADF;AAYD,CA3DM;;;;AC3BA,MAAMC,QAAQ,GAA4B,CAAC;AAChDlJ,EAAAA,KADgD;AAEhDiB,EAAAA,KAFgD;AAGhDmD,EAAAA,SAHgD;AAIhD+E,EAAAA,QAJgD;AAKhDC,EAAAA,WALgD;AAMhDC,EAAAA,UANgD;AAOhD9D,EAAAA;AAPgD,CAAD;AAS/C,MAAI+D,CAAC,GAAG,CAAR;AACA,QAAMC,QAAQ,GAAiB,EAA/B;AACA,QAAMC,QAAQ,GAAiB,CAC7BvG,mBAAA,OAAA;AACE3E,IAAAA,GAAG,EAAC;AACJmL,IAAAA,CAAC,EAAC;AACFC,IAAAA,EAAE,EAAE;AACJ1C,IAAAA,EAAE,EAAEmC;AACJQ,IAAAA,EAAE,EAAE;AACJzG,IAAAA,SAAS,EAAEC,QAAM,CAACyG;GANpB,CAD6B,CAA/B;;AAUA,OAAK,MAAMvJ,IAAX,IAAmBL,KAAnB,EAA0B;AACxBuJ,IAAAA,QAAQ,CAACrI,IAAT,CACE+B,mBAAA,OAAA;AACE3E,MAAAA,GAAG,EAAE,QAAQ+B,IAAI,CAACwE;AAClB4E,MAAAA,CAAC,EAAC;AACFH,MAAAA,CAAC,EAAEA;AACHhB,MAAAA,KAAK,EAAEa;AACP5F,MAAAA,MAAM,EAAEa;AACRlB,MAAAA,SAAS,EAAEC,QAAM,CAAC0G;KANpB,CADF;AAUAL,IAAAA,QAAQ,CAACtI,IAAT,CACE+B,mBAAA,OAAA;AACE3E,MAAAA,GAAG,EAAE,YAAY+B,IAAI,CAACwE;AACtB4E,MAAAA,CAAC,EAAC;AACFC,MAAAA,EAAE,EAAEJ,CAAC,GAAGlF;AACR4C,MAAAA,EAAE,EAAEmC;AACJQ,MAAAA,EAAE,EAAEL,CAAC,GAAGlF;AACRlB,MAAAA,SAAS,EAAEC,QAAM,CAACyG;KANpB,CADF;AAUAN,IAAAA,CAAC,IAAIlF,SAAL;AACD;;AAED,QAAM0F,GAAG,GAAG,IAAI7K,IAAJ,EAAZ;AACA,MAAI8K,KAAK,GAAG,CAAZ;AACA,QAAMC,KAAK,GAAiB,EAA5B;AACA,MAAIC,KAAK,GAAehH,mBAAA,OAAA,MAAA,CAAxB;;AACA,OAAK,IAAIiH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjJ,KAAK,CAACuB,MAA1B,EAAkC0H,CAAC,EAAnC,EAAuC;AACrC,UAAMrL,IAAI,GAAGoC,KAAK,CAACiJ,CAAD,CAAlB;AACAF,IAAAA,KAAK,CAAC9I,IAAN,CACE+B,mBAAA,OAAA;AACE3E,MAAAA,GAAG,EAAEO,IAAI,CAAC8I,OAAL;AACLZ,MAAAA,EAAE,EAAEgD;AACJL,MAAAA,EAAE,EAAE;AACJ1C,MAAAA,EAAE,EAAE+C;AACJJ,MAAAA,EAAE,EAAEL;AACJpG,MAAAA,SAAS,EAAEC,QAAM,CAACgH;KANpB,CADF;;AAUA,QACGD,CAAC,GAAG,CAAJ,KAAUjJ,KAAK,CAACuB,MAAhB,IACC3D,IAAI,CAAC8I,OAAL,KAAiBmC,GAAG,CAACnC,OAAJ,EADlB,IAEC1G,KAAK,CAACiJ,CAAC,GAAG,CAAL,CAAL,CAAavC,OAAb,MAA0BmC,GAAG,CAACnC,OAAJ,EAF5B,IAICuC,CAAC,KAAK,CAAN,IACCA,CAAC,GAAG,CAAJ,KAAUjJ,KAAK,CAACuB,MADjB,IAEC3D,IAAI,CAAC8I,OAAL,KAAiBmC,GAAG,CAACnC,OAAJ,EAFlB,IAGC/I,SAAS,CACPC,IADO,EAEPA,IAAI,CAAC8I,OAAL,KAAiB1G,KAAK,CAACiJ,CAAC,GAAG,CAAL,CAAL,CAAavC,OAAb,EAFV,EAGP,aAHO,CAAT,CAIEA,OAJF,MAIemC,GAAG,CAACnC,OAAJ,EAZnB,EAaE;AACAsC,MAAAA,KAAK,GACHhH,mBAAA,OAAA;AACEwG,QAAAA,CAAC,EAAEM;AACHT,QAAAA,CAAC,EAAE;AACHhB,QAAAA,KAAK,EAAEc;AACP7F,QAAAA,MAAM,EAAE+F;AACRc,QAAAA,IAAI,EAAEf;OALR,CADF;AASD;;AAED,QACE9D,GAAG,IACH2E,CAAC,GAAG,CAAJ,KAAUjJ,KAAK,CAACuB,MADhB,IAEA3D,IAAI,CAAC8I,OAAL,MAAkBmC,GAAG,CAACnC,OAAJ,EAFlB,IAGA1G,KAAK,CAACiJ,CAAC,GAAG,CAAL,CAAL,CAAavC,OAAb,KAAyBmC,GAAG,CAACnC,OAAJ,EAJ3B,EAKE;AACAsC,MAAAA,KAAK,GACHhH,mBAAA,OAAA;AACEwG,QAAAA,CAAC,EAAEM,KAAK,GAAGX;AACXE,QAAAA,CAAC,EAAE;AACHhB,QAAAA,KAAK,EAAEc;AACP7F,QAAAA,MAAM,EAAE+F;AACRc,QAAAA,IAAI,EAAEf;OALR,CADF;AASD;;AACDU,IAAAA,KAAK,IAAIX,WAAT;AACD;;AACD,SACEnG,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAC;GAAb,EACED,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAC;GAAb,EAAqBqG,QAArB,CADF,EAEEtG,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAC;GAAb,EAAyBsG,QAAzB,CAFF,EAGEvG,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAC;GAAb,EAAsB8G,KAAtB,CAHF,EAIE/G,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAC;GAAb,EAAsB+G,KAAtB,CAJF,CADF;AAQD,CAhHM;;ACVA,MAAMI,IAAI,GAAwBC,KAAK;AAC5C,SACErH,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAC;GAAb,EACED,mBAAA,CAACiG,QAAD,oBAAcoB,MAAd,CADF,CADF;AAKD,CANM;;;;ACQA,MAAMC,iBAAiB,GAAqC,CAAC;AAClEC,EAAAA,KADkE;AAElEC,EAAAA,MAFkE;AAGlEC,EAAAA,MAHkE;AAIlEC,EAAAA,MAJkE;AAKlEC,EAAAA,KALkE;AAMlEC,EAAAA;AANkE,CAAD;AAQjE,SACE5H,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAC;GAAb,EACED,mBAAA,OAAA;AACE8D,IAAAA,EAAE,EAAE0D;AACJf,IAAAA,EAAE,EAAEgB;AACJ1D,IAAAA,EAAE,EAAEyD;AACJd,IAAAA,EAAE,EAAEgB;AACJzH,IAAAA,SAAS,EAAEC,QAAM,CAAC2H;AAClBxM,IAAAA,GAAG,EAAEkM,KAAK,GAAG;GANf,CADF,EASEvH,mBAAA,OAAA;AACE3E,IAAAA,GAAG,EAAEkM,KAAK,GAAG;AACblB,IAAAA,CAAC,EAAEuB;AACHpB,IAAAA,CAAC,EAAEmB;AACH1H,IAAAA,SAAS,EAAEC,QAAM,CAAC4H;GAJpB,EAMGP,KANH,CATF,CADF;AAoBD,CA5BM;;ACWA,MAAMQ,QAAQ,GAA4B,CAAC;AAChDC,EAAAA,SADgD;AAEhD7J,EAAAA,MAFgD;AAGhDnB,EAAAA,QAHgD;AAIhDsF,EAAAA,GAJgD;AAKhD3C,EAAAA,YALgD;AAMhDwG,EAAAA,WANgD;AAOhDtG,EAAAA,UAPgD;AAQhDC,EAAAA;AARgD,CAAD;AAU/C,QAAMmI,yBAAyB,GAAG;AAChC,UAAMC,SAAS,GAAiB,EAAhC;AACA,UAAMC,YAAY,GAAiB,EAAnC;AACA,UAAMC,gBAAgB,GAAGzI,YAAY,GAAG,GAAxC;;AACA,SAAK,IAAIsH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGe,SAAS,CAAChK,KAAV,CAAgBuB,MAApC,EAA4C0H,CAAC,EAA7C,EAAiD;AAC/C,YAAMrL,IAAI,GAAGoM,SAAS,CAAChK,KAAV,CAAgBiJ,CAAhB,CAAb;AACA,YAAM7I,WAAW,GAAGF,cAAc,CAACtC,IAAD,EAAOuC,MAAP,CAAlC;AACAgK,MAAAA,YAAY,CAAClK,IAAb,CACE+B,mBAAA,OAAA;AACE3E,QAAAA,GAAG,EAAE+C,WAAW,GAAGxC,IAAI,CAACK,WAAL;AACnBoK,QAAAA,CAAC,EAAE1G,YAAY,GAAG;AAClB6G,QAAAA,CAAC,EAAEL,WAAW,GAAGc,CAAd,GAAkBd,WAAW,GAAG;AACnClG,QAAAA,SAAS,EAAEC,QAAM,CAACmI;OAJpB,EAMGjK,WANH,CADF;;AAUA,UACE6I,CAAC,KAAK,CAAN,IACArL,IAAI,CAACK,WAAL,OAAuB+L,SAAS,CAAChK,KAAV,CAAgBiJ,CAAC,GAAG,CAApB,EAAuBhL,WAAvB,EAFzB,EAGE;AACA,cAAMqM,QAAQ,GAAG1M,IAAI,CAACK,WAAL,GAAmBqD,QAAnB,EAAjB;AACA,YAAIqI,KAAJ;;AACA,YAAIrF,GAAJ,EAAS;AACPqF,UAAAA,KAAK,GAAG,CAAC,IAAIV,CAAJ,GAAQrL,IAAI,CAACM,QAAL,EAAR,GAA0B,CAA3B,IAAgCiK,WAAxC;AACD,SAFD,MAEO;AACLwB,UAAAA,KAAK,GAAG,CAAC,IAAIV,CAAJ,GAAQrL,IAAI,CAACM,QAAL,EAAT,IAA4BiK,WAApC;AACD;;AACD+B,QAAAA,SAAS,CAACjK,IAAV,CACE+B,mBAAA,CAACsH,iBAAD;AACEjM,UAAAA,GAAG,EAAEiN;AACLf,UAAAA,KAAK,EAAEe;AACPd,UAAAA,MAAM,EAAErB,WAAW,GAAGc;AACtBQ,UAAAA,MAAM,EAAE;AACRC,UAAAA,MAAM,EAAEU;AACRT,UAAAA,KAAK,EAAEA;AACPC,UAAAA,KAAK,EAAEQ,gBAAgB,GAAG;SAP5B,CADF;AAWD;AACF;;AACD,WAAO,CAACF,SAAD,EAAYC,YAAZ,CAAP;AACD,GA1CD;;AA4CA,QAAMI,wBAAwB,GAAG;AAC/B,UAAML,SAAS,GAAiB,EAAhC;AACA,UAAMC,YAAY,GAAiB,EAAnC;AACA,QAAIK,UAAU,GAAW,CAAzB;AACA,UAAMJ,gBAAgB,GAAGzI,YAAY,GAAG,GAAxC;AACA,UAAM3B,KAAK,GAAGgK,SAAS,CAAChK,KAAxB;;AACA,SAAK,IAAIiJ,CAAC,GAAGjJ,KAAK,CAACuB,MAAN,GAAe,CAA5B,EAA+B0H,CAAC,IAAI,CAApC,EAAuCA,CAAC,EAAxC,EAA4C;AAC1C,YAAMrL,IAAI,GAAGoC,KAAK,CAACiJ,CAAD,CAAlB;AACA,UAAIqB,QAAQ,GAAG,EAAf;;AACA,UAAIrB,CAAC,KAAK,CAAN,IAAWrL,IAAI,CAACM,QAAL,OAAoB8B,KAAK,CAACiJ,CAAC,GAAG,CAAL,CAAL,CAAa/K,QAAb,EAAnC,EAA4D;AAE1DoM,QAAAA,QAAQ,MAAMpK,cAAc,CAACtC,IAAD,EAAOuC,MAAP,MAAmBvC,IAAI,CAACK,WAAL,IAA/C;AACD;;AAED,YAAMmC,WAAW,OAAOS,oBAAoB,CAACjD,IAAD,GAA5C;AAEAuM,MAAAA,YAAY,CAAClK,IAAb,CACE+B,mBAAA,OAAA;AACE3E,QAAAA,GAAG,EAAEO,IAAI,CAAC8I,OAAL;AACL2B,QAAAA,CAAC,EAAE1G,YAAY,GAAG;AAClB6G,QAAAA,CAAC,EAAEL,WAAW,IAAIc,CAAC,GAAG,CAAC3E,GAAT;AACdrC,QAAAA,SAAS,EAAEC,QAAM,CAACmI;OAJpB,EAMGjK,WANH,CADF;;AAWA,UAAIkK,QAAJ,EAAc;AAEZ,YAAIrB,CAAC,KAAKjJ,KAAK,CAACuB,MAAN,GAAe,CAAzB,EAA4B;AAC1B2I,UAAAA,SAAS,CAACjK,IAAV,CACE+B,mBAAA,CAACsH,iBAAD;AACEjM,YAAAA,GAAG,EAAEiN;AACLf,YAAAA,KAAK,EAAEe;AACPd,YAAAA,MAAM,EAAErB,WAAW,GAAGc,CAAd,GAAkBuB,UAAU,GAAGrC;AACvCsB,YAAAA,MAAM,EAAE;AACRC,YAAAA,MAAM,EAAEU;AACRT,YAAAA,KAAK,EAAExB,WAAW,GAAGc,CAAd,GAAkBd,WAAW,GAAGqC,UAAd,GAA2B;AACpDZ,YAAAA,KAAK,EAAEQ,gBAAgB,GAAG;WAP5B,CADF;AAWD;;AACDI,QAAAA,UAAU,GAAG,CAAb;AACD;;AACDA,MAAAA,UAAU;AACX;;AACD,WAAO,CAACN,SAAD,EAAYC,YAAZ,CAAP;AACD,GA/CD;;AAiDA,QAAMM,uBAAuB,GAAG;AAC9B,UAAMP,SAAS,GAAiB,EAAhC;AACA,UAAMC,YAAY,GAAiB,EAAnC;AACA,UAAMC,gBAAgB,GAAGzI,YAAY,GAAG,GAAxC;AACA,UAAM3B,KAAK,GAAGgK,SAAS,CAAChK,KAAxB;;AACA,SAAK,IAAIiJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjJ,KAAK,CAACuB,MAA1B,EAAkC0H,CAAC,EAAnC,EAAuC;AACrC,YAAMrL,IAAI,GAAGoC,KAAK,CAACiJ,CAAD,CAAlB;AACA,YAAM7I,WAAW,GAAGxC,IAAI,CAACO,OAAL,GAAemD,QAAf,EAApB;AAEA6I,MAAAA,YAAY,CAAClK,IAAb,CACE+B,mBAAA,OAAA;AACE3E,QAAAA,GAAG,EAAEO,IAAI,CAAC8I,OAAL;AACL2B,QAAAA,CAAC,EAAE1G,YAAY,GAAG;AAClB6G,QAAAA,CAAC,EAAEL,WAAW,GAAGc,CAAd,GAAkBd,WAAW,GAAG;AACnClG,QAAAA,SAAS,EAAEC,QAAM,CAACmI;OAJpB,EAMGjK,WANH,CADF;;AAUA,UACE6I,CAAC,GAAG,CAAJ,KAAUjJ,KAAK,CAACuB,MAAhB,IACA3D,IAAI,CAACM,QAAL,OAAoB8B,KAAK,CAACiJ,CAAC,GAAG,CAAL,CAAL,CAAa/K,QAAb,EAFtB,EAGE;AACA,cAAMoM,QAAQ,GAAGpK,cAAc,CAACtC,IAAD,EAAOuC,MAAP,CAA/B;AAEA+J,QAAAA,SAAS,CAACjK,IAAV,CACE+B,mBAAA,CAACsH,iBAAD;AACEjM,UAAAA,GAAG,EAAEiN,QAAQ,GAAG1M,IAAI,CAACK,WAAL;AAChBsL,UAAAA,KAAK,EAAEe;AACPd,UAAAA,MAAM,EAAErB,WAAW,IAAIc,CAAC,GAAG,CAAR;AACnBQ,UAAAA,MAAM,EAAE;AACRC,UAAAA,MAAM,EAAEU;AACRT,UAAAA,KAAK,EACHxB,WAAW,IAAIc,CAAC,GAAG,CAAR,CAAX,GACAzH,cAAc,CAAC5D,IAAI,CAACM,QAAL,EAAD,EAAkBN,IAAI,CAACK,WAAL,EAAlB,CAAd,GACEkK,WADF,GAEE;AAEJyB,UAAAA,KAAK,EAAEQ,gBAAgB,GAAG;SAZ5B,CADF;AAgBD;AACF;;AACD,WAAO,CAACF,SAAD,EAAYC,YAAZ,CAAP;AACD,GA5CD;;AA8CA,QAAMO,yBAAyB,GAAG;AAChC,UAAMR,SAAS,GAAiB,EAAhC;AACA,UAAMC,YAAY,GAAiB,EAAnC;AACA,UAAMpB,KAAK,GAAG/J,QAAQ,KAAKhC,QAAQ,CAAC2C,OAAtB,GAAgC,CAAhC,GAAoC,CAAlD;AACA,UAAMyK,gBAAgB,GAAGzI,YAAY,GAAG,GAAxC;AACA,UAAM3B,KAAK,GAAGgK,SAAS,CAAChK,KAAxB;;AACA,SAAK,IAAIiJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjJ,KAAK,CAACuB,MAA1B,EAAkC0H,CAAC,EAAnC,EAAuC;AACrC,YAAMrL,IAAI,GAAGoC,KAAK,CAACiJ,CAAD,CAAlB;AACA,YAAM7I,WAAW,GAAGlD,uBAAuB,CAACiD,MAAD,EAAS;AAClDwK,QAAAA,IAAI,EAAE;AAD4C,OAAT,CAAvB,CAEjBrK,MAFiB,CAEV1C,IAFU,CAApB;AAIAuM,MAAAA,YAAY,CAAClK,IAAb,CACE+B,mBAAA,OAAA;AACE3E,QAAAA,GAAG,EAAEO,IAAI,CAAC8I,OAAL;AACL2B,QAAAA,CAAC,EAAE1G,YAAY,GAAG;AAClB6G,QAAAA,CAAC,EAAEL,WAAW,IAAIc,CAAC,GAAG,CAAC3E,GAAT;AACdrC,QAAAA,SAAS,EAAEC,QAAM,CAACmI;AAClBxI,QAAAA,UAAU,EAAEA;OALd,EAOGzB,WAPH,CADF;;AAWA,UAAI6I,CAAC,KAAK,CAAN,IAAWrL,IAAI,CAACO,OAAL,OAAmB6B,KAAK,CAACiJ,CAAC,GAAG,CAAL,CAAL,CAAa9K,OAAb,EAAlC,EAA0D;AACxD,cAAMmM,QAAQ,MAAM1M,IAAI,CAACO,OAAL,MAAkB+B,cAAc,CAACtC,IAAD,EAAOuC,MAAP,GAApD;AACA+J,QAAAA,SAAS,CAACjK,IAAV,CACE+B,mBAAA,CAACsH,iBAAD;AACEjM,UAAAA,GAAG,EAAEiN,QAAQ,GAAG1M,IAAI,CAACK,WAAL;AAChBsL,UAAAA,KAAK,EAAEe;AACPd,UAAAA,MAAM,EAAErB,WAAW,GAAGc,CAAd,GAAkBF,KAAK,GAAGZ;AAClCsB,UAAAA,MAAM,EAAE;AACRC,UAAAA,MAAM,EAAEU;AACRT,UAAAA,KAAK,EAAExB,WAAW,GAAGc,CAAd,GAAkBF,KAAK,GAAGZ,WAAR,GAAsB;AAC/CyB,UAAAA,KAAK,EAAEQ,gBAAgB,GAAG;SAP5B,CADF;AAWD;AACF;;AAED,WAAO,CAACF,SAAD,EAAYC,YAAZ,CAAP;AACD,GAxCD;;AA0CA,MAAID,SAAS,GAAiB,EAA9B;AACA,MAAIC,YAAY,GAAiB,EAAjC;;AACA,UAAQH,SAAS,CAAChL,QAAlB;AACE,SAAKhC,QAAQ,CAACsC,KAAd;AACE,OAAC4K,SAAD,EAAYC,YAAZ,IAA4BF,yBAAyB,EAArD;AACA;;AACF,SAAKjN,QAAQ,CAACuC,IAAd;AACE,OAAC2K,SAAD,EAAYC,YAAZ,IAA4BI,wBAAwB,EAApD;AACA;;AACF,SAAKvN,QAAQ,CAACyC,GAAd;AACE,OAACyK,SAAD,EAAYC,YAAZ,IAA4BM,uBAAuB,EAAnD;AACA;;AACF;AACE,OAACP,SAAD,EAAYC,YAAZ,IAA4BO,yBAAyB,EAArD;AACA;AAZJ;;AAcA,SACE1I,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAC;AAAWH,IAAAA,QAAQ,EAAEA;AAAUD,IAAAA,UAAU,EAAEA;GAAxD,EACEG,mBAAA,OAAA;AACEwG,IAAAA,CAAC,EAAE;AACHH,IAAAA,CAAC,EAAE;AACHhB,IAAAA,KAAK,EAAEc,WAAW,GAAG6B,SAAS,CAAChK,KAAV,CAAgBuB;AACrCe,IAAAA,MAAM,EAAEX;AACRM,IAAAA,SAAS,EAAEC,QAAM,CAAC0I;GALpB,CADF,EAQGT,YARH,KAAA,EAQkBD,SARlB,CADF;AAYD,CA3NM;;ACZA,MAAMW,KAAK,GAAyB,CAAC;AAC1CC,EAAAA,QAD0C;AAE1CC,EAAAA,MAF0C;AAG1C5H,EAAAA,SAH0C;AAI1C6H,EAAAA,UAJ0C;AAK1CrG,EAAAA,WAL0C;AAM1CL,EAAAA;AAN0C,CAAD;AAQzC,MAAI2G,IAAJ;AACA,MAAIC,cAAJ;;AACA,MAAI5G,GAAJ,EAAS;AACP,KAAC2G,IAAD,EAAOC,cAAP,IAAyBC,uBAAuB,CAC9CL,QAD8C,EAE9CC,MAF8C,EAG9C5H,SAH8C,EAI9C6H,UAJ8C,EAK9CrG,WAL8C,CAAhD;AAOD,GARD,MAQO;AACL,KAACsG,IAAD,EAAOC,cAAP,IAAyBE,oBAAoB,CAC3CN,QAD2C,EAE3CC,MAF2C,EAG3C5H,SAH2C,EAI3C6H,UAJ2C,EAK3CrG,WAL2C,CAA7C;AAOD;;AAED,SACE3C,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAC;GAAb,EACED,mBAAA,OAAA;AAAMqJ,IAAAA,WAAW,EAAC;AAAMC,IAAAA,CAAC,EAAEL;AAAM9B,IAAAA,IAAI,EAAC;GAAtC,CADF,EAEEnH,mBAAA,UAAA;AAASuJ,IAAAA,MAAM,EAAEL;GAAjB,CAFF,CADF;AAMD,CAlCM;;AAoCP,MAAME,oBAAoB,GAAG,CAC3BN,QAD2B,EAE3BC,MAF2B,EAG3B5H,SAH2B,EAI3B6H,UAJ2B,EAK3BrG,WAL2B;AAO3B,QAAM6G,YAAY,GAAGV,QAAQ,CAAClF,KAAT,GAAiBmF,MAAM,CAACnF,KAAxB,GAAgC,CAAC,CAAjC,GAAqC,CAA1D;AACA,QAAM6F,iBAAiB,GAAGV,MAAM,CAAC1C,CAAP,GAAW2C,UAAU,GAAG,CAAlD;AACA,QAAMU,mBAAmB,GAAGZ,QAAQ,CAAC/E,EAAT,GAAcpB,WAAW,GAAG,CAAxD;AACA,QAAMgH,6BAA6B,GACjCD,mBAAmB,GAAGX,MAAM,CAACjF,EAA7B,GAAkC,EAAlC,QAA4CiF,MAAM,CAACjF,EAAP,GAAYnB,aAD1D;AAEA,QAAMiH,2BAA2B,GAC/BF,mBAAmB,GAAGX,MAAM,CAACjF,EAA7B,GACInB,WADJ,GAEIoG,MAAM,CAACjF,EAAP,GAAYgF,QAAQ,CAAC/E,EAArB,GAA0BpB,WAHhC;AAKA,QAAMsG,IAAI,QAAQH,QAAQ,CAAC/E,MAAM+E,QAAQ,CAACzC,CAAT,GAAa2C,UAAU,GAAG;MACvDrG;MACC6G,YAAY,GAAGrI,SAAhB,GAA6B;IAC/BwI;MACEF;MACAG,6BALJ;AAOA,QAAMV,cAAc,MAAMH,MAAM,CAACjF,MAAM2F;IACrCV,MAAM,CAACjF,EAAP,GAAY,KAAK2F,iBAAiB,GAAG;IACrCV,MAAM,CAACjF,EAAP,GAAY,KAAK2F,iBAAiB,GAAG,GAFvC;AAGA,SAAO,CAACR,IAAD,EAAOC,cAAP,CAAP;AACD,CA5BD;;AA8BA,MAAMC,uBAAuB,GAAG,CAC9BL,QAD8B,EAE9BC,MAF8B,EAG9B5H,SAH8B,EAI9B6H,UAJ8B,EAK9BrG,WAL8B;AAO9B,QAAM6G,YAAY,GAAGV,QAAQ,CAAClF,KAAT,GAAiBmF,MAAM,CAACnF,KAAxB,GAAgC,CAAC,CAAjC,GAAqC,CAA1D;AACA,QAAM6F,iBAAiB,GAAGV,MAAM,CAAC1C,CAAP,GAAW2C,UAAU,GAAG,CAAlD;AACA,QAAMU,mBAAmB,GAAGZ,QAAQ,CAAChF,EAAT,GAAcnB,WAAW,GAAG,CAAxD;AACA,QAAMgH,6BAA6B,GACjCD,mBAAmB,GAAGX,MAAM,CAAChF,EAA7B,GAAkC,EAAlC,QAA4CgF,MAAM,CAAChF,EAAP,GAAYpB,aAD1D;AAEA,QAAMiH,2BAA2B,GAC/BF,mBAAmB,GAAGX,MAAM,CAAChF,EAA7B,GACI,CAACpB,WADL,GAEIoG,MAAM,CAAChF,EAAP,GAAY+E,QAAQ,CAAChF,EAArB,GAA0BnB,WAHhC;AAKA,QAAMsG,IAAI,QAAQH,QAAQ,CAAChF,MAAMgF,QAAQ,CAACzC,CAAT,GAAa2C,UAAU,GAAG;MACvD,CAACrG;MACA6G,YAAY,GAAGrI,SAAhB,GAA6B;IAC/BwI;MACEF;MACAG,6BALJ;AAOA,QAAMV,cAAc,MAAMH,MAAM,CAAChF,MAAM0F;IACrCV,MAAM,CAAChF,EAAP,GAAY,KAAK0F,iBAAiB,GAAG;IACrCV,MAAM,CAAChF,EAAP,GAAY,KAAK0F,iBAAiB,GAAG,GAFvC;AAGA,SAAO,CAACR,IAAD,EAAOC,cAAP,CAAP;AACD,CA5BD;;ACzEO,MAAMW,iBAAiB,GAAG,CAC/B9M,KAD+B,EAE/BiB,KAF+B,EAG/BmI,WAH+B,EAI/BhF,SAJ+B,EAK/B6H,UAL+B,EAM/Bc,eAN+B,EAO/BC,WAP+B,EAQ/BzH,GAR+B,EAS/B0H,gBAT+B,EAU/BC,wBAV+B,EAW/BC,kBAX+B,EAY/BC,0BAZ+B,EAa/BC,oBAb+B,EAc/BC,4BAd+B,EAe/BC,sBAf+B,EAgB/BC,8BAhB+B,EAiB/BC,wBAjB+B,EAkB/BC,gCAlB+B;AAoB/B,QAAMC,SAAS,GACb1M,KAAK,CAAC,CAAD,CAAL,CAAS0G,OAAT,KACA1G,KAAK,CAAC,CAAD,CAAL,CAAS0G,OAAT,EADA,GAEA1G,KAAK,CAAC,CAAD,CAAL,CAAS2M,iBAAT,KAA+B,EAA/B,GAAoC,IAFpC,GAGA3M,KAAK,CAAC,CAAD,CAAL,CAAS2M,iBAAT,KAA+B,EAA/B,GAAoC,IAJtC;AAKA,MAAIC,QAAQ,GAAG7N,KAAK,CAACwE,GAAN,CAAU,CAACC,CAAD,EAAIyF,CAAJ;AACvB,WAAO4D,gBAAgB,CACrBrJ,CADqB,EAErByF,CAFqB,EAGrBjJ,KAHqB,EAIrB0M,SAJqB,EAKrBvE,WALqB,EAMrBhF,SANqB,EAOrB6H,UAPqB,EAQrBc,eARqB,EASrBC,WATqB,EAUrBzH,GAVqB,EAWrB0H,gBAXqB,EAYrBC,wBAZqB,EAarBC,kBAbqB,EAcrBC,0BAdqB,EAerBC,oBAfqB,EAgBrBC,4BAhBqB,EAiBrBC,sBAjBqB,EAkBrBC,8BAlBqB,EAmBrBC,wBAnBqB,EAoBrBC,gCApBqB,CAAvB;AAsBD,GAvBc,CAAf;AA0BAG,EAAAA,QAAQ,GAAGA,QAAQ,CAACrJ,GAAT,CAAanE,IAAI;AAC1B,UAAM0N,YAAY,GAAG1N,IAAI,CAAC0N,YAAL,IAAqB,EAA1C;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,YAAY,CAACvL,MAAjC,EAAyCwL,CAAC,EAA1C,EAA8C;AAC5C,YAAMC,UAAU,GAAGJ,QAAQ,CAACK,SAAT,CACjB1D,KAAK,IAAIA,KAAK,CAAC3F,EAAN,KAAakJ,YAAY,CAACC,CAAD,CADjB,CAAnB;AAGA,UAAIC,UAAU,KAAK,CAAC,CAApB,EAAuBJ,QAAQ,CAACI,UAAD,CAAR,CAAqBE,WAArB,CAAiCjN,IAAjC,CAAsCb,IAAtC;AACxB;;AACD,WAAOA,IAAP;AACD,GATU,CAAX;AAWA,SAAOwN,QAAP;AACD,CA/DM;;AAiEP,MAAMC,gBAAgB,GAAG,CACvBzN,IADuB,EAEvBwG,KAFuB,EAGvB5F,KAHuB,EAIvB0M,SAJuB,EAKvBvE,WALuB,EAMvBhF,SANuB,EAOvB6H,UAPuB,EAQvBc,eARuB,EASvBC,WATuB,EAUvBzH,GAVuB,EAWvB0H,gBAXuB,EAYvBC,wBAZuB,EAavBC,kBAbuB,EAcvBC,0BAduB,EAevBC,oBAfuB,EAgBvBC,4BAhBuB,EAiBvBC,sBAjBuB,EAkBvBC,8BAlBuB,EAmBvBC,wBAnBuB,EAoBvBC,gCApBuB;AAsBvB,MAAIU,OAAJ;;AACA,UAAQ/N,IAAI,CAACgO,IAAb;AACE,SAAK,WAAL;AACED,MAAAA,OAAO,GAAGE,kBAAkB,CAC1BjO,IAD0B,EAE1BwG,KAF0B,EAG1B5F,KAH0B,EAI1B0M,SAJ0B,EAK1BvE,WAL0B,EAM1BhF,SAN0B,EAO1B6H,UAP0B,EAQ1Bc,eAR0B,EAS1BC,WAT0B,EAU1BS,wBAV0B,EAW1BC,gCAX0B,CAA5B;AAaA;;AACF,SAAK,SAAL;AACEU,MAAAA,OAAO,GAAGG,YAAY,CACpBlO,IADoB,EAEpBwG,KAFoB,EAGpB5F,KAHoB,EAIpB0M,SAJoB,EAKpBvE,WALoB,EAMpBhF,SANoB,EAOpB6H,UAPoB,EAQpBc,eARoB,EASpBC,WAToB,EAUpBzH,GAVoB,EAWpB8H,oBAXoB,EAYpBC,4BAZoB,EAapBC,sBAboB,EAcpBC,8BAdoB,CAAtB;AAgBA;;AACF;AACEY,MAAAA,OAAO,GAAGG,YAAY,CACpBlO,IADoB,EAEpBwG,KAFoB,EAGpB5F,KAHoB,EAIpB0M,SAJoB,EAKpBvE,WALoB,EAMpBhF,SANoB,EAOpB6H,UAPoB,EAQpBc,eARoB,EASpBC,WAToB,EAUpBzH,GAVoB,EAWpB0H,gBAXoB,EAYpBC,wBAZoB,EAapBC,kBAboB,EAcpBC,0BAdoB,CAAtB;AAgBA;AAnDJ;;AAqDA,SAAOgB,OAAP;AACD,CA7ED;;AA+EA,MAAMG,YAAY,GAAG,CACnBlO,IADmB,EAEnBwG,KAFmB,EAGnB5F,KAHmB,EAInB0M,SAJmB,EAKnBvE,WALmB,EAMnBhF,SANmB,EAOnB6H,UAPmB,EAQnBc,eARmB,EASnBC,WATmB,EAUnBzH,GAVmB,EAWnB0H,gBAXmB,EAYnBC,wBAZmB,EAanBC,kBAbmB,EAcnBC,0BAdmB;AAgBnB,MAAIrG,EAAJ;AACA,MAAIC,EAAJ;;AACA,MAAIzB,GAAJ,EAAS;AACPyB,IAAAA,EAAE,GAAGwH,kBAAkB,CAACnO,IAAI,CAACF,KAAN,EAAac,KAAb,EAAoB0M,SAApB,EAA+BvE,WAA/B,CAAvB;AACArC,IAAAA,EAAE,GAAGyH,kBAAkB,CAACnO,IAAI,CAACC,GAAN,EAAWW,KAAX,EAAkB0M,SAAlB,EAA6BvE,WAA7B,CAAvB;AACD,GAHD,MAGO;AACLrC,IAAAA,EAAE,GAAG0H,eAAe,CAACpO,IAAI,CAACF,KAAN,EAAac,KAAb,EAAoB0M,SAApB,EAA+BvE,WAA/B,CAApB;AACApC,IAAAA,EAAE,GAAGyH,eAAe,CAACpO,IAAI,CAACC,GAAN,EAAWW,KAAX,EAAkB0M,SAAlB,EAA6BvE,WAA7B,CAApB;AACD;;AACD,MAAIsF,YAAY,GAAqBrO,IAAI,CAACgO,IAA1C;;AACA,MAAIK,YAAY,KAAK,MAAjB,IAA2B1H,EAAE,GAAGD,EAAL,GAAUiG,WAAW,GAAG,CAAvD,EAA0D;AACxD0B,IAAAA,YAAY,GAAG,WAAf;AACA1H,IAAAA,EAAE,GAAGD,EAAE,GAAGiG,WAAW,GAAG,CAAxB;AACD;;AAED,QAAM,CAAC2B,aAAD,EAAgBC,SAAhB,IAA6BC,oBAAoB,CACrD9H,EADqD,EAErDC,EAFqD,EAGrD3G,IAAI,CAACwH,QAHgD,EAIrDtC,GAJqD,CAAvD;AAMA,QAAM+D,CAAC,GAAGwF,eAAe,CAACjI,KAAD,EAAQzC,SAAR,EAAmB6H,UAAnB,CAAzB;AACA,QAAMtH,YAAY,GAAGtE,IAAI,CAACgO,IAAL,KAAc,SAAd,GAA0BhO,IAAI,CAACsE,YAA/B,GAA8CoK,SAAnE;AAEA,QAAM5L,MAAM,GAAG;AACb6L,IAAAA,eAAe,EAAE7B,kBADJ;AAEb8B,IAAAA,uBAAuB,EAAE7B,0BAFZ;AAGb8B,IAAAA,aAAa,EAAEjC,gBAHF;AAIbkC,IAAAA,qBAAqB,EAAEjC,wBAJV;AAKb,OAAG7M,IAAI,CAAC8C;AALK,GAAf;AAOA,SAAO,EACL,GAAG9C,IADE;AAELqO,IAAAA,YAFK;AAGL3H,IAAAA,EAHK;AAILC,IAAAA,EAJK;AAKLsC,IAAAA,CALK;AAMLzC,IAAAA,KANK;AAOL+H,IAAAA,SAPK;AAQLD,IAAAA,aARK;AASL5B,IAAAA,eATK;AAULC,IAAAA,WAVK;AAWLrI,IAAAA,YAXK;AAYLpB,IAAAA,MAAM,EAAE0I,UAZH;AAaLkC,IAAAA,WAAW,EAAE,EAbR;AAcLhL,IAAAA;AAdK,GAAP;AAgBD,CA/DD;;AAiEA,MAAMmL,kBAAkB,GAAG,CACzBjO,IADyB,EAEzBwG,KAFyB,EAGzB5F,KAHyB,EAIzB0M,SAJyB,EAKzBvE,WALyB,EAMzBhF,SANyB,EAOzB6H,UAPyB,EAQzBc,eARyB,EASzBC,WATyB,EAUzBS,wBAVyB,EAWzBC,gCAXyB;AAazB,QAAMjE,CAAC,GAAGgF,eAAe,CAACpO,IAAI,CAACF,KAAN,EAAac,KAAb,EAAoB0M,SAApB,EAA+BvE,WAA/B,CAAzB;AACA,QAAME,CAAC,GAAGwF,eAAe,CAACjI,KAAD,EAAQzC,SAAR,EAAmB6H,UAAnB,CAAzB;AAEA,QAAMlF,EAAE,GAAG0C,CAAC,GAAGwC,UAAU,GAAG,GAA5B;AACA,QAAMjF,EAAE,GAAGyC,CAAC,GAAGwC,UAAU,GAAG,GAA5B;AAEA,QAAMmD,aAAa,GAAGnD,UAAU,GAAG,KAAnC;AACA,QAAM9I,MAAM,GAAG;AACb6L,IAAAA,eAAe,EAAEvB,wBADJ;AAEbwB,IAAAA,uBAAuB,EAAEvB,gCAFZ;AAGbwB,IAAAA,aAAa,EAAE,EAHF;AAIbC,IAAAA,qBAAqB,EAAE,EAJV;AAKb,OAAG9O,IAAI,CAAC8C;AALK,GAAf;AAOA,SAAO,EACL,GAAG9C,IADE;AAELC,IAAAA,GAAG,EAAED,IAAI,CAACF,KAFL;AAGL4G,IAAAA,EAHK;AAILC,IAAAA,EAJK;AAKLsC,IAAAA,CALK;AAMLzC,IAAAA,KANK;AAOL+H,IAAAA,SAAS,EAAE,CAPN;AAQLD,IAAAA,aAAa,EAAE,CARV;AASL5B,IAAAA,eATK;AAULC,IAAAA,WAVK;AAWL0B,IAAAA,YAAY,EAAErO,IAAI,CAACgO,IAXd;AAYLxG,IAAAA,QAAQ,EAAE,CAZL;AAaLtE,IAAAA,MAAM,EAAE6L,aAbH;AAcLzK,IAAAA,YAAY,EAAEoK,SAdT;AAeLZ,IAAAA,WAAW,EAAE,EAfR;AAgBLhL,IAAAA;AAhBK,GAAP;AAkBD,CA7CD;;AA+CA,MAAMsL,eAAe,GAAG,CACtBY,KADsB,EAEtBpO,KAFsB,EAGtB0M,SAHsB,EAItBvE,WAJsB;AAMtB,QAAMvC,KAAK,GAAG,CAAC,EACb,CAACwI,KAAK,CAAC1H,OAAN,KACC1G,KAAK,CAAC,CAAD,CAAL,CAAS0G,OAAT,EADD,GAEC0H,KAAK,CAACzB,iBAAN,EAFD,GAGC3M,KAAK,CAAC,CAAD,CAAL,CAAS2M,iBAAT,EAHF,IAIAD,SALa,CAAf;AAOA,QAAMlE,CAAC,GAAGpH,IAAI,CAACiN,KAAL,CACR,CAACzI,KAAK,GACJ,CAACwI,KAAK,CAAC1H,OAAN,KACC1G,KAAK,CAAC4F,KAAD,CAAL,CAAac,OAAb,EADD,GAEC0H,KAAK,CAACzB,iBAAN,KAA4B,EAA5B,GAAiC,IAFlC,GAGC3M,KAAK,CAAC4F,KAAD,CAAL,CAAa+G,iBAAb,KAAmC,EAAnC,GAAwC,IAH1C,IAIED,SALJ,IAMEvE,WAPM,CAAV;AASA,SAAOK,CAAP;AACD,CAvBD;;AAwBA,MAAM+E,kBAAkB,GAAG,CACzBa,KADyB,EAEzBpO,KAFyB,EAGzB0M,SAHyB,EAIzBvE,WAJyB;AAMzB,MAAIK,CAAC,GAAGgF,eAAe,CAACY,KAAD,EAAQpO,KAAR,EAAe0M,SAAf,EAA0BvE,WAA1B,CAAvB;AACAK,EAAAA,CAAC,IAAIL,WAAL;AACA,SAAOK,CAAP;AACD,CATD;;AAUA,MAAMqF,eAAe,GAAG,CACtBjI,KADsB,EAEtBzC,SAFsB,EAGtB6H,UAHsB;AAKtB,QAAM3C,CAAC,GAAGzC,KAAK,GAAGzC,SAAR,GAAoB,CAACA,SAAS,GAAG6H,UAAb,IAA2B,CAAzD;AACA,SAAO3C,CAAP;AACD,CAPD;;AASA,AAAO,MAAMuF,oBAAoB,GAAG,CAClCU,MADkC,EAElCC,MAFkC,EAGlC3H,QAHkC,EAIlCtC,GAJkC;AAMlC,QAAMoJ,aAAa,GAAG,CAACa,MAAM,GAAGD,MAAV,IAAoB1H,QAApB,GAA+B,IAArD;AACA,MAAI+G,SAAJ;;AACA,MAAIrJ,GAAJ,EAAS;AACPqJ,IAAAA,SAAS,GAAGY,MAAM,GAAGb,aAArB;AACD,GAFD,MAEO;AACLC,IAAAA,SAAS,GAAGW,MAAZ;AACD;;AACD,SAAO,CAACZ,aAAD,EAAgBC,SAAhB,CAAP;AACD,CAdM;AAgBP;AAWA,MAAMa,WAAW,GAAG,CAAChG,CAAD,EAAYpJ,IAAZ;AAClB,MAAIoJ,CAAC,IAAIpJ,IAAI,CAAC2G,EAAd,EAAkB,OAAO,GAAP,CAAlB,KACK,IAAIyC,CAAC,IAAIpJ,IAAI,CAAC0G,EAAd,EAAkB,OAAO,CAAP,CAAlB,KACA;AACH,UAAM2I,QAAQ,GAAGrP,IAAI,CAAC2G,EAAL,GAAU3G,IAAI,CAAC0G,EAAhC;AACA,UAAM4I,eAAe,GAAGtN,IAAI,CAACiN,KAAL,CAAY,CAAC7F,CAAC,GAAGpJ,IAAI,CAAC0G,EAAV,IAAgB,GAAjB,GAAwB2I,QAAnC,CAAxB;AACA,WAAOC,eAAP;AACD;AACF,CARD;;AASA,MAAMC,cAAc,GAAG,CAACnG,CAAD,EAAYpJ,IAAZ;AACrB,MAAIoJ,CAAC,IAAIpJ,IAAI,CAAC2G,EAAd,EAAkB,OAAO,CAAP,CAAlB,KACK,IAAIyC,CAAC,IAAIpJ,IAAI,CAAC0G,EAAd,EAAkB,OAAO,GAAP,CAAlB,KACA;AACH,UAAM2I,QAAQ,GAAGrP,IAAI,CAAC2G,EAAL,GAAU3G,IAAI,CAAC0G,EAAhC;AACA,UAAM4I,eAAe,GAAGtN,IAAI,CAACiN,KAAL,CAAY,CAACjP,IAAI,CAAC2G,EAAL,GAAUyC,CAAX,IAAgB,GAAjB,GAAwBiG,QAAnC,CAAxB;AACA,WAAOC,eAAP;AACD;AACF,CARD;;AAUA,AAAO,MAAME,gBAAgB,GAAG,CAC9BjB,SAD8B,EAE9BkB,KAF8B,EAG9B7D,UAH8B;AAK9B,QAAM8D,KAAK,GAAG,CACZnB,SAAS,GAAG,CADA,EAEZkB,KAAK,GAAG7D,UAFI,EAGZ2C,SAAS,GAAG,CAHA,EAIZkB,KAAK,GAAG7D,UAJI,EAKZ2C,SALY,EAMZkB,KAAK,GAAG7D,UAAR,GAAqB,IANT,CAAd;AAQA,SAAO8D,KAAK,CAACC,IAAN,CAAW,GAAX,CAAP;AACD,CAdM;;AAgBP,MAAMC,QAAQ,GAAG,CAACxG,CAAD,EAAYyG,KAAZ,EAA2B7P,IAA3B;AACf,MAAIoJ,CAAC,IAAIpJ,IAAI,CAAC2G,EAAL,GAAU3G,IAAI,CAAC2M,WAAL,GAAmB,CAAtC,EAAyC;AACvCvD,IAAAA,CAAC,GAAGpJ,IAAI,CAAC2G,EAAL,GAAU3G,IAAI,CAAC2M,WAAL,GAAmB,CAAjC;AACD;;AACD,QAAMmD,KAAK,GAAG9N,IAAI,CAACiN,KAAL,CAAW,CAAC7F,CAAC,GAAGpJ,IAAI,CAAC0G,EAAV,IAAgBmJ,KAA3B,CAAd;AACA,QAAME,gBAAgB,GAAGD,KAAK,GAAGD,KAAjC;AACA,QAAMG,IAAI,GAAGhQ,IAAI,CAAC0G,EAAL,GAAUqJ,gBAAvB;AACA,SAAOC,IAAP;AACD,CARD;;AAUA,MAAMC,MAAM,GAAG,CAAC7G,CAAD,EAAYyG,KAAZ,EAA2B7P,IAA3B;AACb,MAAIoJ,CAAC,IAAIpJ,IAAI,CAAC0G,EAAL,GAAU1G,IAAI,CAAC2M,WAAL,GAAmB,CAAtC,EAAyC;AACvCvD,IAAAA,CAAC,GAAGpJ,IAAI,CAAC0G,EAAL,GAAU1G,IAAI,CAAC2M,WAAL,GAAmB,CAAjC;AACD;;AACD,QAAMmD,KAAK,GAAG9N,IAAI,CAACiN,KAAL,CAAW,CAAC7F,CAAC,GAAGpJ,IAAI,CAAC2G,EAAV,IAAgBkJ,KAA3B,CAAd;AACA,QAAME,gBAAgB,GAAGD,KAAK,GAAGD,KAAjC;AACA,QAAMG,IAAI,GAAGhQ,IAAI,CAAC2G,EAAL,GAAUoJ,gBAAvB;AACA,SAAOC,IAAP;AACD,CARD;;AAUA,MAAME,OAAO,GAAG,CAAC9G,CAAD,EAAYyG,KAAZ,EAA2B7P,IAA3B;AACd,QAAM8P,KAAK,GAAG9N,IAAI,CAACiN,KAAL,CAAW,CAAC7F,CAAC,GAAGpJ,IAAI,CAAC0G,EAAV,IAAgBmJ,KAA3B,CAAd;AACA,QAAME,gBAAgB,GAAGD,KAAK,GAAGD,KAAjC;AACA,QAAMM,KAAK,GAAGnQ,IAAI,CAAC0G,EAAL,GAAUqJ,gBAAxB;AACA,QAAMK,KAAK,GAAGD,KAAK,GAAGnQ,IAAI,CAAC2G,EAAb,GAAkB3G,IAAI,CAAC0G,EAArC;AACA,SAAO,CAACyJ,KAAD,EAAQC,KAAR,CAAP;AACD,CAND;;AAQA,MAAMC,OAAO,GAAG,CACdjH,CADc,EAEdkH,KAFc,EAGdC,QAHc,EAIdV,KAJc,EAKdW,QALc;AAOd,MAAI7R,OAAO,GAAG,IAAIC,IAAJ,CAAU,CAACwK,CAAC,GAAGkH,KAAL,IAAcT,KAAf,GAAwBW,QAAxB,GAAmCD,QAAQ,CAACjJ,OAAT,EAA5C,CAAd;AACA3I,EAAAA,OAAO,GAAG,IAAIC,IAAJ,CACRD,OAAO,CAAC2I,OAAR,KACE,CAAC3I,OAAO,CAAC4O,iBAAR,KAA8BgD,QAAQ,CAAChD,iBAAT,EAA/B,IAA+D,KAFzD,CAAV;AAIA,SAAO5O,OAAP;AACD,CAbD;;AAkBA,AAAO,MAAM8R,yBAAyB,GAAG,CACvCC,IADuC,EAEvCC,MAFuC,EAGvCxI,YAHuC,EAIvC0H,KAJuC,EAKvCW,QALuC,EAMvCI,gBANuC,EAOvC1L,GAPuC;AASvC,MAAI2L,MAAJ;;AACA,UAAQ1I,YAAY,CAAC6F,IAArB;AACE,SAAK,WAAL;AACE6C,MAAAA,MAAM,GAAGC,qCAAqC,CAC5CJ,IAD4C,EAE5CC,MAF4C,EAG5CxI,YAH4C,EAI5C0H,KAJ4C,EAK5CW,QAL4C,EAM5CI,gBAN4C,CAA9C;AAQA;;AACF;AACEC,MAAAA,MAAM,GAAGE,+BAA+B,CACtCL,IADsC,EAEtCC,MAFsC,EAGtCxI,YAHsC,EAItC0H,KAJsC,EAKtCW,QALsC,EAMtCI,gBANsC,EAOtC1L,GAPsC,CAAxC;AASA;AArBJ;;AAuBA,SAAO2L,MAAP;AACD,CAlCM;;AAoCP,MAAME,+BAA+B,GAAG,CACtCL,IADsC,EAEtCC,MAFsC,EAGtCxI,YAHsC,EAItC0H,KAJsC,EAKtCW,QALsC,EAMtCI,gBANsC,EAOtC1L,GAPsC;AAStC,QAAM8L,WAAW,GAAY,EAAE,GAAG7I;AAAL,GAA7B;AACA,MAAI8I,SAAS,GAAG,KAAhB;;AACA,UAAQN,MAAR;AACE,SAAK,UAAL;AACE,UAAIzL,GAAJ,EAAS;AACP8L,QAAAA,WAAW,CAACxJ,QAAZ,GAAuB+H,cAAc,CAACmB,IAAD,EAAOvI,YAAP,CAArC;AACD,OAFD,MAEO;AACL6I,QAAAA,WAAW,CAACxJ,QAAZ,GAAuB4H,WAAW,CAACsB,IAAD,EAAOvI,YAAP,CAAlC;AACD;;AACD8I,MAAAA,SAAS,GAAGD,WAAW,CAACxJ,QAAZ,KAAyBW,YAAY,CAACX,QAAlD;;AACA,UAAIyJ,SAAJ,EAAe;AACb,cAAM,CAAC3C,aAAD,EAAgBC,SAAhB,IAA6BC,oBAAoB,CACrDwC,WAAW,CAACtK,EADyC,EAErDsK,WAAW,CAACrK,EAFyC,EAGrDqK,WAAW,CAACxJ,QAHyC,EAIrDtC,GAJqD,CAAvD;AAMA8L,QAAAA,WAAW,CAAC1C,aAAZ,GAA4BA,aAA5B;AACA0C,QAAAA,WAAW,CAACzC,SAAZ,GAAwBA,SAAxB;AACD;;AACD;;AACF,SAAK,OAAL;AAAc;AACZ,cAAM4B,KAAK,GAAGP,QAAQ,CAACc,IAAD,EAAOb,KAAP,EAAc1H,YAAd,CAAtB;AACA6I,QAAAA,WAAW,CAACtK,EAAZ,GAAiByJ,KAAjB;AACAc,QAAAA,SAAS,GAAGD,WAAW,CAACtK,EAAZ,KAAmByB,YAAY,CAACzB,EAA5C;;AACA,YAAIuK,SAAJ,EAAe;AACb,cAAI/L,GAAJ,EAAS;AACP8L,YAAAA,WAAW,CAAC/Q,GAAZ,GAAkBoQ,OAAO,CACvBF,KADuB,EAEvBhI,YAAY,CAACzB,EAFU,EAGvByB,YAAY,CAAClI,GAHU,EAIvB4P,KAJuB,EAKvBW,QALuB,CAAzB;AAOD,WARD,MAQO;AACLQ,YAAAA,WAAW,CAAClR,KAAZ,GAAoBuQ,OAAO,CACzBF,KADyB,EAEzBhI,YAAY,CAACzB,EAFY,EAGzByB,YAAY,CAACrI,KAHY,EAIzB+P,KAJyB,EAKzBW,QALyB,CAA3B;AAOD;;AACD,gBAAM,CAAClC,aAAD,EAAgBC,SAAhB,IAA6BC,oBAAoB,CACrDwC,WAAW,CAACtK,EADyC,EAErDsK,WAAW,CAACrK,EAFyC,EAGrDqK,WAAW,CAACxJ,QAHyC,EAIrDtC,GAJqD,CAAvD;AAMA8L,UAAAA,WAAW,CAAC1C,aAAZ,GAA4BA,aAA5B;AACA0C,UAAAA,WAAW,CAACzC,SAAZ,GAAwBA,SAAxB;AACD;;AACD;AACD;;AACD,SAAK,KAAL;AAAY;AACV,cAAM6B,KAAK,GAAGH,MAAM,CAACS,IAAD,EAAOb,KAAP,EAAc1H,YAAd,CAApB;AACA6I,QAAAA,WAAW,CAACrK,EAAZ,GAAiByJ,KAAjB;AACAa,QAAAA,SAAS,GAAGD,WAAW,CAACrK,EAAZ,KAAmBwB,YAAY,CAACxB,EAA5C;;AACA,YAAIsK,SAAJ,EAAe;AACb,cAAI/L,GAAJ,EAAS;AACP8L,YAAAA,WAAW,CAAClR,KAAZ,GAAoBuQ,OAAO,CACzBD,KADyB,EAEzBjI,YAAY,CAACxB,EAFY,EAGzBwB,YAAY,CAACrI,KAHY,EAIzB+P,KAJyB,EAKzBW,QALyB,CAA3B;AAOD,WARD,MAQO;AACLQ,YAAAA,WAAW,CAAC/Q,GAAZ,GAAkBoQ,OAAO,CACvBD,KADuB,EAEvBjI,YAAY,CAACxB,EAFU,EAGvBwB,YAAY,CAAClI,GAHU,EAIvB4P,KAJuB,EAKvBW,QALuB,CAAzB;AAOD;;AACD,gBAAM,CAAClC,aAAD,EAAgBC,SAAhB,IAA6BC,oBAAoB,CACrDwC,WAAW,CAACtK,EADyC,EAErDsK,WAAW,CAACrK,EAFyC,EAGrDqK,WAAW,CAACxJ,QAHyC,EAIrDtC,GAJqD,CAAvD;AAMA8L,UAAAA,WAAW,CAAC1C,aAAZ,GAA4BA,aAA5B;AACA0C,UAAAA,WAAW,CAACzC,SAAZ,GAAwBA,SAAxB;AACD;;AACD;AACD;;AACD,SAAK,MAAL;AAAa;AACX,cAAM,CAAC2C,SAAD,EAAYC,SAAZ,IAAyBjB,OAAO,CACpCQ,IAAI,GAAGE,gBAD6B,EAEpCf,KAFoC,EAGpC1H,YAHoC,CAAtC;AAKA8I,QAAAA,SAAS,GAAGC,SAAS,KAAK/I,YAAY,CAACzB,EAAvC;;AACA,YAAIuK,SAAJ,EAAe;AACbD,UAAAA,WAAW,CAAClR,KAAZ,GAAoBuQ,OAAO,CACzBa,SADyB,EAEzB/I,YAAY,CAACzB,EAFY,EAGzByB,YAAY,CAACrI,KAHY,EAIzB+P,KAJyB,EAKzBW,QALyB,CAA3B;AAOAQ,UAAAA,WAAW,CAAC/Q,GAAZ,GAAkBoQ,OAAO,CACvBc,SADuB,EAEvBhJ,YAAY,CAACxB,EAFU,EAGvBwB,YAAY,CAAClI,GAHU,EAIvB4P,KAJuB,EAKvBW,QALuB,CAAzB;AAOAQ,UAAAA,WAAW,CAACtK,EAAZ,GAAiBwK,SAAjB;AACAF,UAAAA,WAAW,CAACrK,EAAZ,GAAiBwK,SAAjB;AACA,gBAAM,CAAC7C,aAAD,EAAgBC,SAAhB,IAA6BC,oBAAoB,CACrDwC,WAAW,CAACtK,EADyC,EAErDsK,WAAW,CAACrK,EAFyC,EAGrDqK,WAAW,CAACxJ,QAHyC,EAIrDtC,GAJqD,CAAvD;AAMA8L,UAAAA,WAAW,CAAC1C,aAAZ,GAA4BA,aAA5B;AACA0C,UAAAA,WAAW,CAACzC,SAAZ,GAAwBA,SAAxB;AACD;;AACD;AACD;AAvHH;;AAyHA,SAAO;AAAE0C,IAAAA,SAAF;AAAaD,IAAAA;AAAb,GAAP;AACD,CArID;;AAuIA,MAAMF,qCAAqC,GAAG,CAC5CJ,IAD4C,EAE5CC,MAF4C,EAG5CxI,YAH4C,EAI5C0H,KAJ4C,EAK5CW,QAL4C,EAM5CI,gBAN4C;AAQ5C,QAAMI,WAAW,GAAY,EAAE,GAAG7I;AAAL,GAA7B;AACA,MAAI8I,SAAS,GAAG,KAAhB;;AACA,UAAQN,MAAR;AACE,SAAK,MAAL;AAAa;AACX,cAAM,CAACO,SAAD,EAAYC,SAAZ,IAAyBjB,OAAO,CACpCQ,IAAI,GAAGE,gBAD6B,EAEpCf,KAFoC,EAGpC1H,YAHoC,CAAtC;AAKA8I,QAAAA,SAAS,GAAGC,SAAS,KAAK/I,YAAY,CAACzB,EAAvC;;AACA,YAAIuK,SAAJ,EAAe;AACbD,UAAAA,WAAW,CAAClR,KAAZ,GAAoBuQ,OAAO,CACzBa,SADyB,EAEzB/I,YAAY,CAACzB,EAFY,EAGzByB,YAAY,CAACrI,KAHY,EAIzB+P,KAJyB,EAKzBW,QALyB,CAA3B;AAOAQ,UAAAA,WAAW,CAAC/Q,GAAZ,GAAkB+Q,WAAW,CAAClR,KAA9B;AACAkR,UAAAA,WAAW,CAACtK,EAAZ,GAAiBwK,SAAjB;AACAF,UAAAA,WAAW,CAACrK,EAAZ,GAAiBwK,SAAjB;AACD;;AACD;AACD;AArBH;;AAuBA,SAAO;AAAEF,IAAAA,SAAF;AAAaD,IAAAA;AAAb,GAAP;AACD,CAlCD;;SCnkBgBI,gBACdC;AAEA,SAAQA,KAA6B,CAACpT,GAA9B,KAAsCyQ,SAA9C;AACD;AAED,SAUgB4C,kBAAkB3R;AAChC,QAAM4R,YAAY,GAAG5R,KAAK,CAAC6R,MAAN,CACnBpN,CAAC,IAAIA,CAAC,CAACE,YAAF,IAAkBF,CAAC,CAAC4J,IAAF,KAAW,SADf,CAArB;;AAGA,MAAIuD,YAAY,CAACpP,MAAb,GAAsB,CAA1B,EAA6B;AAC3B,SAAK,IAAI0H,CAAC,GAAG,CAAb,EAAgB0H,YAAY,CAACpP,MAAb,GAAsB0H,CAAtC,EAAyCA,CAAC,EAA1C,EAA8C;AAC5C,YAAM4H,WAAW,GAAGF,YAAY,CAAC1H,CAAD,CAAhC;AACA,YAAM6H,QAAQ,GAAGC,WAAW,CAAChS,KAAD,EAAQ8R,WAAR,CAA5B;AACA9R,MAAAA,KAAK,GAAGA,KAAK,CAAC6R,MAAN,CAAapN,CAAC,IAAIsN,QAAQ,CAACjS,OAAT,CAAiB2E,CAAjB,MAAwB,CAAC,CAA3C,CAAR;AACD;AACF;;AACD,SAAOzE,KAAP;AACD;;AAED,SAASgS,WAAT,CAAqBC,QAArB,EAAuC5R,IAAvC;AACE,MAAIL,KAAK,GAAW,EAApB;;AACA,MAAIK,IAAI,CAACgO,IAAL,KAAc,SAAlB,EAA6B;AAC3BrO,IAAAA,KAAK,GAAGiS,QAAQ,CAACJ,MAAT,CACNpN,CAAC,IAAIA,CAAC,CAACsJ,YAAF,IAAkBtJ,CAAC,CAACsJ,YAAF,CAAejO,OAAf,CAAuBO,IAAI,CAACwE,EAA5B,MAAoC,CAAC,CADtD,CAAR;AAGD,GAJD,MAIO;AACL7E,IAAAA,KAAK,GAAGiS,QAAQ,CAACJ,MAAT,CAAgBpN,CAAC,IAAIA,CAAC,CAACyN,OAAF,IAAazN,CAAC,CAACyN,OAAF,KAAc7R,IAAI,CAACwE,EAArD,CAAR;AACD;;AACD,QAAMsN,YAAY,GAAGnS,KAAK,CAACoS,MAAN,CACnB,CAACL,QAAD,EAAmBtN,CAAnB,KACEsN,QAAQ,CAACM,MAAT,CAAgBN,QAAhB,EAA0BC,WAAW,CAACC,QAAD,EAAWxN,CAAX,CAArC,CAFiB,EAGnB,EAHmB,CAArB;AAKAzE,EAAAA,KAAK,GAAGA,KAAK,CAACqS,MAAN,CAAarS,KAAb,EAAoBmS,YAApB,CAAR;AACA,SAAOnS,KAAP;AACD;;;;AC5BM,MAAMsS,UAAU,GAA8B,CAAC;AACpD7I,EAAAA,CADoD;AAEpDH,EAAAA,CAFoD;AAGpDhB,EAAAA,KAHoD;AAIpD/E,EAAAA,MAJoD;AAKpDgP,EAAAA,UALoD;AAMpD3D,EAAAA,SANoD;AAOpDD,EAAAA,aAPoD;AAQpD5B,EAAAA,eARoD;AASpD5J,EAAAA,MAToD;AAUpDqP,EAAAA;AAVoD,CAAD;AAYnD,QAAMC,eAAe,GAAG;AACtB,WAAOF,UAAU,GAAGpP,MAAM,CAACgM,qBAAV,GAAkChM,MAAM,CAAC+L,aAA1D;AACD,GAFD;;AAIA,QAAMwD,WAAW,GAAG;AAClB,WAAOH,UAAU,GAAGpP,MAAM,CAAC8L,uBAAV,GAAoC9L,MAAM,CAAC6L,eAA5D;AACD,GAFD;;AAIA,SACE/L,mBAAA,IAAA;AAAGuP,IAAAA,WAAW,EAAEA;GAAhB,EACEvP,mBAAA,OAAA;AACEwG,IAAAA,CAAC,EAAEA;AACHnB,IAAAA,KAAK,EAAEA;AACPgB,IAAAA,CAAC,EAAEA;AACH/F,IAAAA,MAAM,EAAEA;AACRoP,IAAAA,EAAE,EAAE5F;AACJ6F,IAAAA,EAAE,EAAE7F;AACJ3C,IAAAA,IAAI,EAAEsI,WAAW;AACjBxP,IAAAA,SAAS,EAAEG,QAAK,CAACwP;GARnB,CADF,EAWE5P,mBAAA,OAAA;AACEwG,IAAAA,CAAC,EAAEmF;AACHtG,IAAAA,KAAK,EAAEqG;AACPrF,IAAAA,CAAC,EAAEA;AACH/F,IAAAA,MAAM,EAAEA;AACRoP,IAAAA,EAAE,EAAE5F;AACJ6F,IAAAA,EAAE,EAAE7F;AACJ3C,IAAAA,IAAI,EAAEqI,eAAe;GAPvB,CAXF,CADF;AAuBD,CA3CM;;ACVA,MAAMK,aAAa,GAAiC,CAAC;AAC1DrJ,EAAAA,CAD0D;AAE1DH,EAAAA,CAF0D;AAG1DhB,EAAAA,KAH0D;AAI1D/E,EAAAA,MAJ0D;AAK1DwJ,EAAAA,eAL0D;AAM1DyF,EAAAA;AAN0D,CAAD;AAQzD,SACEvP,mBAAA,OAAA;AACEwG,IAAAA,CAAC,EAAEA;AACHH,IAAAA,CAAC,EAAEA;AACHhB,IAAAA,KAAK,EAAEA;AACP/E,IAAAA,MAAM,EAAEA;AACRL,IAAAA,SAAS,EAAEC,QAAM,CAAC4P;AAClBJ,IAAAA,EAAE,EAAE5F;AACJ6F,IAAAA,EAAE,EAAE7F;AACJyF,IAAAA,WAAW,EAAEA;GARf,CADF;AAYD,CApBM;;ACJA,MAAMQ,iBAAiB,GAAqC,CAAC;AAClEC,EAAAA,aADkE;AAElET,EAAAA;AAFkE,CAAD;AAIjE,SACEvP,mBAAA,UAAA;AACEC,IAAAA,SAAS,EAAEC,QAAM,CAAC4P;AAClBvG,IAAAA,MAAM,EAAEyG;AACRT,IAAAA,WAAW,EAAEA;GAHf,CADF;AAOD,CAXM;;ACCA,MAAMU,GAAG,GAA4B,CAAC;AAC3C7S,EAAAA,IAD2C;AAE3C8S,EAAAA,oBAF2C;AAG3CC,EAAAA,gBAH2C;AAI3C7N,EAAAA,GAJ2C;AAK3C8N,EAAAA,YAL2C;AAM3Cd,EAAAA;AAN2C,CAAD;AAQ1C,QAAMU,aAAa,GAAGpD,gBAAgB,CACpC,CAAC,CAACtK,GAAF,GAAQlF,IAAI,CAACsO,aAAb,GAA6BtO,IAAI,CAACuO,SADE,EAEpCvO,IAAI,CAACiJ,CAF+B,EAGpCjJ,IAAI,CAACkD,MAH+B,CAAtC;AAKA,QAAM+P,YAAY,GAAGjT,IAAI,CAACkD,MAAL,GAAc,CAAnC;AACA,SACEN,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAEC,QAAM,CAACoQ;AAAYC,IAAAA,QAAQ,EAAE;GAA3C,EACEvQ,mBAAA,CAACqP,UAAD;AACE7I,IAAAA,CAAC,EAAEpJ,IAAI,CAAC0G;AACRuC,IAAAA,CAAC,EAAEjJ,IAAI,CAACiJ;AACRhB,IAAAA,KAAK,EAAEjI,IAAI,CAAC2G,EAAL,GAAU3G,IAAI,CAAC0G;AACtBxD,IAAAA,MAAM,EAAElD,IAAI,CAACkD;AACbqL,IAAAA,SAAS,EAAEvO,IAAI,CAACuO;AAChBD,IAAAA,aAAa,EAAEtO,IAAI,CAACsO;AACpB5B,IAAAA,eAAe,EAAE1M,IAAI,CAAC0M;AACtB5J,IAAAA,MAAM,EAAE9C,IAAI,CAAC8C;AACboP,IAAAA,UAAU,EAAEA;AACZC,IAAAA,WAAW,EAAEiB,CAAC;AACZL,MAAAA,gBAAgB,IAAIC,YAAY,CAAC,MAAD,EAAShT,IAAT,EAAeoT,CAAf,CAAhC;AACD;GAZH,CADF,EAeExQ,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAC;GAAb,EACGkQ,gBAAgB,IACfnQ,mBAAA,IAAA,MAAA,EAEEA,mBAAA,CAAC6P,aAAD;AACErJ,IAAAA,CAAC,EAAEpJ,IAAI,CAAC0G,EAAL,GAAU;AACbuC,IAAAA,CAAC,EAAEjJ,IAAI,CAACiJ,CAAL,GAAS;AACZhB,IAAAA,KAAK,EAAEjI,IAAI,CAAC2M;AACZzJ,IAAAA,MAAM,EAAE+P;AACRvG,IAAAA,eAAe,EAAE1M,IAAI,CAAC0M;AACtByF,IAAAA,WAAW,EAAEiB,CAAC;AACZJ,MAAAA,YAAY,CAAC,OAAD,EAAUhT,IAAV,EAAgBoT,CAAhB,CAAZ;AACD;GARH,CAFF,EAaExQ,mBAAA,CAAC6P,aAAD;AACErJ,IAAAA,CAAC,EAAEpJ,IAAI,CAAC2G,EAAL,GAAU3G,IAAI,CAAC2M,WAAf,GAA6B;AAChC1D,IAAAA,CAAC,EAAEjJ,IAAI,CAACiJ,CAAL,GAAS;AACZhB,IAAAA,KAAK,EAAEjI,IAAI,CAAC2M;AACZzJ,IAAAA,MAAM,EAAE+P;AACRvG,IAAAA,eAAe,EAAE1M,IAAI,CAAC0M;AACtByF,IAAAA,WAAW,EAAEiB,CAAC;AACZJ,MAAAA,YAAY,CAAC,KAAD,EAAQhT,IAAR,EAAcoT,CAAd,CAAZ;AACD;GARH,CAbF,CAFJ,EA2BGN,oBAAoB,IACnBlQ,mBAAA,CAAC+P,iBAAD;AACEC,IAAAA,aAAa,EAAEA;AACfT,IAAAA,WAAW,EAAEiB,CAAC;AACZJ,MAAAA,YAAY,CAAC,UAAD,EAAahT,IAAb,EAAmBoT,CAAnB,CAAZ;AACD;GAJH,CA5BJ,CAfF,CADF;AAsDD,CApEM;;ACDA,MAAMC,QAAQ,GAA4B,CAAC;AAChDrT,EAAAA,IADgD;AAEhD8S,EAAAA,oBAFgD;AAGhDC,EAAAA,gBAHgD;AAIhDC,EAAAA,YAJgD;AAKhDd,EAAAA;AALgD,CAAD;AAO/C,QAAMU,aAAa,GAAGpD,gBAAgB,CACpCxP,IAAI,CAACsO,aAAL,GAAqBtO,IAAI,CAAC0G,EADU,EAEpC1G,IAAI,CAACiJ,CAF+B,EAGpCjJ,IAAI,CAACkD,MAH+B,CAAtC;AAKA,SACEN,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAEC,QAAM,CAACoQ;AAAYC,IAAAA,QAAQ,EAAE;GAA3C,EACEvQ,mBAAA,CAACqP,UAAD;AACE7I,IAAAA,CAAC,EAAEpJ,IAAI,CAAC0G;AACRuC,IAAAA,CAAC,EAAEjJ,IAAI,CAACiJ;AACRhB,IAAAA,KAAK,EAAEjI,IAAI,CAAC2G,EAAL,GAAU3G,IAAI,CAAC0G;AACtBxD,IAAAA,MAAM,EAAElD,IAAI,CAACkD;AACbqL,IAAAA,SAAS,EAAEvO,IAAI,CAACuO;AAChBD,IAAAA,aAAa,EAAEtO,IAAI,CAACsO;AACpB5B,IAAAA,eAAe,EAAE1M,IAAI,CAAC0M;AACtB5J,IAAAA,MAAM,EAAE9C,IAAI,CAAC8C;AACboP,IAAAA,UAAU,EAAEA;AACZC,IAAAA,WAAW,EAAEiB,CAAC;AACZL,MAAAA,gBAAgB,IAAIC,YAAY,CAAC,MAAD,EAAShT,IAAT,EAAeoT,CAAf,CAAhC;AACD;GAZH,CADF,EAeExQ,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAC;GAAb,EACGiQ,oBAAoB,IACnBlQ,mBAAA,CAAC+P,iBAAD;AACEC,IAAAA,aAAa,EAAEA;AACfT,IAAAA,WAAW,EAAEiB,CAAC;AACZJ,MAAAA,YAAY,CAAC,UAAD,EAAahT,IAAb,EAAmBoT,CAAnB,CAAZ;AACD;GAJH,CAFJ,CAfF,CADF;AA4BD,CAxCM;;;;ACHA,MAAME,SAAS,GAA4B,CAAC;AACjDtT,EAAAA,IADiD;AAEjD+S,EAAAA,gBAFiD;AAGjDC,EAAAA,YAHiD;AAIjDd,EAAAA;AAJiD,CAAD;AAMhD,QAAMqB,SAAS,gBAAgBvT,IAAI,CAAC0G,EAAL,GAAU1G,IAAI,CAACkD,MAAL,GAAc;MACnDlD,IAAI,CAACiJ,CAAL,GAASjJ,IAAI,CAACkD,MAAL,GAAc,OAD3B;;AAEA,QAAMmP,WAAW,GAAG;AAClB,WAAOH,UAAU,GACblS,IAAI,CAAC8C,MAAL,CAAY8L,uBADC,GAEb5O,IAAI,CAAC8C,MAAL,CAAY6L,eAFhB;AAGD,GAJD;;AAMA,SACE/L,mBAAA,IAAA;AAAGuQ,IAAAA,QAAQ,EAAE;AAAGtQ,IAAAA,SAAS,EAAEC,QAAM,CAAC0Q;GAAlC,EACE5Q,mBAAA,OAAA;AACEmH,IAAAA,IAAI,EAAEsI,WAAW;AACjBjJ,IAAAA,CAAC,EAAEpJ,IAAI,CAAC0G;AACRuB,IAAAA,KAAK,EAAEjI,IAAI,CAACkD;AACZ+F,IAAAA,CAAC,EAAEjJ,IAAI,CAACiJ;AACR/F,IAAAA,MAAM,EAAElD,IAAI,CAACkD;AACbqP,IAAAA,EAAE,EAAEvS,IAAI,CAAC0M;AACT4F,IAAAA,EAAE,EAAEtS,IAAI,CAAC0M;AACT6G,IAAAA,SAAS,EAAEA;AACX1Q,IAAAA,SAAS,EAAEC,QAAM,CAAC2Q;AAClBtB,IAAAA,WAAW,EAAEiB,CAAC;AACZL,MAAAA,gBAAgB,IAAIC,YAAY,CAAC,MAAD,EAAShT,IAAT,EAAeoT,CAAf,CAAhC;AACD;GAZH,CADF,CADF;AAkBD,CAhCM;;;;ACAA,MAAMM,OAAO,GAA4B,CAAC;AAAE1T,EAAAA,IAAF;AAAQkS,EAAAA;AAAR,CAAD;AAC9C,QAAMyB,QAAQ,GAAGzB,UAAU,GACvBlS,IAAI,CAAC8C,MAAL,CAAY8L,uBADW,GAEvB5O,IAAI,CAAC8C,MAAL,CAAY6L,eAFhB;AAGA,QAAMiF,YAAY,GAAG1B,UAAU,GAC3BlS,IAAI,CAAC8C,MAAL,CAAYgM,qBADe,GAE3B9O,IAAI,CAAC8C,MAAL,CAAY+L,aAFhB;AAGA,QAAMgF,WAAW,GAAG7T,IAAI,CAAC2G,EAAL,GAAU3G,IAAI,CAAC0G,EAAnC;AAmBA,SACE9D,mBAAA,IAAA;AAAGuQ,IAAAA,QAAQ,EAAE;AAAGtQ,IAAAA,SAAS,EAAEC,QAAM,CAACgR;GAAlC,EACElR,mBAAA,OAAA;AACEmH,IAAAA,IAAI,EAAE4J;AACNvK,IAAAA,CAAC,EAAEpJ,IAAI,CAAC0G;AACRuB,IAAAA,KAAK,EAAE4L;AACP5K,IAAAA,CAAC,EAAEjJ,IAAI,CAACiJ;AACR/F,IAAAA,MAAM,EAAElD,IAAI,CAACkD;AACbqP,IAAAA,EAAE,EAAEvS,IAAI,CAAC0M;AACT4F,IAAAA,EAAE,EAAEtS,IAAI,CAAC0M;AACT7J,IAAAA,SAAS,EAAEC,QAAM,CAACiR;GARpB,CADF,EAWEnR,mBAAA,OAAA;AACEwG,IAAAA,CAAC,EAAEpJ,IAAI,CAACuO;AACRtG,IAAAA,KAAK,EAAEjI,IAAI,CAACsO;AACZrF,IAAAA,CAAC,EAAEjJ,IAAI,CAACiJ;AACR/F,IAAAA,MAAM,EAAElD,IAAI,CAACkD;AACboP,IAAAA,EAAE,EAAEtS,IAAI,CAAC0M;AACT6F,IAAAA,EAAE,EAAEvS,IAAI,CAAC0M;AACT3C,IAAAA,IAAI,EAAE6J;GAPR,CAXF,CADF;AA2CD,CArEM;;;;ACqBA,MAAMI,QAAQ,GAA4B/J,KAAK;AACpD,QAAM;AACJjK,IAAAA,IADI;AAEJuF,IAAAA,WAFI;AAGJ0O,IAAAA,QAHI;AAIJrI,IAAAA,UAJI;AAKJsG,IAAAA,UALI;AAMJhN,IAAAA,GANI;AAOJ8N,IAAAA;AAPI,MAQF,EACF,GAAG/I;AADD,GARJ;AAWA,QAAMiK,OAAO,GAAGvO,MAAM,CAAiB,IAAjB,CAAtB;AACA,QAAM,CAACwO,QAAD,EAAWC,WAAX,IAA0BtO,QAAQ,CAAclD,mBAAA,MAAA,MAAA,CAAd,CAAxC;AACA,QAAM,CAACyR,YAAD,EAAeC,eAAf,IAAkCxO,QAAQ,CAAC,IAAD,CAAhD;AAEAG,EAAAA,SAAS,CAAC;AACR,YAAQjG,IAAI,CAACqO,YAAb;AACE,WAAK,WAAL;AACE+F,QAAAA,WAAW,CAACxR,mBAAA,CAAC0Q,SAAD,oBAAerJ,MAAf,CAAD,CAAX;AACA;;AACF,WAAK,SAAL;AACEmK,QAAAA,WAAW,CAACxR,mBAAA,CAAC8Q,OAAD,oBAAazJ,MAAb,CAAD,CAAX;AACA;;AACF,WAAK,WAAL;AACEmK,QAAAA,WAAW,CAACxR,mBAAA,CAACyQ,QAAD,oBAAcpJ,MAAd,CAAD,CAAX;AACA;;AACF;AACEmK,QAAAA,WAAW,CAACxR,mBAAA,CAACiQ,GAAD,oBAAS5I,MAAT,CAAD,CAAX;AACA;AAZJ;AAcD,GAfQ,EAeN,CAACjK,IAAD,EAAOkS,UAAP,CAfM,CAAT;AAiBAjM,EAAAA,SAAS,CAAC;AACR,QAAIiO,OAAO,CAAChO,OAAZ,EAAqB;AACnBoO,MAAAA,eAAe,CAACJ,OAAO,CAAChO,OAAR,CAAgBqO,OAAhB,GAA0BtM,KAA1B,GAAkCjI,IAAI,CAAC2G,EAAL,GAAU3G,IAAI,CAAC0G,EAAlD,CAAf;AACD;AACF,GAJQ,EAIN,CAACwN,OAAD,EAAUlU,IAAV,CAJM,CAAT;;AAMA,QAAMwU,IAAI,GAAG;AACX,UAAMvM,KAAK,GAAGjI,IAAI,CAAC2G,EAAL,GAAU3G,IAAI,CAAC0G,EAA7B;AACA,UAAM+N,QAAQ,GAAGzU,IAAI,CAAC8N,WAAL,CAAiB3L,MAAjB,GAA0B,CAA3C;;AACA,QAAIkS,YAAJ,EAAkB;AAChB,aAAOrU,IAAI,CAAC0G,EAAL,GAAUuB,KAAK,GAAG,GAAzB;AACD;;AACD,QAAI/C,GAAG,IAAIgP,OAAO,CAAChO,OAAnB,EAA4B;AAC1B,aACElG,IAAI,CAAC0G,EAAL,GACAwN,OAAO,CAAChO,OAAR,CAAgBqO,OAAhB,GAA0BtM,KAD1B,GAEA1C,WAAW,GAAG,CAACkP,QAFf,GAGAlP,WAAW,GAAG,GAJhB;AAMD,KAPD,MAOO;AACL,aAAOvF,IAAI,CAAC0G,EAAL,GAAUuB,KAAV,GAAkB1C,WAAW,GAAG,CAACkP,QAAjC,GAA4ClP,WAAW,GAAG,GAAjE;AACD;AACF,GAhBD;;AAkBA,SACE3C,mBAAA,IAAA;AACE8R,IAAAA,SAAS,EAAEtB,CAAC;AACV,cAAQA,CAAC,CAACnV,GAAV;AACE,aAAK,QAAL;AAAe;AACb,gBAAIgW,QAAJ,EAAcjB,YAAY,CAAC,QAAD,EAAWhT,IAAX,EAAiBoT,CAAjB,CAAZ;AACd;AACD;AAJH;;AAMAA,MAAAA,CAAC,CAACuB,eAAF;AACD;AACDC,IAAAA,YAAY,EAAExB,CAAC;AACbJ,MAAAA,YAAY,CAAC,YAAD,EAAehT,IAAf,EAAqBoT,CAArB,CAAZ;AACD;AACDyB,IAAAA,YAAY,EAAEzB,CAAC;AACbJ,MAAAA,YAAY,CAAC,YAAD,EAAehT,IAAf,EAAqBoT,CAArB,CAAZ;AACD;AACD0B,IAAAA,aAAa,EAAE1B,CAAC;AACdJ,MAAAA,YAAY,CAAC,UAAD,EAAahT,IAAb,EAAmBoT,CAAnB,CAAZ;AACD;AACD2B,IAAAA,OAAO,EAAE;AACP/B,MAAAA,YAAY,CAAC,QAAD,EAAWhT,IAAX,CAAZ;AACD;GArBH,EAuBGmU,QAvBH,EAwBEvR,mBAAA,OAAA;AACEwG,IAAAA,CAAC,EAAEoL,IAAI;AACPvL,IAAAA,CAAC,EAAEjJ,IAAI,CAACiJ,CAAL,GAAS2C,UAAU,GAAG;AACzB/I,IAAAA,SAAS,EACPwR,YAAY,GACRrR,KAAK,CAACgS,QADE,GAERhS,CAAkBA,KAAK,CAACiS;AAE9BlO,IAAAA,GAAG,EAAEmN;GARP,EAUGlU,IAAI,CAAC4E,IAVR,CAxBF,CADF;AAuCD,CAhGM;;ACSA,MAAMsQ,gBAAgB,GAAoC,CAAC;AAChEvV,EAAAA,KADgE;AAEhEiB,EAAAA,KAFgE;AAGhEuU,EAAAA,UAHgE;AAIhEhN,EAAAA,YAJgE;AAKhEpE,EAAAA,SALgE;AAMhEgF,EAAAA,WANgE;AAOhEyH,EAAAA,QAPgE;AAQhE4E,EAAAA,GARgE;AAShExJ,EAAAA,UATgE;AAUhEyJ,EAAAA,UAVgE;AAWhE9P,EAAAA,WAXgE;AAYhE9C,EAAAA,UAZgE;AAahEC,EAAAA,QAbgE;AAchEwC,EAAAA,GAdgE;AAehEoQ,EAAAA,aAfgE;AAgBhEC,EAAAA,aAhBgE;AAiBhEnN,EAAAA,eAjBgE;AAkBhEoN,EAAAA,YAlBgE;AAmBhEC,EAAAA,gBAnBgE;AAoBhEX,EAAAA,aApBgE;AAqBhEY,EAAAA;AArBgE,CAAD;;;AAuB/D,QAAMhG,KAAK,GAAG0F,GAAH,aAAGA,GAAH,uCAAGA,GAAG,CAAElP,OAAR,iDAAG,aAAcyP,cAAd,EAAd;AACA,QAAM,CAAC9F,KAAD,EAAQ+F,QAAR,IAAoB9P,QAAQ,CAAC,CAAD,CAAlC;AACA,QAAM,CAAC8K,gBAAD,EAAmBiF,mBAAnB,IAA0C/P,QAAQ,CAAC,CAAD,CAAxD;AACA,QAAM,CAACgQ,QAAD,EAAWC,WAAX,IAA0BjQ,QAAQ,CAAC,KAAD,CAAxC;AAGAG,EAAAA,SAAS,CAAC;AACR,UAAMqH,SAAS,GACb1M,KAAK,CAAC,CAAD,CAAL,CAAS0G,OAAT,KACA1G,KAAK,CAAC,CAAD,CAAL,CAAS0G,OAAT,EADA,GAEA1G,KAAK,CAAC,CAAD,CAAL,CAAS2M,iBAAT,KAA+B,EAA/B,GAAoC,IAFpC,GAGA3M,KAAK,CAAC,CAAD,CAAL,CAAS2M,iBAAT,KAA+B,EAA/B,GAAoC,IAJtC;AAKA,UAAMyI,QAAQ,GAAIxF,QAAQ,GAAGzH,WAAZ,GAA2BuE,SAA5C;AACAsI,IAAAA,QAAQ,CAACI,QAAD,CAAR;AACD,GARQ,EAQN,CAACjN,WAAD,EAAcnI,KAAd,EAAqB4P,QAArB,CARM,CAAT;AAUAvK,EAAAA,SAAS,CAAC;AACR,UAAMgQ,eAAe,GAAG,MAAO5E,KAAP;;;AACtB,UAAI,CAAC8D,UAAU,CAACnE,WAAZ,IAA2B,CAACtB,KAA5B,IAAqC,EAAC0F,GAAD,aAACA,GAAD,eAACA,GAAG,CAAElP,OAAN,CAAzC,EAAwD;AACxDmL,MAAAA,KAAK,CAAC6E,cAAN;AAEAxG,MAAAA,KAAK,CAACtG,CAAN,GAAUiI,KAAK,CAAC8E,OAAhB;AACA,YAAMC,MAAM,GAAG1G,KAAK,CAAC2G,eAAN,CACbjB,GADa,aACbA,GADa,gDACbA,GAAG,CAAElP,OAAL,CAAaoQ,YAAb,EADa,0DACb,sBAA6BC,OAA7B,EADa,CAAf;AAIA,YAAM;AAAEtF,QAAAA,SAAF;AAAaD,QAAAA;AAAb,UAA6BP,yBAAyB,CAC1D2F,MAAM,CAAChN,CADmD,EAE1D+L,UAAU,CAACxE,MAF+C,EAG1DwE,UAAU,CAACnE,WAH+C,EAI1DnB,KAJ0D,EAK1DW,QAL0D,EAM1DI,gBAN0D,EAO1D1L,GAP0D,CAA5D;;AASA,UAAI+L,SAAJ,EAAe;AACbqE,QAAAA,aAAa,CAAC;AAAE3E,UAAAA,MAAM,EAAEwE,UAAU,CAACxE,MAArB;AAA6BK,UAAAA;AAA7B,SAAD,CAAb;AACD;AACF,KArBD;;AAuBA,UAAMwF,aAAa,GAAG,MAAOnF,KAAP;;;AACpB,YAAM;AAAEV,QAAAA,MAAF;AAAU8F,QAAAA,oBAAV;AAAgCzF,QAAAA;AAAhC,UAAgDmE,UAAtD;AACA,UAAI,CAACnE,WAAD,IAAgB,CAACtB,KAAjB,IAA0B,EAAC0F,GAAD,aAACA,GAAD,eAACA,GAAG,CAAElP,OAAN,CAA1B,IAA2C,CAACuQ,oBAAhD,EACE;AACFpF,MAAAA,KAAK,CAAC6E,cAAN;AAEAxG,MAAAA,KAAK,CAACtG,CAAN,GAAUiI,KAAK,CAAC8E,OAAhB;AACA,YAAMC,MAAM,GAAG1G,KAAK,CAAC2G,eAAN,CACbjB,GADa,aACbA,GADa,iDACbA,GAAG,CAAElP,OAAL,CAAaoQ,YAAb,EADa,2DACb,uBAA6BC,OAA7B,EADa,CAAf;AAGA,YAAM;AAAEvF,QAAAA,WAAW,EAAE0F;AAAf,UAAkCjG,yBAAyB,CAC/D2F,MAAM,CAAChN,CADwD,EAE/DuH,MAF+D,EAG/DK,WAH+D,EAI/DnB,KAJ+D,EAK/DW,QAL+D,EAM/DI,gBAN+D,EAO/D1L,GAP+D,CAAjE;AAUA,YAAMyR,iBAAiB,GACrBF,oBAAoB,CAAC3W,KAArB,KAA+B4W,cAAc,CAAC5W,KAA9C,IACA2W,oBAAoB,CAACxW,GAArB,KAA6ByW,cAAc,CAACzW,GAD5C,IAEAwW,oBAAoB,CAACjP,QAArB,KAAkCkP,cAAc,CAAClP,QAHnD;AAMA4N,MAAAA,GAAG,CAAClP,OAAJ,CAAY0Q,mBAAZ,CAAgC,WAAhC,EAA6CX,eAA7C;AACAb,MAAAA,GAAG,CAAClP,OAAJ,CAAY0Q,mBAAZ,CAAgC,SAAhC,EAA2CJ,aAA3C;AACAlB,MAAAA,aAAa,CAAC;AAAE3E,QAAAA,MAAM,EAAE;AAAV,OAAD,CAAb;AACAoF,MAAAA,WAAW,CAAC,KAAD,CAAX;AAGA,UAAIc,gBAAgB,GAAG,IAAvB;;AACA,UACE,CAAClG,MAAM,KAAK,MAAX,IAAqBA,MAAM,KAAK,KAAhC,IAAyCA,MAAM,KAAK,OAArD,KACA6E,YADA,IAEAmB,iBAHF,EAIE;AACA,YAAI;AACF,gBAAM9F,MAAM,GAAG,MAAM2E,YAAY,CAC/BkB,cAD+B,EAE/BA,cAAc,CAAC5I,WAFgB,CAAjC;;AAIA,cAAI+C,MAAM,KAAKnC,SAAf,EAA0B;AACxBmI,YAAAA,gBAAgB,GAAGhG,MAAnB;AACD;AACF,SARD,CAQE,OAAOiG,KAAP,EAAc;AACdD,UAAAA,gBAAgB,GAAG,KAAnB;AACD;AACF,OAhBD,MAgBO,IAAIpB,gBAAgB,IAAIkB,iBAAxB,EAA2C;AAChD,YAAI;AACF,gBAAM9F,MAAM,GAAG,MAAM4E,gBAAgB,CACnCiB,cADmC,EAEnCA,cAAc,CAAC5I,WAFoB,CAArC;;AAIA,cAAI+C,MAAM,KAAKnC,SAAf,EAA0B;AACxBmI,YAAAA,gBAAgB,GAAGhG,MAAnB;AACD;AACF,SARD,CAQE,OAAOiG,KAAP,EAAc;AACdD,UAAAA,gBAAgB,GAAG,KAAnB;AACD;AACF;;AAGD,UAAI,CAACA,gBAAL,EAAuB;AACrBtB,QAAAA,aAAa,CAACkB,oBAAD,CAAb;AACD;AACF,KAnED;;AAqEA,QACE,CAACX,QAAD,KACCX,UAAU,CAACxE,MAAX,KAAsB,MAAtB,IACCwE,UAAU,CAACxE,MAAX,KAAsB,KADvB,IAECwE,UAAU,CAACxE,MAAX,KAAsB,OAFvB,IAGCwE,UAAU,CAACxE,MAAX,KAAsB,UAJxB,KAKAyE,GALA,aAKAA,GALA,eAKAA,GAAG,CAAElP,OANP,EAOE;AACAkP,MAAAA,GAAG,CAAClP,OAAJ,CAAY6Q,gBAAZ,CAA6B,WAA7B,EAA0Cd,eAA1C;AACAb,MAAAA,GAAG,CAAClP,OAAJ,CAAY6Q,gBAAZ,CAA6B,SAA7B,EAAwCP,aAAxC;AACAT,MAAAA,WAAW,CAAC,IAAD,CAAX;AACD;AACF,GAzGQ,EAyGN,CACDZ,UADC,EAEDtF,KAFC,EAGDe,gBAHC,EAID6E,gBAJC,EAKDjF,QALC,EAMDgF,YANC,EAODJ,GAPC,EAQDU,QARC,CAzGM,CAAT;;AAuHA,QAAMkB,mBAAmB,GAAG,OAC1BrG,MAD0B,EAE1B3Q,IAF0B,EAG1BqR,KAH0B;AAK1B,QAAI,CAACA,KAAL,EAAY;AACV,UAAIV,MAAM,KAAK,QAAf,EAAyB;AACvBvI,QAAAA,eAAe,CAACpI,IAAI,CAACwE,EAAN,CAAf;AACD;AACF,KAJD,MAMK,IAAI4M,eAAe,CAACC,KAAD,CAAnB,EAA4B;AAC/B,YAAIV,MAAM,KAAK,QAAf,EAAyB;AACvB,cAAI+E,QAAJ,EAAc;AACZ,gBAAI;AACF,oBAAM7E,MAAM,GAAG,MAAM6E,QAAQ,CAAC1V,IAAD,CAA7B;;AACA,kBAAI6Q,MAAM,KAAKnC,SAAX,IAAwBmC,MAA5B,EAAoC;AAClCyE,gBAAAA,aAAa,CAAC;AAAE3E,kBAAAA,MAAF;AAAUK,kBAAAA,WAAW,EAAEhR;AAAvB,iBAAD,CAAb;AACD;AACF,aALD,CAKE,OAAO8W,KAAP,EAAc;AACdG,cAAAA,OAAO,CAACH,KAAR,CAAc,sBAAsBA,KAApC;AACD;AACF;AACF;AACF,OAbI,MAeA,IAAInG,MAAM,KAAK,YAAf,EAA6B;AAChC,cAAI,CAACwE,UAAU,CAACxE,MAAhB,EAAwB;AACtB2E,YAAAA,aAAa,CAAC;AACZ3E,cAAAA,MADY;AAEZK,cAAAA,WAAW,EAAEhR,IAFD;AAGZyW,cAAAA,oBAAoB,EAAEzW;AAHV,aAAD,CAAb;AAKD;AACF,SARI,MAQE,IAAI2Q,MAAM,KAAK,YAAf,EAA6B;AAClC,cAAIwE,UAAU,CAACxE,MAAX,KAAsB,YAA1B,EAAwC;AACtC2E,YAAAA,aAAa,CAAC;AAAE3E,cAAAA,MAAM,EAAE;AAAV,aAAD,CAAb;AACD;AACF,SAJM,MAIA,IAAIA,MAAM,KAAK,UAAf,EAA2B;AAChC,WAAC,CAACmE,aAAF,IAAmBA,aAAa,CAAC9U,IAAD,CAAhC;AACD,SAFM,MAIF,IAAI2Q,MAAM,KAAK,MAAf,EAAuB;AAAA;;AAC1B,gBAAI,EAACyE,GAAD,aAACA,GAAD,eAACA,GAAG,CAAElP,OAAN,KAAiB,CAACwJ,KAAtB,EAA6B;AAC7BA,YAAAA,KAAK,CAACtG,CAAN,GAAUiI,KAAK,CAAC8E,OAAhB;AACA,kBAAMC,MAAM,GAAG1G,KAAK,CAAC2G,eAAN,2BACbjB,GAAG,CAAClP,OAAJ,CAAYoQ,YAAZ,EADa,2DACb,uBAA4BC,OAA5B,EADa,CAAf;AAGAV,YAAAA,mBAAmB,CAACO,MAAM,CAAChN,CAAP,GAAWpJ,IAAI,CAAC0G,EAAjB,CAAnB;AACA4O,YAAAA,aAAa,CAAC;AACZ3E,cAAAA,MADY;AAEZK,cAAAA,WAAW,EAAEhR,IAFD;AAGZyW,cAAAA,oBAAoB,EAAEzW;AAHV,aAAD,CAAb;AAKD,WAZI,MAYE;AACLsV,YAAAA,aAAa,CAAC;AACZ3E,cAAAA,MADY;AAEZK,cAAAA,WAAW,EAAEhR,IAFD;AAGZyW,cAAAA,oBAAoB,EAAEzW;AAHV,aAAD,CAAb;AAKD;AACF,GA7DD;;AA+DA,SACE4C,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAC;GAAb,EACED,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAC;AAASkH,IAAAA,IAAI,EAAEsL;AAAY6B,IAAAA,MAAM,EAAE7B;GAAhD,EACG1V,KAAK,CAACwE,GAAN,CAAUnE,IAAI;AACb,WAAOA,IAAI,CAAC8N,WAAL,CAAiB3J,GAAjB,CAAqBgT,KAAK;AAC/B,aACEvU,mBAAA,CAAC6I,KAAD;AACExN,QAAAA,GAAG,gBAAgB+B,IAAI,CAACwE,SAAS7E,KAAK,CAACwX,KAAK,CAAC3Q,KAAP,CAAL,CAAmBhC;AACpDkH,QAAAA,QAAQ,EAAE1L;AACV2L,QAAAA,MAAM,EAAEhM,KAAK,CAACwX,KAAK,CAAC3Q,KAAP;AACbzC,QAAAA,SAAS,EAAEA;AACX6H,QAAAA,UAAU,EAAEA;AACZrG,QAAAA,WAAW,EAAEA;AACbL,QAAAA,GAAG,EAAEA;OAPP,CADF;AAWD,KAZM,CAAP;AAaD,GAdA,CADH,CADF,EAkBEtC,mBAAA,IAAA;AAAGC,IAAAA,SAAS,EAAC;AAAMJ,IAAAA,UAAU,EAAEA;AAAYC,IAAAA,QAAQ,EAAEA;GAArD,EACG/C,KAAK,CAACwE,GAAN,CAAUnE,IAAI;AACb,WACE4C,mBAAA,CAACoR,QAAD;AACEhU,MAAAA,IAAI,EAAEA;AACNuF,MAAAA,WAAW,EAAEA;AACbqG,MAAAA,UAAU,EAAEA;AACZkH,MAAAA,oBAAoB,EAAE,CAAC,CAAC2C,gBAAF,IAAsB,CAACzV,IAAI,CAACoX;AAClDrE,MAAAA,gBAAgB,EAAE,CAAC,CAACyC,YAAF,IAAkB,CAACxV,IAAI,CAACoX;AAC1CnD,MAAAA,QAAQ,EAAE,CAACjU,IAAI,CAACoX;AAChBpE,MAAAA,YAAY,EAAEgE;AACd/Y,MAAAA,GAAG,EAAE+B,IAAI,CAACwE;AACV0N,MAAAA,UAAU,EAAE,CAAC,CAAC/J,YAAF,IAAkBnI,IAAI,CAACwE,EAAL,KAAY2D,YAAY,CAAC3D;AACvDU,MAAAA,GAAG,EAAEA;KAVP,CADF;AAcD,GAfA,CADH,CAlBF,CADF;AAuCD,CApQM;;;;ACpBA,MAAMmS,SAAS,GAA6B,CAAC;AAClDC,EAAAA,SADkD;AAElDC,EAAAA,aAFkD;AAGlDC,EAAAA,QAHkD;AAIlD7P,EAAAA,WAJkD;AAKlDrC,EAAAA,OALkD;AAMlDD,EAAAA;AANkD,CAAD;AAQjD,QAAMoS,WAAW,GAAG9R,MAAM,CAAgB,IAAhB,CAA1B;AACA,QAAM8C,sBAAsB,GAAG9C,MAAM,CAAiB,IAAjB,CAArC;AACA,QAAM+R,yBAAyB,GAAG/R,MAAM,CAAiB,IAAjB,CAAxC;AACA,QAAMgS,WAAW,GAAG,EAAE,GAAGH,QAAL;AAAepC,IAAAA,GAAG,EAAEqC;AAApB,GAApB;AAEAxR,EAAAA,SAAS,CAAC;AACR,QAAIwC,sBAAsB,CAACvC,OAA3B,EAAoC;AAClCuC,MAAAA,sBAAsB,CAACvC,OAAvB,CAA+B6B,SAA/B,GAA2CzC,OAA3C;AACD;AACF,GAJQ,EAIN,CAACA,OAAD,CAJM,CAAT;AAMAW,EAAAA,SAAS,CAAC;AACR,QAAIyR,yBAAyB,CAACxR,OAA9B,EAAuC;AACrCwR,MAAAA,yBAAyB,CAACxR,OAA1B,CAAkC0R,UAAlC,GAA+CvS,OAA/C;AACD;AACF,GAJQ,EAIN,CAACA,OAAD,CAJM,CAAT;AAMA,SACEzC,mBAAA,MAAA;AACEC,IAAAA,SAAS,EAAEC,QAAM,CAAC+U;AAClB9Q,IAAAA,GAAG,EAAE2Q;AACLI,IAAAA,GAAG,EAAC;GAHN,EAKElV,mBAAA,MAAA;AACEmV,IAAAA,KAAK,EAAC;AACN9P,IAAAA,KAAK,EAAEqP,SAAS,CAACxO;AACjB5F,IAAAA,MAAM,EAAEqU,aAAa,CAAChV;AACtBE,IAAAA,UAAU,EAAE+U,QAAQ,CAAC/U;GAJvB,EAMEG,mBAAA,CAAC+H,QAAD,oBAAc4M,cAAd,CANF,CALF,EAaE3U,mBAAA,MAAA;AACEmE,IAAAA,GAAG,EAAE0B;AACL5F,IAAAA,SAAS,EAAEC,QAAM,CAACkV;AAClBhV,IAAAA,KAAK,EACH2E,WAAW,GACP;AAAEzE,MAAAA,MAAM,EAAEyE,WAAV;AAAuBM,MAAAA,KAAK,EAAEqP,SAAS,CAACxO;AAAxC,KADO,GAEP;AAAEb,MAAAA,KAAK,EAAEqP,SAAS,CAACxO;AAAnB;GANR,EASElG,mBAAA,MAAA;AACEmV,IAAAA,KAAK,EAAC;AACN9P,IAAAA,KAAK,EAAEqP,SAAS,CAACxO;AACjB5F,IAAAA,MAAM,EAAEsU,QAAQ,CAACzT,SAAT,GAAqByT,QAAQ,CAAC7X,KAAT,CAAewC;AAC5CM,IAAAA,UAAU,EAAE+U,QAAQ,CAAC/U;AACrBsE,IAAAA,GAAG,EAAE0Q;GALP,EAOE7U,mBAAA,CAACoH,IAAD,oBAAUsN,UAAV,CAPF,EAQE1U,mBAAA,CAACsS,gBAAD,oBAAsByC,YAAtB,CARF,CATF,CAbF,CADF;AAoCD,CA7DM;;;;ACXA,MAAMM,gBAAgB,GAMxB,CAAC;AAAEvQ,EAAAA,MAAF;AAAUoB,EAAAA,QAAV;AAAoBtD,EAAAA,aAApB;AAAmCN,EAAAA,GAAnC;AAAwC2C,EAAAA;AAAxC,CAAD;AACH,QAAMC,SAAS,GAAGnC,MAAM,CAAiB,IAAjB,CAAxB;AAEAM,EAAAA,SAAS,CAAC;AACR,QAAI6B,SAAS,CAAC5B,OAAd,EAAuB;AACrB4B,MAAAA,SAAS,CAAC5B,OAAV,CAAkB0R,UAAlB,GAA+BlQ,MAA/B;AACD;AACF,GAJQ,EAIN,CAACA,MAAD,CAJM,CAAT;AAMA,SACE9E,mBAAA,MAAA;AACEkV,IAAAA,GAAG,EAAC;AACJ9U,IAAAA,KAAK,EAAE;AACLkV,MAAAA,MAAM,EAAEhT,GAAG,UACAM,yBADA,kBAEQA;AAHd;AAKP3C,IAAAA,SAAS,EAAEC,QAAM,CAAC4E;AAClBG,IAAAA,QAAQ,EAAEA;AACVd,IAAAA,GAAG,EAAEe;GATP,EAWElF,mBAAA,MAAA;AAAKI,IAAAA,KAAK,EAAE;AAAEiF,MAAAA,KAAK,EAAEa,QAAT;AAAmB5F,MAAAA,MAAM,EAAE;AAA3B;GAAZ,CAXF,CADF;AAeD,CA9BM;;MCiBMiV,KAAK,GAAwC,CAAC;AACzDxY,EAAAA,KADyD;AAEzD4C,EAAAA,YAAY,EAAZA,aAAY,GAAG,EAF0C;AAGzDwG,EAAAA,WAAW,EAAXA,YAAW,GAAG,EAH2C;AAIzDqP,EAAAA,aAAa,EAAbA,cAAa,GAAG,OAJyC;AAKzDrU,EAAAA,SAAS,EAATA,UAAS,GAAG,EAL6C;AAMzD4D,EAAAA,WAAW,EAAXA,YAAW,GAAG,CAN2C;AAOzDnF,EAAAA,SAAS,EAATA,UAAS,GAAG,KAP6C;AAQzD5C,EAAAA,QAAQ,EAARA,SAAQ,GAAGhC,QAAQ,CAACsC,KARqC;AASzDa,EAAAA,MAAM,EAANA,OAAM,GAAG,OATgD;AAUzDsX,EAAAA,OAAO,EAAPA,QAAO,GAAG,EAV+C;AAWzD3L,EAAAA,eAAe,EAAfA,gBAAe,GAAG,EAXuC;AAYzDE,EAAAA,gBAAgB,EAAhBA,iBAAgB,GAAG,SAZsC;AAazDC,EAAAA,wBAAwB,EAAxBA,yBAAwB,GAAG,SAb8B;AAczDC,EAAAA,kBAAkB,EAAlBA,mBAAkB,GAAG,SAdoC;AAezDC,EAAAA,0BAA0B,EAA1BA,2BAA0B,GAAG,QAf4B;AAgBzDC,EAAAA,oBAAoB,EAApBA,qBAAoB,GAAG,SAhBkC;AAiBzDC,EAAAA,4BAA4B,EAA5BA,6BAA4B,GAAG,SAjB0B;AAmBzDC,EAAAA,sBAAsB,EAAtBA,uBAAsB,GAAG,SAnBgC;AAoBzDC,EAAAA,8BAA8B,EAA9BA,+BAA8B,GAAG,SApBwB;AAqBzDC,EAAAA,wBAAwB,EAAxBA,yBAAwB,GAAG,SArB8B;AAsBzDC,EAAAA,gCAAgC,EAAhCA,iCAAgC,GAAG,SAtBsB;AAuBzDnI,EAAAA,GAAG,EAAHA,IAAG,GAAG,KAvBmD;AAwBzDyH,EAAAA,WAAW,EAAXA,YAAW,GAAG,EAxB2C;AAyBzD6D,EAAAA,QAAQ,EAARA,SAAQ,GAAG,IAzB8C;AA0BzD6E,EAAAA,UAAU,EAAVA,WAAU,GAAG,SA1B4C;AA2BzD5S,EAAAA,UAAU,EAAVA,WAAU,GAAG,iFA3B4C;AA4BzDC,EAAAA,QAAQ,EAARA,SAAQ,GAAG,MA5B8C;AA6BzD6C,EAAAA,WAAW,EAAXA,YAAW,GAAG,EA7B2C;AA8BzDyD,EAAAA,UAAU,EAAVA,WAAU,GAAG,0BA9B4C;AA+BzDvD,EAAAA,cAAc,EAAdA,eAAc,GAAG2B,sBA/BwC;AAgCzDmB,EAAAA,cAAc,EAAdA,eAAc,GAAGjG,qBAhCwC;AAiCzDkG,EAAAA,aAAa,EAAbA,cAAa,GAAG1E,oBAjCyC;AAkCzD0R,EAAAA,YAlCyD;AAmCzDC,EAAAA,gBAnCyD;AAoCzDX,EAAAA,aApCyD;AAqCzDY,EAAAA,QArCyD;AAsCzD4C,EAAAA,QAtCyD;AAuCzDtU,EAAAA;AAvCyD,CAAD;AAyCxD,QAAMuU,UAAU,GAAG5S,MAAM,CAAiB,IAAjB,CAAzB;AACA,QAAM0C,WAAW,GAAG1C,MAAM,CAAiB,IAAjB,CAA1B;AACA,QAAM,CAACiF,SAAD,EAAY4N,YAAZ,IAA4B1S,QAAQ,CAAY;AACpD,UAAM,CAACrF,SAAD,EAAYC,OAAZ,IAAuBhB,cAAc,CAACC,KAAD,EAAQC,SAAR,CAA3C;AACA,WAAO;AAAEA,MAAAA,QAAQ,EAARA,SAAF;AAAYgB,MAAAA,KAAK,EAAEJ,SAAS,CAACC,SAAD,EAAYC,OAAZ,EAAqBd,SAArB;AAA5B,KAAP;AACD,GAHyC,CAA1C;AAKA,QAAM,CAACgM,UAAD,EAAa6M,aAAb,IAA8B3S,QAAQ,CAAE/B,UAAS,GAAGsU,QAAb,GAAwB,GAAzB,CAA5C;AACA,QAAM,CAAC7S,aAAD,EAAgBkT,gBAAhB,IAAoC5S,QAAQ,CAAC,CAAD,CAAlD;AACA,QAAM,CAACV,iBAAD,EAAoBuT,oBAApB,IAA4C7S,QAAQ,CAAC,CAAD,CAA1D;AACA,QAAM,CAACX,kBAAD,EAAqByT,qBAArB,IAA8C9S,QAAQ,CAAC6B,YAAD,CAA5D;AACA,QAAM,CAAC6F,QAAD,EAAWqL,WAAX,IAA0B/S,QAAQ,CAAY,EAAZ,CAAxC;AACA,QAAM,CAACqP,UAAD,EAAaG,aAAb,IAA8BxP,QAAQ,CAAa;AACvD6K,IAAAA,MAAM,EAAE;AAD+C,GAAb,CAA5C;AAIA,QAAM,CAACxI,YAAD,EAAeC,eAAf,IAAkCtC,QAAQ,EAAhD;AACA,QAAM,CAACgT,UAAD,EAAavD,aAAb,IAA8BzP,QAAQ,CAAiB,IAAjB,CAA5C;AAEA,QAAMgD,QAAQ,GAAG8B,SAAS,CAAChK,KAAV,CAAgBuB,MAAhB,GAAyB4G,YAA1C;AACA,QAAMnB,eAAe,GAAG4F,QAAQ,CAACrL,MAAT,GAAkB4B,UAA1C;AAEA,QAAM,CAACuB,OAAD,EAAUyT,UAAV,IAAwBjT,QAAQ,CAAC,CAAD,CAAtC;AACA,QAAM,CAACT,OAAD,EAAU2T,UAAV,IAAwBlT,QAAQ,CAAC,CAAC,CAAF,CAAtC;AACA,QAAM,CAACmT,iBAAD,EAAoBC,oBAApB,IAA4CpT,QAAQ,CAAC,KAAD,CAA1D;AAGAG,EAAAA,SAAS,CAAC;AACR,QAAIkT,aAAJ;;AACA,QAAInV,eAAJ,EAAqB;AACnBmV,MAAAA,aAAa,GAAG7H,iBAAiB,CAAC3R,KAAD,CAAjC;AACD,KAFD,MAEO;AACLwZ,MAAAA,aAAa,GAAGxZ,KAAhB;AACD;;AACD,UAAM,CAACc,SAAD,EAAYC,OAAZ,IAAuBhB,cAAc,CAACyZ,aAAD,EAAgBvZ,SAAhB,CAA3C;AACA,QAAIwZ,QAAQ,GAAG5Y,SAAS,CAACC,SAAD,EAAYC,OAAZ,EAAqBd,SAArB,CAAxB;;AACA,QAAIsF,IAAJ,EAAS;AACPkU,MAAAA,QAAQ,GAAGA,QAAQ,CAACC,OAAT,EAAX;;AACA,UAAIhU,OAAO,KAAK,CAAC,CAAjB,EAAoB;AAClB2T,QAAAA,UAAU,CAACI,QAAQ,CAACjX,MAAT,GAAkB4G,YAAnB,CAAV;AACD;AACF;;AACDyP,IAAAA,YAAY,CAAC;AAAE5X,MAAAA,KAAK,EAAEwY,QAAT;AAAmBxZ,MAAAA,QAAQ,EAARA;AAAnB,KAAD,CAAZ;AACAiZ,IAAAA,WAAW,CACTpM,iBAAiB,CACf0M,aADe,EAEfC,QAFe,EAGfrQ,YAHe,EAIfhF,UAJe,EAKf6H,UALe,EAMfc,gBANe,EAOfC,YAPe,EAQfzH,IARe,EASf0H,iBATe,EAUfC,yBAVe,EAWfC,mBAXe,EAYfC,2BAZe,EAafC,qBAbe,EAcfC,6BAde,EAefC,uBAfe,EAgBfC,+BAhBe,EAiBfC,yBAjBe,EAkBfC,iCAlBe,CADR,CAAX;AAsBD,GAtCQ,EAsCN,CACD1N,KADC,EAEDC,SAFC,EAGDmE,UAHC,EAID2I,gBAJC,EAKD3D,YALC,EAMD6C,UANC,EAODe,YAPC,EAQDC,iBARC,EASDC,yBATC,EAUDC,mBAVC,EAWDC,2BAXC,EAYDC,qBAZC,EAaDC,6BAbC,EAcDC,uBAdC,EAeDC,+BAfC,EAgBDC,yBAhBC,EAiBDC,iCAjBC,EAkBDnI,IAlBC,EAmBDG,OAnBC,EAoBDrB,eApBC,CAtCM,CAAT;AA6DAiC,EAAAA,SAAS,CAAC;AACR,UAAM;AAAE+K,MAAAA,WAAF;AAAeL,MAAAA;AAAf,QAA0BwE,UAAhC;;AACA,QAAInE,WAAJ,EAAiB;AACf,UAAIL,MAAM,KAAK,QAAf,EAAyB;AACvB2E,QAAAA,aAAa,CAAC;AAAE3E,UAAAA,MAAM,EAAE;AAAV,SAAD,CAAb;AACAkI,QAAAA,WAAW,CAACrL,QAAQ,CAACgE,MAAT,CAAgBpN,CAAC,IAAIA,CAAC,CAACI,EAAF,KAASwM,WAAW,CAACxM,EAA1C,CAAD,CAAX;AACD,OAHD,MAGO,IACLmM,MAAM,KAAK,MAAX,IACAA,MAAM,KAAK,KADX,IAEAA,MAAM,KAAK,OAFX,IAGAA,MAAM,KAAK,UAJN,EAKL;AACA,cAAM2I,aAAa,GAAG9L,QAAQ,CAAC+L,IAAT,CAAcnV,CAAC,IAAIA,CAAC,CAACI,EAAF,KAASwM,WAAW,CAACxM,EAAxC,CAAtB;;AACA,YACE8U,aAAa,KACZA,aAAa,CAACxZ,KAAd,CAAoBwH,OAApB,OAAkC0J,WAAW,CAAClR,KAAZ,CAAkBwH,OAAlB,EAAlC,IACCgS,aAAa,CAACrZ,GAAd,CAAkBqH,OAAlB,OAAgC0J,WAAW,CAAC/Q,GAAZ,CAAgBqH,OAAhB,EADjC,IAECgS,aAAa,CAAC9R,QAAd,KAA2BwJ,WAAW,CAACxJ,QAH5B,CADf,EAKE;AAEA,gBAAMgS,WAAW,GAAGhM,QAAQ,CAACrJ,GAAT,CAAaC,CAAC,IAChCA,CAAC,CAACI,EAAF,KAASwM,WAAW,CAACxM,EAArB,GAA0BwM,WAA1B,GAAwC5M,CADtB,CAApB;AAGAyU,UAAAA,WAAW,CAACW,WAAD,CAAX;AACD;AACF;AACF;AACF,GA3BQ,EA2BN,CAACrE,UAAD,EAAa3H,QAAb,CA3BM,CAAT;AA6BAvH,EAAAA,SAAS,CAAC;AACR,QAAI6S,UAAJ,EAAgB;AACdD,MAAAA,WAAW,CAACrL,QAAQ,CAACrJ,GAAT,CAAaC,CAAC,IAAKA,CAAC,CAACI,EAAF,KAASsU,UAAU,CAACtU,EAApB,GAAyBJ,CAAzB,GAA6B0U,UAAhD,CAAD,CAAX;AACAvD,MAAAA,aAAa,CAAC,IAAD,CAAb;AACD;AACF,GALQ,EAKN,CAACuD,UAAD,EAAatL,QAAb,CALM,CAAT;AAOAvH,EAAAA,SAAS,CAAC;AACR,UAAMwT,aAAa,GAAI1V,UAAS,GAAGsU,QAAb,GAAwB,GAA9C;;AACA,QAAIoB,aAAa,KAAK7N,UAAtB,EAAkC;AAChC6M,MAAAA,aAAa,CAACgB,aAAD,CAAb;AACD;AACF,GALQ,EAKN,CAAC1V,UAAD,EAAYsU,QAAZ,EAAqBzM,UAArB,CALM,CAAT;AAOA3F,EAAAA,SAAS,CAAC;AACR,QAAI,CAACmS,cAAL,EAAoB;AAClBM,MAAAA,gBAAgB,CAAC,CAAD,CAAhB;AACD;;AACD,QAAIrQ,WAAW,CAACnC,OAAhB,EAAyB;AACvBwS,MAAAA,gBAAgB,CAACrQ,WAAW,CAACnC,OAAZ,CAAoBI,WAArB,CAAhB;AACD;AACF,GAPQ,EAON,CAAC+B,WAAD,EAAc+P,cAAd,CAPM,CAAT;AASAnS,EAAAA,SAAS,CAAC;AACR,QAAIsS,UAAU,CAACrS,OAAf,EAAwB;AACtByS,MAAAA,oBAAoB,CAACJ,UAAU,CAACrS,OAAX,CAAmBI,WAAnB,GAAiCd,aAAlC,CAApB;AACD;AACF,GAJQ,EAIN,CAAC+S,UAAD,EAAa/S,aAAb,CAJM,CAAT;AAMAS,EAAAA,SAAS,CAAC;AACR,QAAI0B,YAAJ,EAAiB;AACfiR,MAAAA,qBAAqB,CAACjR,YAAW,GAAGpF,aAAf,CAArB;AACD,KAFD,MAEO;AACLqW,MAAAA,qBAAqB,CAACjZ,KAAK,CAACwC,MAAN,GAAe4B,UAAf,GAA2BxB,aAA5B,CAArB;AACD;AACF,GANQ,EAMN,CAACoF,YAAD,EAAchI,KAAd,CANM,CAAT;AASAsG,EAAAA,SAAS,CAAC;AACR,UAAMyT,WAAW,GAAIrI,KAAD;AAClB,UAAIA,KAAK,CAACsI,QAAN,IAAkBtI,KAAK,CAACuI,MAA5B,EAAoC;AAClC,cAAMC,UAAU,GAAGxI,KAAK,CAACuI,MAAN,GAAevI,KAAK,CAACuI,MAArB,GAA8BvI,KAAK,CAACyI,MAAvD;AACA,YAAIC,UAAU,GAAG1U,OAAO,GAAGwU,UAA3B;;AACA,YAAIE,UAAU,GAAG,CAAjB,EAAoB;AAClBA,UAAAA,UAAU,GAAG,CAAb;AACD,SAFD,MAEO,IAAIA,UAAU,GAAGjR,QAAjB,EAA2B;AAChCiR,UAAAA,UAAU,GAAGjR,QAAb;AACD;;AACDkQ,QAAAA,UAAU,CAACe,UAAD,CAAV;AACA1I,QAAAA,KAAK,CAAC6E,cAAN;AACD,OAVD,MAUO,IAAIvO,YAAJ,EAAiB;AACtB,YAAIqS,UAAU,GAAG1U,OAAO,GAAG+L,KAAK,CAACyI,MAAjC;;AACA,YAAIE,UAAU,GAAG,CAAjB,EAAoB;AAClBA,UAAAA,UAAU,GAAG,CAAb;AACD,SAFD,MAEO,IAAIA,UAAU,GAAGpS,eAAe,GAAGD,YAAnC,EAAgD;AACrDqS,UAAAA,UAAU,GAAGpS,eAAe,GAAGD,YAA/B;AACD;;AACD,YAAIqS,UAAU,KAAK1U,OAAnB,EAA4B;AAC1ByT,UAAAA,UAAU,CAACiB,UAAD,CAAV;AACA3I,UAAAA,KAAK,CAAC6E,cAAN;AACD;AACF;;AAEDgD,MAAAA,oBAAoB,CAAC,IAAD,CAApB;AACD,KAzBD;;AA4BA,QAAIX,UAAU,CAACrS,OAAf,EAAwB;AACtBqS,MAAAA,UAAU,CAACrS,OAAX,CAAmB6Q,gBAAnB,CAAoC,OAApC,EAA6C2C,WAA7C,EAA0D;AACxDO,QAAAA,OAAO,EAAE;AAD+C,OAA1D;AAGD;;AACD,WAAO;AACL,UAAI1B,UAAU,CAACrS,OAAf,EAAwB;AACtBqS,QAAAA,UAAU,CAACrS,OAAX,CAAmB0Q,mBAAnB,CAAuC,OAAvC,EAAgD8C,WAAhD;AACD;AACF,KAJD;AAKD,GAvCQ,EAuCN,CAACnB,UAAU,CAACrS,OAAZ,EAAqBZ,OAArB,EAA8BD,OAA9B,EAAuCsC,YAAvC,EAAoDmB,QAApD,EAA8D5D,IAA9D,CAvCM,CAAT;;AAyCA,QAAMgV,aAAa,GAAI7I,KAAD;AACpB,QAAI/L,OAAO,KAAK+L,KAAK,CAAC8I,aAAN,CAAoBpS,SAAhC,IAA6C,CAACkR,iBAAlD,EAAqE;AACnEF,MAAAA,UAAU,CAAC1H,KAAK,CAAC8I,aAAN,CAAoBpS,SAArB,CAAV;AACD;;AACDmR,IAAAA,oBAAoB,CAAC,KAAD,CAApB;AACD,GALD;;AAOA,QAAMkB,aAAa,GAAI/I,KAAD;AACpB,QAAIhM,OAAO,KAAKgM,KAAK,CAAC8I,aAAN,CAAoBvC,UAAhC,IAA8C,CAACqB,iBAAnD,EAAsE;AACpED,MAAAA,UAAU,CAAC3H,KAAK,CAAC8I,aAAN,CAAoBvC,UAArB,CAAV;AACD;;AACDsB,IAAAA,oBAAoB,CAAC,KAAD,CAApB;AACD,GALD;;AAUA,QAAMmB,aAAa,GAAIhJ,KAAD;AACpBA,IAAAA,KAAK,CAAC6E,cAAN;AACA,QAAI8D,UAAU,GAAG1U,OAAjB;AACA,QAAIyU,UAAU,GAAG1U,OAAjB;AACA,QAAIiV,GAAG,GAAG,IAAV;;AACA,YAAQjJ,KAAK,CAACpT,GAAd;AACE,WAAK,MAAL;AACA,WAAK,WAAL;AACE+b,QAAAA,UAAU,IAAIjW,UAAd;AACAuW,QAAAA,GAAG,GAAG,KAAN;AACA;;AACF,WAAK,IAAL;AACA,WAAK,SAAL;AACEN,QAAAA,UAAU,IAAIjW,UAAd;AACAuW,QAAAA,GAAG,GAAG,KAAN;AACA;;AACF,WAAK,MAAL;AACA,WAAK,WAAL;AACEP,QAAAA,UAAU,IAAIhR,YAAd;AACA;;AACF,WAAK,OAAL;AACA,WAAK,YAAL;AACEgR,QAAAA,UAAU,IAAIhR,YAAd;AACA;AAlBJ;;AAoBA,QAAIuR,GAAJ,EAAS;AACP,UAAIP,UAAU,GAAG,CAAjB,EAAoB;AAClBA,QAAAA,UAAU,GAAG,CAAb;AACD,OAFD,MAEO,IAAIA,UAAU,GAAGjR,QAAjB,EAA2B;AAChCiR,QAAAA,UAAU,GAAGjR,QAAb;AACD;;AACDkQ,MAAAA,UAAU,CAACe,UAAD,CAAV;AACD,KAPD,MAOO;AACL,UAAIC,UAAU,GAAG,CAAjB,EAAoB;AAClBA,QAAAA,UAAU,GAAG,CAAb;AACD,OAFD,MAEO,IAAIA,UAAU,GAAGpS,eAAe,GAAGD,YAAnC,EAAgD;AACrDqS,QAAAA,UAAU,GAAGpS,eAAe,GAAGD,YAA/B;AACD;;AACDoR,MAAAA,UAAU,CAACiB,UAAD,CAAV;AACD;;AACDd,IAAAA,oBAAoB,CAAC,IAAD,CAApB;AACD,GAzCD;;AA8CA,QAAMqB,kBAAkB,GAAIC,MAAD;AACzB,UAAMC,eAAe,GAAGjN,QAAQ,CAAC+L,IAAT,CAAcnV,CAAC,IAAIA,CAAC,CAACI,EAAF,KAASgW,MAA5B,CAAxB;AACA,UAAME,eAAe,GAAGlN,QAAQ,CAAC+L,IAAT,CACtBnV,CAAC,IAAI,CAAC,CAAC+D,YAAF,IAAkB/D,CAAC,CAACI,EAAF,KAAS2D,YAAY,CAAC3D,EADvB,CAAxB;;AAGA,QAAI8T,QAAJ,EAAc;AACZ,UAAIoC,eAAJ,EAAqB;AACnBpC,QAAAA,QAAQ,CAACoC,eAAD,EAAkB,KAAlB,CAAR;AACD;;AACD,UAAID,eAAJ,EAAqB;AACnBnC,QAAAA,QAAQ,CAACmC,eAAD,EAAkB,IAAlB,CAAR;AACD;AACF;;AACDrS,IAAAA,eAAe,CAACqS,eAAD,CAAf;AACD,GAdD;;AAeA,QAAME,mBAAmB,GAAI3a,IAAD;AAC1B,QAAIgE,eAAe,IAAIhE,IAAI,CAACsE,YAAL,KAAsBoK,SAA7C,EAAwD;AACtD1K,MAAAA,eAAe,CAAC,EAAE,GAAGhE,IAAL;AAAWsE,QAAAA,YAAY,EAAE,CAACtE,IAAI,CAACsE;AAA/B,OAAD,CAAf;AACD;AACF,GAJD;;AAKA,QAAMgT,SAAS,GAAc;AAC3BvO,IAAAA,WAAW,EAAXA,YAD2B;AAE3BD,IAAAA,QAF2B;AAG3BnJ,IAAAA,KAAK,EAAEA,KAHoB;AAI3BoE,IAAAA,SAAS,EAATA,UAJ2B;AAK3BnD,IAAAA,KAAK,EAAEgK,SAAS,CAAChK,KALU;AAM3BoI,IAAAA,UAAU,EAAVA,WAN2B;AAO3B9D,IAAAA,GAAG,EAAHA;AAP2B,GAA7B;AAUA,QAAMqS,aAAa,GAAkB;AACnC3M,IAAAA,SADmC;AAEnC7J,IAAAA,MAAM,EAANA,OAFmC;AAGnCnB,IAAAA,QAAQ,EAARA,SAHmC;AAInC2C,IAAAA,YAAY,EAAZA,aAJmC;AAKnCwG,IAAAA,WAAW,EAAXA,YALmC;AAMnCtG,IAAAA,UAAU,EAAVA,WANmC;AAOnCC,IAAAA,QAAQ,EAARA,SAPmC;AAQnCwC,IAAAA,GAAG,EAAHA;AARmC,GAArC;AAUA,QAAMsS,QAAQ,GAA0B;AACtC7X,IAAAA,KAAK,EAAE6N,QAD+B;AAEtC5M,IAAAA,KAAK,EAAEgK,SAAS,CAAChK,KAFqB;AAGtCuU,IAAAA,UAHsC;AAItChN,IAAAA,YAJsC;AAKtCpE,IAAAA,SAAS,EAATA,UALsC;AAMtC6H,IAAAA,UANsC;AAOtC7C,IAAAA,WAAW,EAAXA,YAPsC;AAQtCsM,IAAAA,UAAU,EAAVA,WARsC;AAStC7E,IAAAA,QAAQ,EAARA,SATsC;AAUtC/N,IAAAA,UAAU,EAAVA,WAVsC;AAWtCC,IAAAA,QAAQ,EAARA,SAXsC;AAYtC6C,IAAAA,WAAW,EAAXA,YAZsC;AAatCuD,IAAAA,QAbsC;AActC5D,IAAAA,GAAG,EAAHA,IAdsC;AAetCoQ,IAAAA,aAfsC;AAgBtCC,IAAAA,aAhBsC;AAiBtCnN,IAAAA,eAAe,EAAEmS,kBAjBqB;AAkBtC/E,IAAAA,YAlBsC;AAmBtCC,IAAAA,gBAnBsC;AAoBtCX,IAAAA,aApBsC;AAqBtCY,IAAAA;AArBsC,GAAxC;AAwBA,QAAM9M,UAAU,GAAkB;AAChC7E,IAAAA,SAAS,EAATA,UADgC;AAEhCpB,IAAAA,QAAQ,EAAEyV,cAFsB;AAGhC3V,IAAAA,UAAU,EAAVA,WAHgC;AAIhCC,IAAAA,QAAQ,EAARA,SAJgC;AAKhCF,IAAAA,SAAS,EAATA,UALgC;AAMhC7C,IAAAA,KAAK,EAAE6N,QANyB;AAOhCzM,IAAAA,MAAM,EAANA,OAPgC;AAQhCwB,IAAAA,YAAY,EAAZA,aARgC;AAShC+C,IAAAA,OATgC;AAUhCqC,IAAAA,WAAW,EAAXA,YAVgC;AAWhCW,IAAAA,wBAAwB,EAAExF,QAAM,CAACkV,mBAXD;AAYhC7P,IAAAA,YAZgC;AAahCE,IAAAA,WAbgC;AAchCD,IAAAA,eAAe,EAAEmS,kBAde;AAehCvW,IAAAA,eAAe,EAAE2W,mBAfe;AAgBhCpS,IAAAA,cAAc,EAAdA,eAhBgC;AAiBhCC,IAAAA,aAAa,EAAbA;AAjBgC,GAAlC;AAmBA,SACE5F,mBAAA,MAAA,MAAA,EACEA,mBAAA,MAAA;AACEC,IAAAA,SAAS,EAAEC,QAAM,CAAC8X;AAClBlG,IAAAA,SAAS,EAAE2F;AACXlH,IAAAA,QAAQ,EAAE;AACVpM,IAAAA,GAAG,EAAEwR;GAJP,EAME3V,mBAAA,CAACsF,QAAD,oBAAcU,WAAd,CANF,EAOEhG,mBAAA,CAACyU,SAAD;AACEC,IAAAA,SAAS,EAAEA;AACXC,IAAAA,aAAa,EAAEA;AACfC,IAAAA,QAAQ,EAAEA;AACV7P,IAAAA,WAAW,EAAEA;AACbrC,IAAAA,OAAO,EAAEA;AACTD,IAAAA,OAAO,EAAEA;GANX,CAPF,EAeG8P,UAAU,CAACnE,WAAX,IACCpO,mBAAA,CAACqC,OAAD;AACEM,IAAAA,WAAW,EAAEA;AACbxB,IAAAA,SAAS,EAAEA;AACXoB,IAAAA,kBAAkB,EAAEA;AACpBC,IAAAA,iBAAiB,EAAEA;AACnB3C,IAAAA,UAAU,EAAEA;AACZC,IAAAA,QAAQ,EAAEA;AACV2C,IAAAA,OAAO,EAAEA;AACTC,IAAAA,OAAO,EAAEA;AACTtF,IAAAA,IAAI,EAAEmV,UAAU,CAACnE;AACjBzO,IAAAA,YAAY,EAAEA;AACdiD,IAAAA,aAAa,EAAEA;AACfC,IAAAA,cAAc,EAAEA;AAChBP,IAAAA,GAAG,EAAEA;AACL4D,IAAAA,QAAQ,EAAEA;GAdZ,CAhBJ,EAiCElG,mBAAA,CAAC6E,cAAD;AACEG,IAAAA,eAAe,EAAEA;AACjBD,IAAAA,WAAW,EAAEA;AACbpF,IAAAA,YAAY,EAAEA;AACdmF,IAAAA,MAAM,EAAEpC;AACRuC,IAAAA,QAAQ,EAAEqS;AACVhV,IAAAA,GAAG,EAAEA;GANP,CAjCF,CADF,EA2CEtC,mBAAA,CAACqV,gBAAD;AACEnP,IAAAA,QAAQ,EAAEA;AACVtD,IAAAA,aAAa,EAAEA;AACfkC,IAAAA,MAAM,EAAErC;AACRH,IAAAA,GAAG,EAAEA;AACL2C,IAAAA,QAAQ,EAAEuS;GALZ,CA3CF,CADF;AAqDD,CApbM;;;;"}